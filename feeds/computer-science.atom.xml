<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Mestraceçš„ä¸ªäººåšå®¢ - Computer Science</title><link href="https://mestrace.github.io/" rel="alternate"></link><link href="https://mestrace.github.io/feeds/computer-science.atom.xml" rel="self"></link><id>https://mestrace.github.io/</id><updated>2025-03-10T00:00:00+08:00</updated><subtitle>Software Developer</subtitle><entry><title>è§‚çœ‹ç¬”è®°ï¼šã€Šæˆ‘å¦‚ä½•ä½¿ç”¨LLMã€‹-- Andrej Karpathy</title><link href="https://mestrace.github.io/posts/2025/Mar/10/notes-how-i-use-llm/" rel="alternate"></link><published>2025-03-10T00:00:00+08:00</published><updated>2025-03-10T00:00:00+08:00</updated><author><name>Mestrace</name></author><id>tag:mestrace.github.io,2025-03-10:/posts/2025/Mar/10/notes-how-i-use-llm/</id><summary type="html">&lt;p&gt;Andrej Karpathyçš„LLMä½¿ç”¨å¿ƒå¾—æ¶µç›–äº†å¤§è¯­è¨€æ¨¡å‹ (Large Language Models) çš„ç”Ÿæ€ã€åŸºç¡€æ¦‚å¿µå¦‚Tokenså’Œè®­ç»ƒï¼Œä»¥åŠæ€ç»´é“¾æ¨¡å‹ (Thinking Models) çš„åº”ç”¨ã€‚é‡ç‚¹ä»‹ç»äº†å·¥å…·ä½¿ç”¨ï¼Œå¦‚æœç´¢å¼•æ“å’Œä»£ç è§£é‡Šå™¨ï¼Œä»¥åŠæ¨¡æ€ (Modality) äº¤äº’ï¼ŒåŒ…æ‹¬è¯­éŸ³ã€å›¾åƒå’Œè§†é¢‘ã€‚æ­¤å¤–ï¼Œè¿˜æåˆ°äº†é™„åŠ åŠŸèƒ½ï¼Œå¦‚æŒä¹…è®°å¿†å’Œè‡ªå®šä¹‰æŒ‡ä»¤ã€‚&lt;/p&gt;</summary><content type="html">&lt;iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/EWvNQjAaOHw?si=TySv7M14rau8z93-" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen&gt;&lt;/iframe&gt;

&lt;h2&gt;ç›®å‰ç”Ÿæ€ Current Ecosystem&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å¤§å‹ç§‘æŠ€å…¬å¸ï¼šChatGPT, Gemini (Google), Meta AI, Copilot (Github / Microsoft)&lt;/li&gt;
&lt;li&gt;åˆåˆ›å…¬å¸: Claude (Anthropic), Grok (xAI / Twitter), Perplexity, DeepSeek, Le Chat (Mistral)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸€äº›è¯„åˆ†æ¦œå•&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Chatbot Arena LLM Leaderboard &lt;a href="https://huggingface.co/spaces/lmarena-ai/chatbot-arena-leaderboard"&gt;Link&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;SEAL LLM Leaderboard &lt;a href="https://scale.com/leaderboard"&gt;Link&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;3:05 - 4:03&lt;/code&gt; ä¸»è¦æ˜¯æ¼”ç¤ºä¸€ä¸‹ChatGPTåŠŸèƒ½&lt;/p&gt;
&lt;h2&gt;åŸºç¡€æ¦‚å¿µ Basic Concepts: Tokens and Training&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://tiktokenizer.vercel.app"&gt;TikTokenizer&lt;/a&gt; ç›´è§‚åœ°å±•ç¤ºäº†è¾“å…¥çš„æ–‡å­—æ˜¯å¦‚ä½•è¢«è½¬æ¢æˆTokençš„ã€‚æˆ‘ä»¬è¾“å…¥æ¨¡å‹çš„å…¶å®æ˜¯ä¸€ä¸² Tokenï¼Œæ¨¡å‹è¿”å›ç»™æˆ‘ä»¬ä¸€ä¸²Tokenï¼Œå¹¶æœ€ç»ˆè¢«å‰ç«¯ç•Œé¢åŠ å·¥æˆæ–‡å­—å±•ç¤ºå‡ºæ¥ã€‚æœ¬è´¨ä¸Šï¼Œæˆ‘ä»¬å’Œå¤§è¯­è¨€æ¨¡å‹çš„å¯¹è¯äº‹å®ä¸Šæ˜¯æŒç»­çš„æ„å»ºä¸€ä¸²ä¸€ç»´çš„Tokenåºåˆ—ã€‚é€šå¸¸ï¼Œå¤§è¯­è¨€æ¨¡å‹éƒ½é¢„å…ˆå®šä¹‰äº†ä¸€ä¸ªå›ºå®šå¤§å°çš„ä¸Šä¸‹æ–‡çª—å£ï¼ˆContext Windowï¼‰ã€‚è¿™å®è´¨ä¸Šå°±æ˜¯å¤§é¢„è¨€æ¨¡å‹å¯¹è¯çš„æœ¬è´¨ï¼Œå³ä¸Šè¿°çš„ä¸€ç»´åºåˆ—è¢«æŒç»­çš„æ·»åŠ è¿›ä¸Šä¸‹æ–‡çª—å£ä¸­ï¼Œå¹¶åœ¨åç»­çš„å¯¹è¯ä¸­ç”¨æˆ·å’ŒåŠ©æ‰‹è½®æµè¿›è¡Œè¾“å…¥ã€‚è‹¥å€Ÿç”¨è®¡ç®—æœºçš„ä¸€ä¸ªå¸¸ç”¨çŸ¥è¯†æ¥è§£é‡Šçš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸Šä¸‹æ–‡çª—å£è§†ä½œæ­¤å¤§è¯­è¨€æ¨¡å‹çš„å·¥ä½œå†…å­˜ã€‚&lt;/p&gt;
&lt;p&gt;å¤§é¢„è¨€æ¨¡å‹çš„è®­ç»ƒä»é«˜ç»´åº¦çœ‹å¯ä»¥åˆ†ä¸ºä¸¤éƒ¨ï¼šé¢„è®­ç»ƒï¼ˆpre-trainingï¼‰å’Œåè®­ç»ƒï¼ˆpost-trainingï¼‰ã€‚
é¢„è®­ç»ƒå°†ä»äº’è”ç½‘ä¸Šé‡‡é›†åˆ°çš„è¶…å¤§é‡è¯­æ–™è¿›è¡Œå‹ç¼©ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªå¤§è„‘çš„â€œZipæ–‡ä»¶â€ï¼ˆğŸ™‚ï¼‰ã€‚å½“ç„¶ï¼Œå®ƒå®è´¨ä¸Šæ˜¯ä¸€ç§æ¦‚ç‡æ€§çš„çš„å‹ç¼©ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½è§£å‹è¿™ä¸ªâ€œZipæ–‡ä»¶â€ï¼Œä¹Ÿæ— æ³•å®è´¨çš„ä»å‹ç¼©æ–‡ä»¶ä¸­æå–ä»»ä½•ä¿¡æ¯ï¼Œå› ä¸ºæ•´ä¸ªäº’è”ç½‘ä¸Šçš„ä¿¡æ¯å®åœ¨æ˜¯å¤ªå¤šäº†ã€‚è¿™ä¸ªâ€œZipæ–‡ä»¶â€æ‰€ä»£è¡¨çš„ç¥ç»ç½‘ç»œåªæ˜¯é€šè¿‡å­¦ä¹ è¾“å…¥çš„ä¿¡æ¯æ¥è¿›è¡Œå›ç­”ï¼šåŸºäºæˆ‘å½“å‰å­¦ä¹ åˆ°çš„å‚æ•°ï¼Œç»™å®šå½“å‰çš„ä¸Šä¸‹æ–‡çª—å£ï¼Œä¸‹ä¸€ä¸ªTokenä¼šæ˜¯ä»€ä¹ˆã€‚æŠ½è±¡åœ°è¯´ï¼Œé€šè¿‡è¿™æ ·çš„å­¦ä¹ ï¼Œæ¨¡å‹èƒ½å¤Ÿå­¦ä¹ åˆ°è¯­æ–™é‡Œé¢æ‰€æºå¸¦çš„çŸ¥è¯†ï¼Œè¿™ä¾¿æ˜¯æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„å¤§æ¨¡å‹çš„èƒ½åŠ›æ¶Œç°ï¼ˆ&lt;a href="https://arxiv.org/abs/2206.07682"&gt;Wei et al., 2022&lt;/a&gt;ï¼‰ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦æ¨¡å‹èƒ½å­¦ä¹ åˆ°æ›´å¤šä¸œè¥¿ï¼Œèƒ½è®°å½•çš„ä¸Šä¸‹æ–‡è¶Šå¤šï¼Œé‚£ä¹ˆæ¨¡å‹æ‰€æºå¸¦çš„å‚æ•°è¶Šå¤šï¼Œæ‰€éœ€è¦çš„è¯­æ–™åº“å°±è¶Šå¤§ã€‚ä¸€äº›æƒŠäººçš„ç»Ÿè®¡æ•°æ®è¡¨æ˜ï¼Œè¿™ä¸€æ­¥éª¤å¯èƒ½è¦èŠ±è´¹$10M+ï¼Œä¸‰ä¸ªæœˆæ—¶é—´ï¼Œ1000+ GPUã€‚é€šå¸¸æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ¨¡å‹éƒ½ä¼šæ ‡è¯†å…¶è®­ç»ƒæ•°æ®æˆªæ­¢æ—¥æœŸï¼Œä¸”é€šå¸¸éƒ½åœ¨å‡ ä¸ªæœˆä¹‹å‰ã€‚
åè®­ç»ƒåˆ™æ˜¯åŸºäºé¢„è®­ç»ƒçš„æ¨¡å‹è¿›è¡Œâ€œå¾®è°ƒâ€ã€‚å› ä¸ºæˆ‘ä»¬å¹¶ä¸æ˜¯æƒ³è¦æ¨¡å‹è¾“å‡ºè®­ç»ƒæ•°æ®ä¸­çš„å†…å®¹ï¼Œè€Œæ˜¯ä¸ºå…¶æ³¨å…¥ä¸€ä¸ªçµé­‚ã€‚å¦‚ChatGPTå°±æ˜¯åŸºäºæŸä¸ªç‰ˆæœ¬çš„GPTæ¨¡å‹è¿›è¡Œå¾®è°ƒï¼Œè®©ä»–èƒ½å¤Ÿä»¥AIåŠ©æ‰‹çš„èº«ä»½ï¼Œç¤¼è²Œå’Œå®‰å…¨åœ°ä¸ç”¨æˆ·è¿›è¡Œå¯¹è¯ã€‚åŒç†ï¼Œå…¶ä»–çš„å¼€å‘è€…ä¹Ÿå¯ä»¥åŸºäºæŸä¸ªé¢„è®­ç»ƒæ¨¡å‹è¿›è¡Œå¾®è°ƒï¼Œä½¿å…¶å¢åŠ æŸäº›æ–¹é¢çš„çŸ¥è¯†æˆ–è€…åœ¨ç‰¹å®šçš„ä»»åŠ¡ä¸­è¡¨ç°æ›´å¥½ã€‚åè®­ç»ƒçš„æ–¹æ³•ä¸»è¦åŒ…æ‹¬SFTï¼ŒRLHFï¼ŒåŸºäºå¯¹è¯çš„å¼ºåŒ–å­¦ä¹ ç­‰ã€‚ &lt;/p&gt;
&lt;p&gt;&lt;code&gt;13:27 - 18:00&lt;/code&gt; å‡ ä¸ªåŸºç¡€çš„é—®ç­”&lt;/p&gt;
&lt;p&gt;&lt;code&gt;18:00 - 22:54&lt;/code&gt; ä¸åŒçš„æ¨¡å‹ï¼Œä¸åŒçš„ä»·æ ¼ï¼Œä¹Ÿå¸¦æ¥äº†ä¸åŒçš„è¡¨ç°ï¼ŒåŸºäºä½ è‡ªå·±çš„åˆ¤æ–­ï¼ˆ&lt;span title="ä½ çŸ¥é“çš„å¤ªå¤šäº†" class="heimu"&gt;é’±åŒ…æ·±åº¦&lt;/span&gt;ï¼‰è¿›è¡Œé€‰æ‹©ã€‚&lt;/p&gt;
&lt;h2&gt;æ€ç»´é“¾æ¨¡å‹ Thinking Models&lt;/h2&gt;
&lt;p&gt;åœ¨å½“å‰æœ€æ–°çš„æ¨¡å‹ä¸­ï¼Œæ€ç»´é“¾çš„æŠ€æœ¯è¢«å¹¿æ³›åº”ç”¨ã€‚é€šè¿‡åè®­ç»ƒçš„å¼ºåŒ–å­¦ä¹ ï¼ˆReinforcement Learningï¼‰ï¼Œæ¨¡å‹éœ€è¦ç»ƒä¹ ä¸€äº›å·²ç»å®šä¹‰çš„é—®é¢˜ã€‚ä¸€ä¸ªç”ŸåŠ¨çš„ç±»æ¯”å°±æ˜¯ä¸€ä¸ªå­¦ç”Ÿå­¦æ•°å­¦çš„æ—¶å€™åšä¸€äº›ä¹ é¢˜é›†ä¹‹åï¼Œå†æ ¹æ ‡å‡†ç­”æ¡ˆè¿›è¡Œå¯¹æ¯” -- è¿™æ ·å­¦ç”Ÿå°±èƒ½çŸ¥é“ä¸€ä¸ªæ ‡å‡†çš„å›ç­”ï¼Œå¹¶åœ¨ä¹‹åé‡åˆ°ç±»ä¼¼çš„é¢˜ç›®ä¸­èƒ½å¤Ÿå¤ç”¨å…¶ä¸­çš„æ–¹æ³•ã€‚ä½¿ç”¨è¿™ç§æ–¹æ³•çš„åŸå› ï¼Œé¦–å…ˆå½“ç„¶æ˜¯æ¨¡æ‹Ÿäººç±»å­¦ä¹ çš„è¿‡ç¨‹ï¼Œå…¶æ¬¡æ˜¯å› ä¸ºè§£å†³é—®é¢˜çš„æ€è€ƒè¿‡ç¨‹å¤ªè¿‡å¤æ‚å’Œå¤šå˜ï¼Œå¯¹äºäººç±»æ ‡æ³¨å‘˜æ¥è¯´éš¾ä»¥è¿›è¡Œæè¿°ï¼Œè¿˜ä¸å¦‚è®©æ¨¡å‹ä»å®é™…çš„é¢˜ç›®å’Œç­”æ¡ˆä¸­è¿›è¡Œå­¦ä¹ ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ¨¡å‹èƒ½å¤Ÿä¼˜åŒ–è‡ªå·±çš„æ€è€ƒæ¨¡å¼ã€‚è¿™ä¹Ÿæ˜¯è¿‡å»ä¸€å¹´ä¸šç•Œçš„ä¸»è¦ç ”ç©¶æ–¹å‘ã€‚åœ¨æ–°å‹çš„æ¨¡å‹ä¸­ï¼Œè¿™ç§æ€è€ƒè¿‡ç¨‹è¢«è®°å½•åœ¨ä¸Šä¸‹æ–‡çª—å£ä¸­ï¼ˆğŸ¤”ï¸ğŸ’­ï¼‰ã€‚æ¯”å¦‚ï¼ŒDeepSeekå°±èƒ½æ˜¾ç¤ºè®°å½•è‡ªå·±çš„æ€è€ƒè¿‡ç¨‹(&lt;a href="https://arxiv.org/abs/2501.12948"&gt;DeepSeek-AI, 2025&lt;/a&gt;)ã€‚&lt;/p&gt;
&lt;p&gt;25:33 - 31:02 è§£å†³ä»£ç é—®é¢˜çš„ä¾‹å­ï¼šæ— æ€ç»´é“¾ v.s æœ‰æ€ç»´é“¾ï¼›åœ¨å„ç§AIåº”ç”¨ä¸­ï¼Œé€šå¸¸ä¼šæœ‰è¿™ä¸ªé€‰é¡¹ï¼Œä½ å¯ä»¥æ ¹æ®åº”ç”¨åœºæ™¯è¿›è¡Œé€‰æ‹©ã€‚&lt;/p&gt;
&lt;h2&gt;ä½¿ç”¨å·¥å…· Using Tools&lt;/h2&gt;
&lt;p&gt;äººç±»ä¼šä½¿ç”¨å·¥å…·ï¼Œæ¨¡å‹ä¹Ÿåº”è¯¥èƒ½å¤Ÿä½¿ç”¨ã€‚è®©æ¨¡å‹ä½¿ç”¨å·¥å…·çš„æ–¹æ³•æœ‰å¾ˆå¤šã€‚ä¸šç•Œä½¿ç”¨çš„æ–¹æ³•é€šå¸¸æ˜¯è®©æ¨¡å‹è‡ªä¸»å†³å®šã€‚æœ€å…ˆè¢«å¼•å…¥æ¨¡å‹çš„å·¥å…·æ˜¯æœç´¢å¼•æ“ã€‚æˆ‘ä»¬ä»¥æ­¤ä¸ºä¾‹æ¥è®²è§£ã€‚å½“æ¨¡å‹è¿”å›æŸç§ç‰¹æ®Šçš„Tokenï¼Œå°±ä»£è¡¨æ¨¡å‹æƒ³è¦ä½¿ç”¨ç½‘ç»œæœç´¢ï¼Œåº”ç”¨å±‚çš„ä»£ç å°†ä¼šä½¿ç”¨æ¨¡å‹ç”Ÿæˆçš„æŸ¥è¯¢è¿›è¡Œæœç´¢ï¼Œå¹¶å°†ç»“æœè¿”å›è¿›ä¸Šä¸‹æ–‡é‡Œ -- è¿™ä¸ªè¿‡ç¨‹å¯¹äºç”¨æˆ·æ˜¯ä¸å¯è§çš„ã€‚ä½¿ç”¨æœç´¢å¼•æ“èƒ½å¤Ÿç›¸å½“ç¨‹åº¦çš„æå‡æ¨¡å‹çš„å‡†ç¡®ç‡ï¼Œå°¤å…¶æ˜¯åœ¨ä¸€äº›è¾ƒä¸ºè¿‘æœŸçš„é—®é¢˜ä¸Šï¼Œæ¨¡å‹å¯èƒ½æ²¡æœ‰æ­¤è®­ç»ƒæ•°æ®ï¼Œä½†æ˜¯èƒ½å¤Ÿé€šè¿‡æœç´¢å¼•æ“çš„ç»“æœåšå‡ºæ›´å‡†ç¡®çš„åˆ¤æ–­ã€‚æœ‰æ—¶AIåº”ç”¨å¯ä»¥è‡ªå·±å†³å®šï¼Œæœ‰æ—¶éœ€è¦æŒ‡å®šä½¿ç”¨æœç´¢å·¥å…·æ‰èƒ½æ¿€æ´»ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;39:17 - 41:50&lt;/code&gt; Perplexity çš„ æœç´¢åŠŸèƒ½æ¼”ç¤º&lt;/p&gt;
&lt;p&gt;æ·±åº¦ç ”ç©¶ï¼ˆDeep Researchï¼‰æ˜¯ä¸€é¡¹éå¸¸æœ‰ç”¨çš„è¿›é˜¶åŠŸèƒ½ã€‚æ¨¡å‹ä¼šç»“åˆæ€ç»´é“¾ä¸æœç´¢å¼•æ“ï¼Œè¿›è¡Œé•¿è¾¾æ•°åˆ†é’Ÿçš„æ€è€ƒï¼Œå¹¶ç»™å‡ºä¸€ä»½è¯¦ç»†çš„ç ”ç©¶æŠ¥å‘Šã€‚å½“ç„¶ï¼Œè¯¦ç»†å¹¶ä¸ä»£è¡¨å®ƒæ°¸è¿œæ˜¯æ­£ç¡®çš„ã€‚Karpathyå±•ç¤ºäº†ä¸€ä¸ªå…³äºç¾å›½AIç ”ç©¶å®¤çš„ä¾‹å­ï¼Œå…¶ä¸­AIé”™è¯¯çš„åˆ—ä¸¾äº†Hugging Faceå’Œ ElutherAIçš„æ•°æ®ï¼ˆäºŒè€…éƒ½ä¸æ˜¯æ¥è‡ªç¾å›½ï¼‰ï¼Œä¸”æ•°æ®ä¹Ÿä¸ä¸€å®šå®Œå…¨å‡†ç¡®ã€‚&lt;/p&gt;
&lt;p&gt;ç›¸è¾ƒäºäº’è”ç½‘æœç´¢ï¼Œæ–‡ä»¶ä¸Šä¼ èƒ½å¤Ÿæ›´å‡†ç¡®æä¾›æœ‰ç”¨çš„çŸ¥è¯†ã€‚åœ¨é˜…è¯»ä¸€äº›ä½ ä¸ç†Ÿæ‚‰çš„é¢†åŸŸæˆ–è€…è¯­è¨€çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨AIå¸®åŠ©ä½ æ€»ç»“å’Œè§£ç­”ç–‘é—®ã€‚&lt;/p&gt;
&lt;p&gt;ä»£ç è§£é‡Šå™¨ä¹Ÿæ˜¯ä¸€é¡¹éå¸¸æœ‰ç”¨çš„åŠŸèƒ½ã€‚ChatGPTèƒ½å¤Ÿè°ƒç”¨Pythonæ¥æ‰§è¡Œæ€è€ƒä¸­çš„ä»£ç ï¼Œè¿™æ ·å°±èƒ½å¤Ÿè¿›è¡Œä¸€äº›æ›´ä¸ºå¤æ‚çš„è¿ç®—ã€‚æ­¤é¡¹åŠŸèƒ½é€šè¿‡ä¹ é¢˜é›†çš„æ–¹å¼è®©GPTæ¨¡å‹è¿›è¡Œå­¦ä¹ ï¼Œè¿›è€Œèƒ½èƒ½å¤Ÿè‡ªè¡Œå†³å®šåœ¨å“ªä¸ªæ—¶å€™ä½¿ç”¨ä»£ç è§£é‡Šå™¨æ¥è¿›è¡Œè¿ç®—ã€‚ä½†æ˜¯è¿™ä¸ªåŠŸèƒ½ä¸æ˜¯æ¯ä¸ªAIåº”ç”¨éƒ½æœ‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;1:04:40 - 1:09:00&lt;/code&gt; ç”¨ChatGPTåšæ•°æ®åˆ†æã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;1:09:10 - 1:14:03&lt;/code&gt; Claude èƒ½å¤Ÿç”Ÿæˆä¸€äº› Artifactï¼Œå¹¶åœ¨å•ç‹¬çš„çª—å£æ‰“å¼€ã€‚è¿™åŒ…æ‹¬ä¸€äº›Markdownæ–‡æ¡£ï¼Œä»£ç ç‰‡æ®µï¼ŒHTMLç½‘é¡µï¼Œå’Œå•ä¸ªçš„Reactåº”ç”¨ã€‚ Claudeç”Ÿæˆçš„çŸ¥è¯†é—®ç­”é—ªå¡çš„ä¾‹å­å’Œåˆ¶ä½œæ¦‚å¿µæµç¨‹å›¾çš„ä¾‹å­ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶ChatGPTå’ŒClaudeéƒ½æˆ–å¤šæˆ–å°‘èƒ½ä½¿ç”¨ä»£ç ä½œä¸ºå·¥å…·ï¼Œä½†æ˜¯å¤åˆ¶ç²˜è´´æ¥å›å¯¹è¯å®åœ¨æ˜¯å¤ªéº»çƒ¦äº†ã€‚ç›¸æ¯”è¾ƒä¹‹ä¸‹ï¼ŒCursorèƒ½å¤Ÿä¸æœ¬åœ°ä»£ç æ–‡ä»¶è¿›è¡Œäº¤äº’ï¼Œè¿™å¯¹äºå¼€å‘è€…æ¥è¯´æ›´åŠ æ–¹ä¾¿å’Œæœ‰ç”¨ã€‚Cursorä½¿ç”¨Claudeçš„APIæ¥ä½œä¸ºæ¨ç†å¼•æ“ã€‚åœ¨Cursor Composerçš„äº¤äº’ä¸­ï¼Œç”¨æˆ·åªè¦è¾“å…¥è‡ªç„¶è¯­è¨€çš„æŒ‡ä»¤ï¼ŒCursorå°±ä¼šç”Ÿæˆå¯¹åº”çš„ä»£ç å‘½ä»¤å¹¶æ‰§è¡Œã€‚Karpathy å±•ç¤ºäº†ä¸€ä¸ªç”¨Cursorå¼€å‘çš„ç»å…¸æ¸¸æˆ tic-tac-toe çš„ç½‘é¡µå®ç°çš„ä¾‹å­ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä»–åªç”¨äº†æ•°è¡Œè‡ªç„¶è¯­è¨€çš„å‘½ä»¤ï¼Œè®©Cursorç”Ÿæˆæ–°çš„Reacté¡¹ç›®ï¼Œæ¸…ç†æ¨¡ç‰ˆä»£ç ï¼Œå¹¶å¼€å‘åº”ç”¨ã€‚Karpathyç§°ä¹‹ä¸ºVibe Codingï¼šä½ ç»™AIä¸€äº›æŒ‡ä»¤ï¼Œç„¶åç¿˜ç€äºŒéƒè…¿ç­‰å°±è¡Œäº†ã€‚&lt;/p&gt;
&lt;figure style="display: flex; justify-content: space-between;"&gt;
  &lt;div style="width: 48%;"&gt;
    &lt;img src="https://mestrace.github.io/images/24/speech_chatgpt.jpeg" alt="ChatGPT Mobile App Text-to-Speech and Voice Mode" style="width: 100%; height: auto;"&gt;
    &lt;figcaption&gt;ChatGPTæ”¯æŒè¯­éŸ³è¾“å…¥å’Œè¯­éŸ³æ¨¡å¼&lt;/figcaption&gt;
  &lt;/div&gt;
  &lt;div style="width: 48%;"&gt;
    &lt;img src="https://mestrace.github.io/images/24/speech_grok.jpeg" alt="Grok Mobile App Voice Mode and Conversation Style Choices" style="width: 100%; height: auto;"&gt;
    &lt;figcaption&gt;Grokæ”¯æŒè¯­éŸ³æ¨¡å¼ï¼Œè¿˜å¯ä»¥é€‰æ‹©å¯¹è¯ä¸ªæ€§&lt;/figcaption&gt;
  &lt;/div&gt;
&lt;/figure&gt;

&lt;h2&gt;æ¨¡æ€ Modality&lt;/h2&gt;
&lt;p&gt;è¯­è¨€æ¨¡å‹çš„åˆè¡·æ˜¯é€šè¿‡æ–‡å­—æ¥è¿›è¡Œäº¤äº’ï¼Œä½†æ˜¯äººç±»çš„è‡ªç„¶äº¤äº’ä¸­ï¼Œè¿˜æœ‰è¯­éŸ³ï¼Œå›¾åƒï¼Œç”šè‡³è§†é¢‘ç­‰å¤šç§å½¢å¼ -- æˆ‘ä»¬ç§°ä¹‹ä¸ºæ¨¡æ€ï¼ˆModalityï¼‰ã€‚å› æ­¤ï¼Œå¯¹äºå¤§è¯­è¨€æ¨¡å‹æ¥è¯´ï¼Œèƒ½å¤Ÿè¿›è¡Œå¤šæ¨¡æ€çš„äº¤äº’ï¼ˆè¾“å…¥å’Œè¾“å‡ºï¼‰ã€‚åœ¨æ‰‹æœºä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ç³»ç»Ÿè¯­éŸ³è¯†åˆ«æ–‡å­—åŠŸèƒ½ã€‚è¯­éŸ³è¯†åˆ«åœ¨ç‰¹å®šçš„åç§°ä¸Šå¯èƒ½è¯†åˆ«ä¸å‡†ç¡®ï¼ŒæŸäº›æ—¶å€™æˆ‘ä»¬è¿˜æ˜¯è¦æ‰“å­—çš„æ–¹å¼è¾“å…¥ã€‚ä¸Šè¿°è¿™äº›è¾“å…¥æ–¹å¼é€šå¸¸éƒ½æ˜¯ä½¿ç”¨å¤–ç½®çš„æ–‡å­—å’Œè¯­éŸ³è½¬æ¢ç³»ç»Ÿã€‚å¦‚æœå¤§é¢„è¨€æ¨¡å‹æœ¬èº«ä¹Ÿæœ‰èƒ½å¤Ÿç›´æ¥æ¥å—è¯­éŸ³å’Œè§†é¢‘çš„æ¨¡å¼ï¼Œé‚£ä¹ˆæ•´ä¸ªé€šè®¯çš„é“¾è·¯ä¼šæ›´åŠ æµç•…ã€‚å¯¹äºå¤§è¯­è¨€æ¨¡å‹æ¥è¯´ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å°†æ–‡å­—åŠ å·¥æˆTokençš„æ¦‚å¿µï¼Œå°†éŸ³é¢‘åŠ å·¥æˆTokenæ¥è®­ç»ƒæ¨¡å‹è¿›è¡Œè¾“å…¥å’Œè¾“å‡ºã€‚æ¥ç€ï¼ŒKarpathyå±•ç¤ºäº†æ›´å¤šè®©ChatGPTè¯´è¯çš„ä¾‹å­ï¼Œæ¯”å¦‚ç”¨Yodaå’Œæµ·ç›—çš„å£°éŸ³è¯´è¯ã€‚ä½†æ˜¯ï¼Œå¯èƒ½æ˜¯ç”±äºè¯­æ–™çš„åŸå› ï¼Œåœ¨è¯­éŸ³æ¨¡å¼ä¸‹ï¼ŒAIä¼šæœ‰æ›´é«˜çš„å‡ ç‡æ‹’ç»å›ç­”ã€‚ä¸Šé¢çš„æˆªå›¾ä¸­å±•ç¤ºäº† ChatGPT çš„(1)è¯­éŸ³è¾“å…¥å’Œ(2)è¯­éŸ³æ¨¡å¼ï¼Œä»¥åŠGrokçš„(2)è¯­éŸ³æ¨¡å¼å’Œ(3)è¯­éŸ³æ¨¡å¼ä¸‹çš„å¯¹è¯ä¸ªæ€§é€‰é¡¹ã€‚&lt;/p&gt;
&lt;figure align="center"&gt;
  &lt;img src="https://mestrace.github.io/images/24/notebooklm.png" /&gt;
  &lt;figcaption&gt;NotebookLMçš„UI&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;é™¤äº†ä¼ ç»Ÿçš„å¯¹è¯æ¡†æ¨¡å¼ï¼Œä¹Ÿæœ‰å…¶ä»–çš„äº¤äº’æ¨¡å¼ã€‚æ¯”å¦‚Googleçš„&lt;a href="https://notebooklm.google"&gt;NotebookLM&lt;/a&gt;ã€‚æ•´ä¸ªUIæ¡†æ¶åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šå·¦è¾¹æ˜¯ç”¨æˆ·æ·»åŠ çš„èµ„æ–™åº“ï¼Œä¸­é—´æ˜¯å¤§è¯­è¨€æ¨¡å‹çš„å¯¹è¯çª—å£ï¼Œè€Œæœ€å³è¾¹åˆè¿›ä¸€æ­¥åˆ†ä¸ºéŸ³é¢‘æ¦‚è§ˆå’Œç¬”è®°ã€‚éŸ³é¢‘æ¦‚è§ˆå¯ä»¥ç”Ÿæˆä¸€ä¸ªPodcastè®¨è®ºæ¥å¯¹äºä¸Šä¼ çš„æ–‡æœ¬è¿›è¡Œæ¦‚è¿°ï¼Œä¸”ç”¨æˆ·å¯ä»¥ç»™äºˆç‰¹å®šçš„æŒ‡ç¤ºç”Ÿæˆä¸åŒç±»å‹çš„Podcastè®¨è®ºï¼›æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªäº¤äº’æ¨¡å¼ï¼Œç”¨æˆ·å¯ä»¥å‚ä¸è¿›æ¥ï¼Œéšæ—¶æ‰“æ–­Podcastå¹¶æé—®ã€‚ç¬”è®°åˆ™å¯ä»¥åˆ†ä¸ºç”¨æˆ·è‡ªå·±ç”Ÿæˆçš„ç¬”è®°å’Œè‡ªåŠ¨ç”Ÿæˆçš„ç¬”è®°ã€‚&lt;/p&gt;
&lt;p&gt;å›¾ç‰‡ä¹Ÿæ˜¯æ¨¡æ€çš„ä¸€ç§ã€‚æˆ‘ä»¬å¯ä»¥ä»¥åŒæ ·çš„æ–¹å¼å°†å›¾ç‰‡TokenåŒ–ï¼Œå°†å…¶åˆ‡åˆ†æˆå°å—ï¼Œä½¿å¾—æ¨¡å‹å¯ä»¥è¾“å…¥å’Œè¾“å‡ºå›¾ç‰‡ã€‚å¯¹äºå¤§è¯­è¨€æ¨¡å‹æ¥è¯´ï¼Œæ¨¡å‹æœ¬èº«ç”šè‡³ä¸éœ€è¦çŸ¥é“è¾“å…¥çš„Tokenæ˜¯æ–‡å­—ï¼Œå›¾ç‰‡ï¼Œè¿˜æ˜¯å£°éŸ³ï¼Œå®ƒå°±èƒ½å­¦ä¹ å…¶ä¸­çš„ç»Ÿè®¡åˆ†å¸ƒï¼Œå¹¶ç”Ÿæˆï¼ˆé¢„æµ‹ï¼‰æ¥ä¸‹æ¥çš„Tokenã€‚æŒç®¡è¾“å…¥å’Œè¾“å‡ºçš„ç¼–ç å™¨ï¼ˆEncoderï¼‰å’Œè§£ç å™¨ï¼ˆDecoderï¼‰åˆ™è´Ÿè´£å°†å¤šæ¨¡æ€çš„è¾“å‡ºå’Œè¾“å‡ºè¿›è¡Œè½¬æ¢ã€‚Karpathyåˆ†äº«äº†é£Ÿå“è¥å…»æˆåˆ†è¡¨ï¼Œä½“æ£€æŠ¥å‘Šåˆ†æï¼Œæ•°å­¦å…¬å¼è½¬åŒ–Latexç­‰åº”ç”¨åœºæ™¯çš„ä¾‹å­ã€‚æ­¤å¤–ï¼ŒAIä¹Ÿå¯ä»¥ç”Ÿæˆå›¾ç‰‡ï¼Œå¦‚ OpenAI çš„DALL-Eï¼Œè¿˜æœ‰&lt;a href="https://ideogram.ai/t/explore"&gt;Ideogram&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;1:49:21 - 1:52:25&lt;/code&gt; å¤§è¯­è¨€æ¨¡å‹ä¹Ÿèƒ½å¤Ÿçœ‹è§†é¢‘ã€‚å¯ä»¥é€šè¿‡æ‘„åƒå¤´Feedå’Œè¯­éŸ³è·Ÿå¤§é¢„è¨€æ¨¡å‹å¯¹è¯ï¼Œè¯†åˆ«ç”Ÿæ´»ä¸­çš„ç‰©ä»¶ç­‰ã€‚&lt;/p&gt;
&lt;blockquote class="twitter-tweet"&gt;&lt;p lang="en" dir="ltr"&gt;ğŸ’„AI Video Model Comparison: Text to Video&lt;br&gt;&lt;br&gt;10 Models included:&lt;br&gt;&lt;br&gt;â€¢ Google Veo2&lt;br&gt;â€¢ Adobe Firefly Video&lt;br&gt;â€¢ Hunyuan Video&lt;br&gt;â€¢ Pika 2.1&lt;br&gt;â€¢ Wan-2.1&lt;br&gt;â€¢ Runway Gen-3&lt;br&gt;â€¢ Kling AI 1.6&lt;br&gt;â€¢ Luma Ray2&lt;br&gt;â€¢ Hailuo MiniMax&lt;br&gt;â€¢ Sora (not on grid, but in the full video)&lt;br&gt;&lt;br&gt;I used the same prompt onâ€¦ &lt;a href="https://t.co/D3i7yHokXV"&gt;pic.twitter.com/D3i7yHokXV&lt;/a&gt;&lt;/p&gt;&amp;mdash; Heather Cooper (@HBCoop_) &lt;a href="https://twitter.com/HBCoop_/status/1896599159114788930?ref_src=twsrc%5Etfw"&gt;March 3, 2025&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src="https://platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;

&lt;p&gt;&lt;code&gt;1:52:43 - 1:53:28&lt;/code&gt; Cooperåœ¨æ¨ç‰¹ä¸Šå‘å¸ƒçš„è§†é¢‘ç”Ÿæˆæ¨¡å‹çš„å¯¹æ¯”ã€‚&lt;/p&gt;
&lt;h2&gt;é™„åŠ åŠŸèƒ½ Additional Features&lt;/h2&gt;
&lt;p&gt;é™¤äº†ä¸åŒçš„æ¨¡æ€ç”Ÿæˆä»¥å¤–ï¼ŒAIå·¥å…·ä»¬ä¹Ÿæä¾›äº†é™„åŠ åŠŸèƒ½ã€‚è¿˜æ˜¯ä»¥ChatGPTä¸ºä¾‹å­ï¼ŒæŒä¹…è®°å¿†ï¼ˆMemoryï¼‰åŠŸèƒ½èƒ½ä¿å­˜æŸé¡¹å¯¹è¯ä¸­çš„çŸ¥è¯†ç‚¹ï¼Œå¹¶é™„åŠ ç»™åç»­çš„æ–°å¯¹è¯ä¸­ã€‚è¿™é¡¹åŠŸèƒ½æ˜¯è‡ªåŠ¨å¼€å¯çš„ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨è§¦å‘ã€‚æœ¬è´¨ä¸Šï¼Œæ­¤ç±»å‹çš„åŠŸèƒ½å°†æŸäº›å¯¹è¯å†…å®¹è®°å½•åˆ°ä¸ç”¨æˆ·å…³è”çš„æ•°æ®åº“ä¸­ï¼Œå¹¶åœ¨åç»­ç”¨æˆ·å¼€å¯æ–°å¯¹è¯æ—¶å°†ç›¸å…³çš„æ•°æ®æ”¾åˆ°ä¸Šä¸‹æ–‡çª—å£é‡Œæ¥ï¼Œè¿™æ ·æ¨¡å‹å°±èƒ½ç›´æ¥è¿›è¡Œå›ç­”ï¼Œä¹Ÿå¯ä»¥è¡¨ç°ä¸ºé’ˆå¯¹å„ä¸ªç”¨æˆ·çš„å®šåˆ¶åŒ–å›ç­”ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;1:54:30 - 1:56:45&lt;/code&gt; æŒ‡å®šChatGPTä¿å­˜äº†ä¸€ä¸ªè®°å¿†ã€‚&lt;/p&gt;
&lt;figure align="center"&gt;
  &lt;img src="https://mestrace.github.io/images/24/custom_instruction_chatgpt.png" /&gt;
  &lt;figcaption&gt;ChatGPTè‡ªå®šä¹‰ç³»ç»ŸæŒ‡ä»¤&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;è‡ªå®šä¹‰ç³»ç»ŸæŒ‡ä»¤æˆ–è€…å®¢åˆ¶åŒ–æŒ‡ä»¤ï¼ˆCustom Instructionï¼‰ä¹Ÿæ˜¯ä¸€é¡¹é™„åŠ åŠŸèƒ½ã€‚ChatGPTèƒ½å¤Ÿè®©ç”¨æˆ·é¢„å…ˆå¡«å…¥ä¸€äº›åŠŸèƒ½ï¼Œå¦‚ç”¨æˆ·å§“åï¼ŒèŒä¸šï¼Œç‰¹æ€§ï¼Œå…¶ä»–é™„åŠ ä¿¡æ¯ç­‰ï¼Œå¹¶åœ¨å¯¹è¯å¼€å§‹æ—¶è‡ªåŠ¨é™„åŠ è¿™äº›æŒ‡ä»¤ã€‚&lt;/p&gt;
&lt;p&gt;è‡ªå®šä¹‰åŠ©æ‰‹ï¼ˆCustom GPTï¼‰æ˜¯ä¸€ç±»å¼€å‘å¥½çš„ä¸“æ³¨äºä¸€ç±»ä»»åŠ¡çš„GPTåŠ©æ‰‹ã€‚ChatGPTæä¾›äº†ä¸€ä¸ªå¸‚åœºé€‰é¡¹ï¼Œè®©å¤§å®¶èƒ½å¤Ÿè¿›è¡Œæœç´¢å’Œé€‰æ‹©ã€‚ä¹Ÿæœ‰è‡ªå·±å®šä¹‰æŒ‡ä»¤çš„é€‰é¡¹ã€‚ä¸€ä¸ªé‡è¦çš„æå‡æ•ˆæœçš„æ–¹å¼æ˜¯åœ¨æŒ‡ä»¤ä¸­æä¾›ä¸€äº›è¾“å‡ºçš„ä¾‹å­ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;1:58:51 - 2:04:34&lt;/code&gt; éŸ©è¯­è¯æ±‡ç¿»è¯‘å™¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;2:04:57 - 2:05:50&lt;/code&gt; å›¾ç‰‡OCRç¿»è¯‘éŸ©è¯­æ­Œè¯ã€‚&lt;/p&gt;
&lt;p&gt;æ€»çš„æ¥è¯´ï¼Œåœ¨OpenAIçš„å¸¦é¢†ä¸‹ï¼Œå„ç§å„æ ·çš„AIå·¥å…·å±‚å‡ºä¸ç©·ï¼Œå·²ç»å½¢æˆäº†ä¸€ä¸ªå¼ºå¤§çš„ç”Ÿæ€ç³»ç»Ÿã€‚å¯¹äºæˆ‘ä»¬ç”¨æˆ·æ¥è¯´ï¼Œè™½ç„¶ä¸éœ€è¦çŸ¥é“é‚£ä¹ˆå¤šæŠ€æœ¯ç»†èŠ‚ï¼Œä½†æ˜¯èƒ½å¤Ÿè¯¦å°½çš„äº†è§£å„ç§AIå·¥å…·/åŠ©æ‰‹çš„ä¼˜ç¼ºç‚¹ï¼Œä¾§é‡ï¼Œå’Œé™„åŠ åŠŸèƒ½ï¼Œèƒ½å¤Ÿæ›´å¥½åœ°å¸®åŠ©æˆ‘ä»¬æ•´ç†ï¼ŒæŸ¥æ‰¾å’Œåˆ›é€ çŸ¥è¯†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€äº›é”è¯„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ChatGPTï¼šå…ˆè¡Œè€…ï¼Œè¡Œä¸šæ ‡æ†ï¼ŒåŠŸèƒ½ä¸°å¯Œ&lt;/li&gt;
&lt;li&gt;Claudeï¼šåæ¥å±…ä¸Šï¼ŒArtifact&lt;/li&gt;
&lt;li&gt;Perplexityï¼šèƒ½æœç´¢&lt;/li&gt;
&lt;li&gt;Grokï¼šæœ€å£æ— é®æ‹¦&lt;/li&gt;
&lt;/ul&gt;</content><category term="Computer Science"></category></entry><entry><title>ä¸€äº›æœ‰è¶£çš„HTTPSå’ŒTCPé¢è¯•é¢˜</title><link href="https://mestrace.github.io/posts/2024/Apr/22/interesting-interview-questions-about-tcp-and-http/" rel="alternate"></link><published>2024-04-22T20:00:00+08:00</published><updated>2024-04-22T20:00:00+08:00</updated><author><name>Mestrace</name></author><id>tag:mestrace.github.io,2024-04-22:/posts/2024/Apr/22/interesting-interview-questions-about-tcp-and-http/</id><summary type="html">&lt;p&gt;åˆ†äº«ä¸€äº›æœ‰è¶£çš„TCPå’ŒHTTPé¢è¯•é¢˜ï¼Œå¹¶ç»™å‡ºä¸€äº›è§£ç­”ã€‚&lt;/p&gt;</summary><content type="html">&lt;p&gt;ä»Šæ—¥åœ¨é—²æ¥æ— äº‹çš„æ—¶å€™ï¼Œåˆ·åˆ°äº†è¿™æ¡æ¨ç‰¹ï¼Œå…¶ä¸­æ¶‰åŠäº†ä¸€äº›å¸¸è§ä½†åˆå®¹æ˜“è®©äººçŠ¯è¿·ç³Šçš„é—®é¢˜ã€‚ç¬”è€…æƒ³ç€å¦‚æœè‡ªå·±åœ¨é¢è¯•ä¸­é‡åˆ°ç›¸å…³çš„é—®é¢˜ï¼Œå¯èƒ½ä¹Ÿä¸ä¸€å®šèƒ½å¤Ÿç­”ä¸Šæ¥ï¼Œå› æ­¤æœ¬ç¯‡æ–‡ç« å°†ç»“åˆç¬”è€…ä¹‹å‰åšçš„ä¸€äº›é¢è¯•å‡†å¤‡ï¼Œæ¥å›ç­”ä¸€ä¸‹è¿™äº›é—®é¢˜ã€‚å­¦è‰ºä¸ç²¾ï¼Œæœ›å„ä½è¯»è€…æ–§æ­£ã€‚&lt;/p&gt;
&lt;blockquote class="twitter-tweet" data-lang="en" data-theme="light"&gt;&lt;p lang="zh" dir="ltr"&gt;åˆ†äº«ä¸€ä¸‹æˆ‘é‡åˆ°çš„ç½‘ç»œé¢è¯•é¢˜ï¼š&lt;br&gt;1ã€Https å¦‚ä½•ä¿è¯æ•°æ®çš„å®‰å…¨&lt;br&gt;2ã€TCP å»ºç«‹è¿æ¥éœ€è¦3 æ¬¡æ¡æ‰‹ï¼Ÿä¸ºä»€ä¹ˆä¸æ˜¯ 2å’Œ4 &lt;br&gt;3ã€UDP éœ€è¦æ¡æ‰‹å—&lt;br&gt;4ã€TIME_WAIT çš„ä½œç”¨&lt;br&gt;5ã€TCPæ‹†åŒ…ç²˜åŒ…è¿™ç§è¯´æ³•å¯¹å—&lt;br&gt;6ã€TCPæ˜¯å¯é ä¼ è¾“å—ï¼Ÿå¦‚æœæ˜¯è¿˜éœ€è¦åœ¨ä¸šåŠ¡å±‚ä¿è¯å¹‚ç­‰å—&lt;br&gt;7ã€QQ ä½¿ç”¨çš„æ˜¯ TCP è¿˜æ˜¯ UDP &lt;br&gt;8ã€Linuxâ€¦&lt;/p&gt;&amp;mdash; Nextify (@nextify2024) &lt;a href="https://twitter.com/nextify2024/status/1782218309213315146?ref_src=twsrc%5Etfw"&gt;April 22, 2024&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src="https://platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;

&lt;h2&gt;1ã€HTTPS å¦‚ä½•ä¿è¯æ•°æ®çš„å®‰å…¨&lt;/h2&gt;
&lt;p&gt;HTTPSåœ¨åŸæœ‰çš„æ˜æ–‡HTTPåè®®ä¸Šé™„åŠ äº†ä¸€ä¸ªTLSåŠ å¯†å±‚æ¥ä¿è¯ä¼ è¾“å±‚çš„ä¿¡æ¯ä¸è¢«ä»»ä½•ä¸­é—´æ–¹çªƒå¬ã€‚&lt;/p&gt;
&lt;figure align="center"&gt;
  &lt;img src="https://cf-assets.www.cloudflare.com/slt3lc6tev37/5aYOr5erfyNBq20X5djTco/3c859532c91f25d961b2884bf521c1eb/tls-ssl-handshake.png"/&gt;
  &lt;figcaption&gt;Source: A10 Networks&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;åœ¨æ•´ä¸ªTLSçš„æ¡æ‰‹é˜¶æ®µï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯é€šè¿‡å¤šæ¬¡äº¤äº’æ¥ç¡®è®¤ä»¥ä¸‹ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åŒæ–¹ç¡®è®¤ä½¿ç”¨çš„TLSç‰ˆæœ¬ï¼Œå¦‚TLS 1.2, 1.3ã€‚&lt;/li&gt;
&lt;li&gt;åŒæ–¹é€‰æ‹©ä½¿ç”¨çš„åŠ å¯†æ¨¡å¼ï¼ŒåŒ…æ‹¬å¯¹åº”çš„å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†ç®—æ³•&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯é€šè¿‡æœåŠ¡ç«¯æä¾›çš„å…¬é’¥å’ŒæœåŠ¡å™¨æ•°å­—è¯ä¹¦æ¥ç¡®è®¤è‡ªå·±è¿æ¥çš„æ˜¯æ­£ç¡®çš„æœåŠ¡å™¨ã€‚&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯é€‰å®šä¼šè¯å¯†é’¥åï¼Œé€šè¿‡éå¯¹ç§°åŠ å¯†ç®—æ³•ä¼ è¾“ç»™æœåŠ¡ç«¯&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç›¸è¾ƒäºTLS 1.2ï¼ŒTLS 1.3 ä¸»è¦åšäº†ä»¥ä¸‹æ”¹è¿›ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ›´å¿«çš„æ¡æ‰‹è¿‡ç¨‹: TLS 1.3é€šè¿‡å‡å°‘æ¡æ‰‹è¿‡ç¨‹ä¸­çš„å¾€è¿”æ¬¡æ•°ï¼ŒåŠ å¿«äº†è¿æ¥å»ºç«‹çš„é€Ÿåº¦ï¼Œä»è€Œæé«˜äº†æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;æ›´å¼ºçš„åŠ å¯†ç®—æ³•: TLS 1.3ç§»é™¤äº†ä¸€äº›å®‰å…¨æ€§è¾ƒå¼±çš„åŠ å¯†ç®—æ³•ï¼Œåªæ”¯æŒæ›´å®‰å…¨çš„åŠ å¯†å¥—ä»¶ï¼Œå¦‚ChaCha20-Poly1305å’ŒAES-GCMã€‚&lt;/li&gt;
&lt;li&gt;å‡å°‘äº†åè®®æ¡æ‰‹è¿‡ç¨‹ä¸­çš„å»¶è¿Ÿ: TLS 1.3å‡å°‘äº†åè®®æ¡æ‰‹ä¸­çš„å¾€è¿”æ¬¡æ•°ï¼Œä»è€Œå‡å°‘äº†è¿æ¥å»ºç«‹çš„å»¶è¿Ÿã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;figure align="center"&gt;
  &lt;img src="https://www.a10networks.com/wp-content/uploads/differences-between-tls-1.2-and-tls-1.3-full-handshake.png"/&gt;
  &lt;figcaption&gt;Source: Cloudflare&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;å‚è€ƒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.cloudflare.com/zh-cn/learning/ssl/transport-layer-security-tls/"&gt;Cloudflare - ä»€ä¹ˆæ˜¯ TLSï¼ˆä¼ è¾“å±‚å®‰å…¨æ€§ï¼‰ï¼Ÿ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.cloudflare.com/learning/ssl/what-happens-in-a-tls-handshake/"&gt;Cloudflare - What happens in a TLS handshake? | SSL handshake&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://blog.cloudflare.com/keyless-ssl-the-nitty-gritty-technical-details/"&gt;Cloudflare - Keyless SSL: The Nitty Gritty Technical Details&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.a10networks.com/glossary/key-differences-between-tls-1-2-and-tls-1-3/"&gt;A10 Networks - Key differences Between TLS 1.2 and TLS 1.3&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;2ã€TCP å»ºç«‹è¿æ¥éœ€è¦3 æ¬¡æ¡æ‰‹ï¼Ÿä¸ºä»€ä¹ˆä¸æ˜¯ 2 æˆ– 4ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;TCPçš„3æ¬¡æ¡æ‰‹æœ¬è´¨ä¸Šæ˜¯å»ºç«‹ä¸€ä¸ªå¯é çš„å…¨åŒå·¥é€šé“ï¼Œæ­¤å¤–è¿˜åŒæ­¥äº†åŒæ–¹çš„æ»‘åŠ¨çª—å£å¤§å°ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆä¸æ˜¯2æ¬¡ï¼šå®¢æˆ·ç«¯SYNï¼ŒæœåŠ¡ç«¯ACKçš„2æ¬¡æ¡æ‰‹åªèƒ½å»ºç«‹ä¸€ä¸ªå®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯çš„å•å·¥é€šé“ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆä¸æ˜¯4æ¬¡ï¼š3æ¬¡æ¡æ‰‹æœ¬è´¨ä¸Šå°±æ˜¯4æ¬¡ï¼Œåªæ˜¯å°†æœåŠ¡ç«¯ACKå’ŒæœåŠ¡ç«¯SYNåˆå¹¶ä¸ºSYNACKã€‚&lt;/p&gt;
&lt;p&gt;å‚è€ƒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://medium.com/@relieved_gold_mole_613/why-does-tcp-connection-establishment-require-three-way-handshake-2f9e2c5da1ce"&gt;Willam Johnson - Medium Post - Why does TCP connection establishment require three-way handshake?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;3ã€UDP éœ€è¦æ¡æ‰‹å—ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;ä»åè®®å±‚é¢æ²¡æœ‰é™åˆ¶ï¼Œä¸éœ€è¦æ¡æ‰‹ã€‚ä½†æ˜¯åº”ç”¨å±‚å¯èƒ½éœ€è¦çº¦å®šå¥½ä¸€ä¸ªä¼ è¾“æ–¹å¼ï¼Œå¸¸è§çš„ç­–ç•¥æœ‰å›ºå®šç«¯å£ï¼ŒåŸè·¯è¿”å›ï¼Œæˆ–è€…é€šè¿‡å…¶ä»–äº¤äº’æ–¹å¼ç¡®è®¤å¥½ç«¯å£ä¹‹åå†è¿›è¡Œä¼ è¾“ã€‚&lt;/p&gt;
&lt;p&gt;å‚è€ƒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.cloudflare.com/zh-cn/learning/ddos/glossary/user-datagram-protocol-udp/"&gt;Cloudflare - ä»€ä¹ˆæ˜¯UDPï¼Ÿ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;4ã€TIME_WAIT çš„ä½œç”¨&lt;/h2&gt;
&lt;p&gt;TIME_WAITæ˜¯åœ¨TCPå…³é—­è¿æ¥æ—¶ï¼Œåœ¨å®Œæˆå››æ¬¡æŒ¥æ‰‹ä¹‹åï¼Œä¸»åŠ¨å…³é—­è¿æ¥çš„ä¸€æ–¹åº”ç­‰å¾…TIME_WAIT = 2MSLçš„æ—¶é—´ä¹‹åï¼Œæ‰é‡å¤ä½¿ç”¨åŒä¸€ä¸ªç«¯å£è¿›è¡Œè¿æ¥ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¿è¯æœ€åçš„ACKèƒ½åˆ°è¾¾è¢«åŠ¨å…³é—­è¿æ¥æ–¹ï¼Œç¡®ä¿å…¨åŒå·¥è¿æ¥æ­£å¸¸å…³é—­ã€‚å¦åˆ™çš„è¯ï¼Œå¯¹æ–¹å¯èƒ½ä¼šå› ä¸ºæ”¶ä¸åˆ°ACKåŒ…ï¼Œè€Œè¯·æ±‚é‡ä¼ ï¼Œå¯¼è‡´è¿›è¡Œä¸€äº›éæ³•çš„çŠ¶æ€ï¼Œå¦‚RSTä¹‹ç±»çš„ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ä¸‹ä¸€æ¬¡è¿æ¥é‡å¤ä½¿ç”¨åŒä¸€å¥—ç«¯å£è¿›è¡Œè¿æ¥æ—¶ï¼Œç¡®ä¿ä¸ä¼šæœ‰ä¸¢å¤±åœ¨ç½‘ç»œé‡Œçš„åŒ…é‡æ–°åˆ°è¾¾è¿™ä¸€å¥—æ–°çš„è¿æ¥ä¸­ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å‚è€ƒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.cnblogs.com/rexcheny/p/11143128.html"&gt;æ˜€æºª - è§£è¯»TIME_WAIT--ä½ åœ¨ç½‘ä¸Šçœ‹åˆ°çš„å¤§å¤šæ•°å¸–å­å¯èƒ½éƒ½æ˜¯é”™è¯¯çš„&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;5ã€TCPæ‹†åŒ…ç²˜åŒ…è¿™ç§è¯´æ³•å¯¹å—&lt;/h2&gt;
&lt;p&gt;å¯¹ä¹Ÿä¸å¯¹ã€‚æœ¬è´¨ä¸Šå¯¹äºå®šä¹‰çš„é—®é¢˜ã€‚ä»£ç ä½¿ç”¨æ–¹è®¤ä¸ºåœ¨åº”ç”¨å±‚å‘é€æ•°æ®åŒ…æ—¶æ•°æ®åŒ…æ˜¯æœ‰è¾¹ç•Œçš„ï¼Œå› æ­¤åœ¨æ¥æ”¶æ–¹æ—¶ä¹Ÿåº”è¯¥è¯»åˆ°è¾¹ç•Œã€‚ä½†æ˜¯å®é™…ä¸ŠTCPæ˜¯åŸºäºå­—èŠ‚æµçš„ï¼Œå› æ­¤æ‰€æœ‰é€šè¿‡TCPä¼ è¾“çš„æ•°æ®éƒ½è¢«è§†ä½œä¸€ä¸ªå­—èŠ‚æµã€‚TCPåªä¿è¯ä¼ è¾“çš„å†…å®¹çš„é¡ºåºæ€§ï¼Œä½†æ˜¯åº”ç”¨æ˜¯å¦åº”è¯¥å°†æ¥æ”¶åˆ°çš„ä¿¡æ¯è§†ä½œæ˜¯åŒä¸€ä¸ªæˆ–è€…ä¸åŒçš„åŒ…ï¼ŒTCPæ˜¯ç®¡ä¸ç€çš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå½“æ¥æ”¶æ–¹ä½¿ç”¨æŸç§å¸¦Bufferçš„æœºåˆ¶è¯»å–æ—¶ï¼Œå°±ä¼šè¯»åˆ°è¿ç»­çš„å†…å®¹ï¼Œè€Œæ²¡æœ‰è¾¹ç•Œï¼Œä»è€Œå¯èƒ½å¯¼è‡´è§£æå‘ç”Ÿé”™è¯¯ã€‚æˆ–è€…è¯´æ¢ç§è¯´æ³•ï¼Œåº”ç”¨å±‚éœ€è¦è‡ªå·±å®šä¹‰åè®®å†…å®¹ï¼Œç¡®ä¿è§£ææ˜¯æ­£ç¡®çš„ã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬æ¥çœ‹çœ‹HTTPæ˜¯æ€ä¹ˆå¤„ç†çš„ã€‚HTTPçº¦å®šä½¿ç”¨&lt;code&gt;\r\n&lt;/code&gt;æ¥åŒºåˆ†Headerå’ŒBodyï¼Œæ­¤å¤–åœ¨Headerä¸­é™„åŠ çš„&lt;code&gt;Content-Length&lt;/code&gt;ç¡®å®šäº†å®¢æˆ·ç«¯åº”è¯»å–çš„å†…å®¹é•¿åº¦ã€‚ä»¥ä¸‹æ˜¯ä¸€æ®µç¤ºä¾‹ä»£ç ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;socket&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;send_http_request&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;host&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="c1"&gt;# åˆ›å»º socket å¯¹è±¡&lt;/span&gt;
    &lt;span class="n"&gt;sock&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AF_INET&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;SOCK_STREAM&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;# è¿æ¥æœåŠ¡å™¨&lt;/span&gt;
    &lt;span class="n"&gt;sock&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;connect&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;host&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

    &lt;span class="c1"&gt;# å‘é€ HTTP è¯·æ±‚&lt;/span&gt;
    &lt;span class="n"&gt;request&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;GET &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; HTTP/1.1&lt;/span&gt;&lt;span class="se"&gt;\r\n&lt;/span&gt;&lt;span class="s2"&gt;Host: &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;host&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="se"&gt;\r\n\r\n&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;sock&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sendall&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;utf-8&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

    &lt;span class="c1"&gt;# æ¥æ”¶ HTTP å“åº”&lt;/span&gt;
    &lt;span class="n"&gt;response&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="sa"&gt;b&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;chunk&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sock&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;recv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4096&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;chunk&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;break&lt;/span&gt;
        &lt;span class="n"&gt;response&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;chunk&lt;/span&gt;

    &lt;span class="c1"&gt;# è§£æ HTTP å“åº”&lt;/span&gt;
    &lt;span class="n"&gt;status_line&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;headers&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;body&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;b&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\r\n\r\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;# è·å– Content-Length&lt;/span&gt;
    &lt;span class="n"&gt;content_length&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;None&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;header&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;headers&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;b&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\r\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;header&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;startswith&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;b&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Content-Length:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="n"&gt;content_length&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;header&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;b&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
            &lt;span class="k"&gt;break&lt;/span&gt;

    &lt;span class="c1"&gt;# æ‰“å° HTTP å“åº”çŠ¶æ€ç &lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;status_line&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;decode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;utf-8&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

    &lt;span class="c1"&gt;# æ‰“å° HTTP å“åº”å¤´&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;header&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;headers&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;b&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\r\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;header&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;header&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;decode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;utf-8&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

    &lt;span class="c1"&gt;# è¯»å– HTTP å“åº”æ­£æ–‡&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;content_length&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="kc"&gt;None&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;body&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;body&lt;/span&gt;&lt;span class="p"&gt;[:&lt;/span&gt;&lt;span class="n"&gt;content_length&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;body&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;decode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;utf-8&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Content-Length header not found&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;


&lt;span class="c1"&gt;# ä½¿ç”¨ç¤ºä¾‹&lt;/span&gt;
&lt;span class="n"&gt;send_http_request&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;www.example.com&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;/&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;å‚è€ƒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/doocs/source-code-hunter/blob/main/docs/Netty/TCPç²˜æ‹†åŒ…/TCPç²˜æ‹†åŒ…é—®é¢˜åŠNettyä¸­çš„è§£å†³æ–¹æ¡ˆ.md"&gt;github/source-code-hunter - TCP ç²˜åŒ…/æ‹†åŒ…&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;6ã€TCPæ˜¯å¯é ä¼ è¾“å—ï¼Ÿå¦‚æœæ˜¯è¿˜éœ€è¦åœ¨ä¸šåŠ¡å±‚ä¿è¯å¹‚ç­‰å—&lt;/h2&gt;
&lt;p&gt;TCPåªä¿è¯æ•°æ®é“¾è·¯å±‚çš„å¯é æ€§ï¼Œè‡³äºä¼ è¾“çš„å†…å®¹æ˜¯æ€ä¹ˆå¤„ç†çš„ï¼ŒTCPæ— æ³•ä¿è¯ã€‚æ¯”å¦‚å¯¹äºä¸€ä¸ªæ•°æ®åº“è¿›è¡Œå†™å…¥ï¼Œè€Œå‘ç”Ÿäº†æŸç§ç¡¬ä»¶ä¸Šçš„å¤±è´¥å¯¼è‡´å†™å…¥å¤±è´¥ï¼Œè¿™ç§æƒ…å†µTCPå°±æ— æ³•å¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;æ›´å¤šçš„æƒ…å†µæ˜¯ï¼Œæˆ‘ä»¬è¦ä¿è¯ä¸šåŠ¡ä¸Šçš„æ“ä½œæ˜¯å¹‚ç­‰çš„ã€‚ä¸€ä¸ªå†™å…¥æ“ä½œå¯èƒ½ä¼šè·¨è¶Šå¤šä¸ªæœºæˆ¿ï¼Œæ•°æ®åº“å’Œç½‘ç»œé“¾è·¯ï¼Œè¿œè¿œä¸æ˜¯TCPèƒ½å¤Ÿè§£å†³çš„ï¼Œè€Œè¿™éœ€è¦ç ”å‘å·¥ç¨‹å¸ˆä¸æ–­çš„åŠªåŠ›å»ä¼˜åŒ–å¯é æ€§ã€‚TCPåªæ˜¯ä¸ºäº†èƒ½å‡†ç¡®é€è¾¾ä¸šåŠ¡æ¶ˆæ¯è€Œç”Ÿçš„ï¼Œå…·ä½“çš„å¹‚ç­‰ï¼ŒåŠå¯¹åº”çš„è¡¥å¿æœºåˆ¶è¿˜æ˜¯éœ€è¦å¼€å‘äººå‘˜è‡ªå·±å®ç°ã€‚ä½†æ˜¯TCPèƒ½åšçš„äº‹æƒ…æ˜¯å¸®å¼€å‘äººå‘˜å±è”½æ‰æ›´åº•å±‚ï¼Œå¦‚IPç«¯å£çš„ä¸€äº›å®ç°ç»†èŠ‚ã€‚&lt;/p&gt;
&lt;p&gt;å‚è€ƒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.xiaolincoding.com/network/3_tcp/tcp_drop.html#ç”¨äº†tcpåè®®å°±ä¸€å®šä¸ä¼šä¸¢åŒ…å—"&gt;å°æ—coding - ç”¨äº† TCP åè®®ï¼Œæ•°æ®ä¸€å®šä¸ä¼šä¸¢å—ï¼Ÿ&lt;/a&gt; è¿™ç¯‡æ–‡ç« ä»‹ç»äº†æ›´å¤šå…³äºTCPå¯èƒ½ä¸¢åŒ…çš„åœºæ™¯&lt;/li&gt;
&lt;li&gt;&lt;a href="https://blog.csdn.net/tianzhonghaoqing/article/details/121180153"&gt;èæ - CSDN - å¹‚ç­‰æ€§è¯¦è§£ä¸ç¤ºä¾‹&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;7ã€QQ ä½¿ç”¨çš„æ˜¯ TCP è¿˜æ˜¯ UDP&lt;/h2&gt;
&lt;p&gt;åªé’ˆå¯¹æ¶ˆæ¯åœºæ™¯æ¥è¯´ï¼ŒUDPè¾ƒä¸ºåˆé€‚ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹æ¯”èµ·æ¥æœ‰å“ªäº›ä¼˜åŠ¿ï¼Ÿ
- TCPç”±äºå…¶çš„ä¸€äº›æœ¬èº«ç‰¹æ€§è¿‡äºé€šç”¨ï¼ˆå¦‚é˜»å¡æ§åˆ¶ï¼Œä¿è¯æœ‰åºï¼ŒåŠTIME_WAITç­‰ï¼‰ï¼ŒåŸºäºæ¶ˆæ¯çš„åœºæ™¯ä¸‹å¯¹äºå¸¦å®½çš„åˆ©ç”¨ç‡ä¸å¤Ÿï¼Œå› æ­¤åœ¨æ—©æœŸé€šå¸¸éƒ½åŸºäºUDPå¼€å‘ä¸€å¥—æ›´ç®€ä¾¿çš„å¯é ä¼ è¾“åè®®æ¥å¤„ç†QQè¿™ç§åœºæ™¯ã€‚
- TCPç”±äºéœ€è¦ä½¿ç”¨å¾ˆå¤šè¿æ¥ç¬¦ï¼ˆSocketï¼‰ï¼Œåœ¨æ“ä½œç³»ç»Ÿå±‚é¢æ²¡æœ‰ä¼˜åŒ–çš„æƒ…å†µä¸‹ï¼Œæ¯å°æœåŠ¡å™¨å¯ä»¥æ”¯æŒçš„è¿æ¥æ•°å—åˆ°ä¸€å®šçš„é™åˆ¶ã€‚ä½†æ˜¯åæ¥æœ‰äº†epollä¹‹åä¹Ÿå¯ä»¥å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œæœ€é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬è¦æ ¹æ®ä¸åŒçš„åœºæ™¯ä½¿ç”¨ä¸åŒçš„æŠ€æœ¯æ¡†æ¶å’Œé€‰å‹ã€‚æ­¤å¤–ï¼Œå¯¹äºä¸€ä¸ªå¤§çš„é¡¹ç›®æ¥è¯´ï¼Œä¸åŒçš„æ¨¡å—ä¼šéœ€è¦åº”ç”¨ä¸åŒçš„æŠ€æœ¯ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;UDPï¼šPCå®¢æˆ·ç«¯çš„å¿ƒè·³å’Œä¸Šçº¿æ£€æµ‹ï¼Œæ¶ˆæ¯å†…å®¹ä¸‹è½½ &amp;amp; æ¨é€ï¼Œå†…ç½‘P2Pæ–‡ä»¶ä¼ è¾“&lt;/li&gt;
&lt;li&gt;TCPï¼šAndroid &amp;amp; IOS çš„ å›¾ï¼Œæ–‡ï¼Œå°è§†é¢‘å‘é€&lt;/li&gt;
&lt;li&gt;HTTP/Sï¼šåŸºäºWebæŠ€æœ¯çš„ä¸€äº›å†…å®¹ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å‚è€ƒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.cnblogs.com/wuchanming/p/4349743.html"&gt;åšå®¢å›­/Jessicaç¨‹åºçŒ¿ - é«˜å¹¶å‘ç½‘ç»œç¼–ç¨‹ä¹‹epollè¯¦è§£&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.zhihu.com/question/20292749"&gt;çŸ¥ä¹/QQ ä¸ºä»€ä¹ˆä»¥ UDP åè®®ä¸ºä¸»ï¼Œä»¥ TCP åè®®ä¸ºè¾…ï¼Ÿ&lt;/a&gt;æœ‰ä¸€äº›é‡å²ï¼Œçœ‹çœ‹å°±å¥½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/chungchi300/reading-book/blob/master/architecture/1.4äº¿åœ¨çº¿èƒŒåçš„æ•…äº‹-â€”â€”-è…¾è®¯-QQ-IMåå°æ¶æ„çš„æ¼”åŒ–ä¸å¯ç¤º.ppt"&gt;github/chungchi300/reading-book - 1.4äº¿åœ¨çº¿èƒŒåçš„æ•…äº‹-â€”â€”-è…¾è®¯-QQ-IMåå°æ¶æ„çš„æ¼”åŒ–ä¸å¯ç¤º.ppt&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.cnblogs.com/cynrjy/p/15336100.html"&gt;åšå®¢å›­/xiaoyongyoong - èŠå¤©ç³»ç»Ÿè®¾è®¡ how to design a chat system&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;8ã€Linux å·²ç»æä¾›äº†Keep-Aliveï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦åº”ç”¨å±‚åšå¿ƒè·³æ£€æµ‹&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;The UNIX, Linux and Windows operating systems use a 'keepalive' setting to test idle TCP connections and ensure they are still active. By default, 'keepalive' is set to 7200000ms (2 hours). This means that every 2 hours the server machine tests the idle TCP connection by pinging the client machine from where the connection is coming. If the server gets no response back from the client, then 'keepalive' terminates the idle connection. The 'keepalive' interval can be modified by configuring the operating system to reduce the time from 2 hours to 5 minutes.
Source: Esri&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Keep-Aliveæœºåˆ¶å¯ä»¥è®¾ç½®ä¸º5åˆ†é’Ÿåˆ°2å°æ—¶ï¼Œä¸»è¦æ˜¯æœåŠ¡ç«¯ç”¨æ¥å…³é—­ä¸€äº›æ— ç”¨çš„è¿æ¥çš„ï¼Œå¦‚å®¢æˆ·ç«¯ä¸ä¸»åŠ¨å…³é—­è¿æ¥ä½†æ˜¯å·²ç»ä¸å“åº”äº†ã€‚
æ­¤å¤–ï¼Œå¯èƒ½ä¼šæœ‰å„ç§åŸå› è®©Keep-Aliveæ•°æ®åŒ…å¤±æ•ˆï¼Œæ¯”å¦‚Socks Proxyã€‚&lt;/p&gt;
&lt;p&gt;å‚è€ƒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://support.esri.com/en-us/knowledge-base/change-the-operating-system-s-keepalive-settings-146247-000006285"&gt;Esri - Change the operating system's 'keepalive' settings&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://hengyun.tech/why-we-need-heartbeat/"&gt;æ¨ªäº‘æ–­å²­/hengyunabc - ä¸ºä»€ä¹ˆåŸºäºTCPçš„åº”ç”¨éœ€è¦å¿ƒè·³åŒ…ï¼ˆTCP keep-aliveåŸç†åˆ†æï¼‰&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="Computer Science"></category></entry><entry><title>ä»requirements.txtå‡çº§åˆ°Poetry</title><link href="https://mestrace.github.io/posts/2024/Mar/23/requirements-txt-upgrade-poetry/" rel="alternate"></link><published>2024-03-23T14:00:00+08:00</published><updated>2024-04-27T12:00:00+08:00</updated><author><name>Mestrace</name></author><id>tag:mestrace.github.io,2024-03-23:/posts/2024/Mar/23/requirements-txt-upgrade-poetry/</id><summary type="html">&lt;p&gt;å°†åŒ…ç®¡ç†æ–¹å¼ä»requirements.txtå‡çº§åˆ°Poetry&lt;/p&gt;</summary><content type="html">&lt;p&gt;åœ¨Pythonè½¯ä»¶å¼€å‘ä¸­ï¼Œç¬”è€…é€šå¸¸ä½¿ç”¨ &lt;code&gt;requirements.txt&lt;/code&gt; æ–‡ä»¶æ¥ç®¡ç†é¡¹ç›®çš„ä¾èµ–ã€‚è¿™ä¸ªä¹ æƒ¯æºè‡ªäº &lt;code&gt;pip freeze&lt;/code&gt; å‘½ä»¤ï¼Œå®ƒèƒ½å¤Ÿç®€å•åœ°åˆ—å‡ºå½“å‰ Python ç¯å¢ƒä¸‹çš„æ‰€æœ‰åŒ…åŠå…¶ç‰ˆæœ¬å·ã€‚æ— è®ºé¡¹ç›®è§„æ¨¡å¤§å°ï¼Œè¿™éƒ½æ˜¯ä¸€ç§ç®€å•è€Œæœ‰æ•ˆçš„æ–¹æ³•ï¼Œèƒ½å¤Ÿç¡®ä¿æ‰€æœ‰å¼€å‘äººå‘˜ä»¥åŠéƒ¨ç½²ç¯å¢ƒä¸­è¿è¡Œçš„åŒ…ç‰ˆæœ¬ä¿æŒä¸€è‡´ã€‚åœ¨ &lt;code&gt;requirements.txt&lt;/code&gt; ä¸­ï¼Œå¼€å‘è€…å¯ä»¥è½»æ¾åœ°ä¸ºæ¯ä¸ªåŒ…å®šä¹‰ä¸€ä¸ªç‰ˆæœ¬å·ï¼Œä¾‹å¦‚ &lt;code&gt;abc-def &amp;gt;= 0.8.3&lt;/code&gt;ã€‚ç„¶è€Œï¼Œåœ¨ä»Šå¤©ï¼Œéšç€Pythonä½¿ç”¨è€…è¶Šæ¥è¶Šå¤šï¼Œé¡¹ç›®ä¹Ÿè¶Šæ¥è¶Šåºå¤§çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªæ—©åœ¨08å¹´å°±å¼€å§‹ä½¿ç”¨çš„åŒ…ç®¡ç†æ–¹æ³•æ˜¾å¾—æ„ˆå‘è¿‡æ—¶ï¼ˆ&lt;a href="https://github.com/pypa/pip/commit/368a064ae4ca77ac540ef4aea3bf61dd3c2bccb1"&gt;pypa/pip@368a064&lt;/a&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ‰‹åŠ¨ç®¡ç†ä¾èµ–çš„æƒ…å†µä¸‹ï¼Œå¼€å‘è€…å¾€å¾€æ— æ³•ç©·å°½æ‰€æœ‰çš„ä¾èµ–å…³ç³»ã€‚å› æ­¤ï¼Œé€šå¸¸çš„åšæ³•æ˜¯åªåˆ—å‡ºé¡¶å±‚ä¾èµ–åŒ…åŠå…¶ç‰ˆæœ¬å·ã€‚è¿™æ ·ä¸€æ¥ï¼Œå½“ä¾èµ–å…³ç³»å˜å¾—å¤æ‚æ—¶ï¼Œpip å·¥å…·çš„è§£æèƒ½åŠ›å°±æ˜¾å¾—ä¸è¶³ï¼Œæ— æ³•è‡ªåŠ¨è§£å†³ä¾èµ–ä¼ é€’çš„é—®é¢˜ã€‚ä¸€ä¸ªå¸¸è§çš„æƒ…å†µæ˜¯ï¼Œä¸åŒçš„é¡¶å±‚åŒ…å¯èƒ½æŒ‡å®šäº†åŒä¸€ä¸ªåº•å±‚åŒ…çš„ä¸åŒç‰ˆæœ¬ï¼Œå¹¶ä¸”è¿™äº›ç‰ˆæœ¬å¯èƒ½ç›¸äº’ä¸å…¼å®¹ã€‚æ­¤å¤–ï¼Œå½“é¡¹ç›®çš„ä¾èµ–å…³ç³»å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±éœ€è¦å¤§é‡æ‰‹åŠ¨æ“ä½œæ¥ç¼–è¾‘ &lt;code&gt;requirements.txt&lt;/code&gt; æ–‡ä»¶ã€‚å¦å¤–ï¼Œä¸åŒçš„ç¯å¢ƒå¯èƒ½éœ€è¦ä¸åŒçš„ä¾èµ–ã€‚ä½œè€…é€šå¸¸ä¼šä½¿ç”¨ç±»ä¼¼ &lt;code&gt;requirements-*.txt&lt;/code&gt; çš„å‘½åæ–¹å¼æ¥åŒºåˆ†ä¸åŒç¯å¢ƒä¸‹çš„ä¾èµ–ã€‚ä¾‹å¦‚ï¼Œåœ¨æµ‹è¯•ç¯å¢ƒä¸­ï¼Œå¯èƒ½éœ€è¦å®‰è£…é¢å¤–çš„è·Ÿè¸ªç›¸å…³åº“æˆ–æµ‹è¯•åº“ï¼Œå¦‚ &lt;code&gt;pytest&lt;/code&gt;ã€‚ä½†æ˜¯ï¼Œ&lt;code&gt;requirements.txt&lt;/code&gt; æ— æ³•å®Œå…¨é”å®šåŒ…çš„ç‰ˆæœ¬ï¼Œå› æ­¤åœ¨ä¸åŒçš„ç¯å¢ƒä¸­å¯èƒ½ä¼šå®‰è£…ä¸åŒçš„ç‰ˆæœ¬ï¼Œç”šè‡³åœ¨æç«¯æƒ…å†µä¸‹ä¼šå¼•å…¥å®‰å…¨é£é™©ã€‚å¦‚æœè¿æ¥çš„ä¸æ˜¯å—ä¿¡ä»»çš„ä»“åº“æºï¼Œé»‘å®¢å¯èƒ½ä¼šåˆ©ç”¨ä¾›åº”é“¾æ”»å‡»ï¼Œå°†åŒ…ç‰ˆæœ¬æ›¿æ¢ä¸ºæ¶æ„è½¯ä»¶ç‰ˆæœ¬ï¼Œè€Œ&lt;code&gt;requirements.txt&lt;/code&gt;æ— æ³•è§£å†³è¿™ç§é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¯¸å¤šé€‰é¡¹ä¸­ï¼Œç¬”è€…æœ€ç»ˆé€‰æ‹©äº†&lt;code&gt;poetry&lt;/code&gt;ä½œä¸ºæœ¬åšå®¢çš„åŒ…ç®¡ç†å·¥å…·ã€‚é™¤äº†ä½¿ç”¨åŸºäº&lt;a href="https://peps.python.org/pep-0621/"&gt;PEP-621&lt;/a&gt;å¸¦æ¥çš„&lt;code&gt;pyproject.toml&lt;/code&gt;çš„é¡¹ç›®ä¸åŒ…ç®¡ç†åŠæ³•ä¹‹å¤–ï¼Œ&lt;code&gt;poetry&lt;/code&gt;è¿˜å¸¦æ¥äº†åŒ…ç‰ˆæœ¬é”å®š&lt;code&gt;poetry.lock&lt;/code&gt;ï¼Œå¢å¼ºçš„è‡ªåŠ¨ä¾èµ–è§£æå™¨ï¼Œé…ç½®å·¥å…·ï¼Œè‡ªåŠ¨è™šæ‹Ÿç¯å¢ƒç®¡ç†ç­‰å¤šé¡¹åŠŸèƒ½ã€‚è€Œæ¥ä¸‹æ¥çš„å†…å®¹åˆ™æ˜¯ä¸€äº›ç®€å•çš„&lt;code&gt;poetry&lt;/code&gt;å‘½ä»¤ä»‹ç»ã€‚&lt;/p&gt;
&lt;h2&gt;poetry new&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨&lt;code&gt;poetry new&lt;/code&gt;å‘½ä»¤æ–°å»ºé¡¹ç›®è¾ƒä¸ºç®€å•ï¼Œåœ¨å‘½ä»¤è¡Œé‡Œé”®å…¥&lt;code&gt;poetry new &amp;lt;package-name&amp;gt;&lt;/code&gt;å³å¯ã€‚å·¥å…·å°±æ–°å»ºå¯¹åº”åç§°çš„é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨å…¶ä¸­åŒ…å«&lt;code&gt;README.md&lt;/code&gt;ï¼Œ&lt;code&gt;pyproject.toml&lt;/code&gt;ï¼Œæºä»£ç ä¸»ç›®å½•åŠæµ‹è¯•ç›®å½•ã€‚ä½†ç”±äºç¬”è€…æ˜¯åœ¨ç°æœ‰ç¯å¢ƒä¸­è¿›è¡Œè¿ç§»ï¼Œå› æ­¤è¿™ä¸ªæ–¹å¼ä¸å¤ªé€‚ç”¨ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;gt; poetry new poetry-test
Created package poetry_test in poetry-test
&amp;gt; cd poetry-test 
&amp;gt; ls
README.md      poetry_test    pyproject.toml tests
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;è€Œç”Ÿæˆçš„&lt;code&gt;pyproject.toml&lt;/code&gt;é•¿è¿™æ ·ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;[tool.poetry]&lt;/span&gt;
&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;poetry-test&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;version&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;0.1.0&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;description&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;authors&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Mestrace &amp;lt;abc@example.com&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;readme&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;README.md&amp;quot;&lt;/span&gt;

&lt;span class="k"&gt;[tool.poetry.dependencies]&lt;/span&gt;
&lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;^3.11&amp;quot;&lt;/span&gt;

&lt;span class="k"&gt;[build-system]&lt;/span&gt;
&lt;span class="n"&gt;requires&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;poetry-core&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;build-backend&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;poetry.core.masonry.api&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;poetry init&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;poetry init&lt;/code&gt;å‘½ä»¤åªåœ¨ä¸€ä¸ªå·²æœ‰çš„é¡¹ç›®ä¸‹åˆ›å»ºå¯¹åº”çš„&lt;code&gt;pyproject.toml&lt;/code&gt;ã€‚ä½¿ç”¨&lt;code&gt;poetry init&lt;/code&gt;ä¹‹åï¼Œä¼šè¿›å…¥ä¸€ä¸ªå‘½ä»¤è¡Œäº¤äº’çš„å¼•å¯¼ï¼Œå¹¶è¾“å…¥å¯¹åº”çš„ä¿¡æ¯æ¥å¡«å……ç”Ÿæˆçš„&lt;code&gt;pyproject.toml&lt;/code&gt;ï¼Œä¹Ÿæ˜¯ç¬”è€…è¿ç§»çš„ç¬¬ä¸€æ­¥ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;gt; poetry init

This command will guide you through creating your pyproject.toml config.

Package name [mestrace.github.io]:  
Version [0.1.0]:  
Description []:  Mestrace&amp;#39;s Personal Blog
Author [Mestrace &amp;lt;abc@example.com&amp;gt;, n to skip]:  n
License []:  WTFPL     
Compatible Python versions [^3.11]:  

Would you like to define your main dependencies interactively? (yes/no) [yes] no
Would you like to define your development dependencies interactively? (yes/no) [yes] no
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;poetry add&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;poetry add&lt;/code&gt;åˆ™å¯ä»¥æ·»åŠ å¯¹åº”çš„åŒ…åˆ°å½“å‰é¡¹ç›®ï¼Œå¹¶è§£æå¯¹åº”çš„ä¾èµ–&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&amp;gt; poetry add django@latest
Creating virtualenv poetry-test-Ewpj0lEl-py3.11 in /tmp/folder/virtualenvs
Using version ^5.0.3 for django

Updating dependencies
Resolving dependencies... (1.0s)

Package operations: 3 installs, 0 updates, 0 removals

  - Installing asgiref (3.8.1)
  - Installing sqlparse (0.4.4)
  - Installing django (5.0.3)

Writing lock file
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;æ·»åŠ ä¹‹åï¼Œåœ¨&lt;code&gt;pyproject.toml&lt;/code&gt;ä¸­æ–°å¢äº†djangoçš„ä¾èµ–ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;[tool.poetry.dependencies]&lt;/span&gt;
&lt;span class="na"&gt;python&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;^3.11&amp;quot;&lt;/span&gt;
&lt;span class="na"&gt;django&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;^5.0.3&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;æ­¤æ—¶ï¼Œ&lt;code&gt;poetry.lock&lt;/code&gt;ä¸­ä¹Ÿæ·»åŠ äº†å¯¹åº”çš„é¡¹ç›®ã€‚è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œä¹ŸåŒ…å«äº†å¯¹åº”&lt;code&gt;.whl&lt;/code&gt;å’Œ&lt;code&gt;.tar.gz&lt;/code&gt;æ–‡ä»¶çš„&lt;code&gt;sha256&lt;/code&gt;çš„å“ˆå¸Œæ ¡éªŒç ï¼Œä»¥ç¡®ä¿æœ€ç»ˆæ‹‰åˆ°çš„åŒ…æ˜¯ç¬¦åˆé¢„æœŸçš„ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;....

[[package]]
name = &amp;quot;django&amp;quot;
version = &amp;quot;5.0.3&amp;quot;
description = &amp;quot;A high-level Python web framework that encourages rapid development and clean, pragmatic design.&amp;quot;
optional = false
python-versions = &amp;quot;&amp;gt;=3.10&amp;quot;
files = [
    {file = &amp;quot;Django-5.0.3-py3-none-any.whl&amp;quot;, hash = &amp;quot;sha256:5c7d748ad113a81b2d44750ccc41edc14e933f56581683db548c9257e078cc83&amp;quot;},
    {file = &amp;quot;Django-5.0.3.tar.gz&amp;quot;, hash = &amp;quot;sha256:5fb37580dcf4a262f9258c1f4373819aacca906431f505e4688e37f3a99195df&amp;quot;},
]

[package.dependencies]
asgiref = &amp;quot;&amp;gt;=3.7.0,&amp;lt;4&amp;quot;
sqlparse = &amp;quot;&amp;gt;=0.3.1&amp;quot;
tzdata = {version = &amp;quot;*&amp;quot;, markers = &amp;quot;sys_platform == \&amp;quot;win32\&amp;quot;&amp;quot;}

...Omitted
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;æ¥ç€ä½¿ç”¨poetryå¯¼å…¥requirements.txté‡çš„é¡¹ç›®ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;poetry&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="n"&gt;cat&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;requirements&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;txt&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt;
&lt;span class="n"&gt;Using&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;version&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;^&lt;/span&gt;&lt;span class="mf"&gt;1.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pelican&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;markdown&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;include&lt;/span&gt;

&lt;span class="n"&gt;Updating&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dependencies&lt;/span&gt;
&lt;span class="n"&gt;Resolving&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dependencies&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;12.9&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;Package&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;operations&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;44&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;installs&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;updates&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;removals&lt;/span&gt;

&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;idna&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;3.6&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;mdurl&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sniffio&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;1.3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;anyio&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;4.3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;markdown&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;it&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;3.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;markupsafe&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pygments&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.17&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pytz&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2024.1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;six&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;1.16&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;blinker&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;1.7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;docutils&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.20&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;feedgenerator&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;jinja2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;3.1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;markdown&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;3.6&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ordered&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;set&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;4.1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dateutil&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.9&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.&lt;/span&gt;&lt;span class="n"&gt;post0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;rich&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;13.7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;smartypants&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;soupsieve&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;unidecode&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;1.3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;watchfiles&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.21&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;webencodings&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.5&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;beautifulsoup4&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;4.12&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;certifi&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2024.2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;charset&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;normalizer&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;3.3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;html5lib&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;1.1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;markdown&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.8&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pelican&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;4.9&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pelican&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;granular&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;signals&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;1.1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;py3dns&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;4.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;tornado&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;6.4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;typogrify&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;urllib3&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ghp&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;invoke&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;livereload&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.6&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pelican&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;markdown&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;1.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pelican&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;precompress&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pelican&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;render&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;math&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;1.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pelican&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;seo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;1.2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pelican&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;simple&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;footnotes&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;1.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pelican&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;sitemap&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;1.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.31&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Installing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;zopfli&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;Writing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;lock&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;åˆ°è¿™é‡Œå°±å®Œæˆäº†&lt;code&gt;requirements.txt&lt;/code&gt;çš„è¿ç§»ï¼Œä¹Ÿå¯ä»¥å®‰å…¨çš„ç§»é™¤å•¦ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœåœ¨è¿™æ—¶éœ€è¦æ›´æ–°ä¸€ä¸ªè½¯ä»¶çš„ç‰ˆæœ¬ï¼Œåˆ™å¯ä»¥ä½¿ç”¨&lt;code&gt;poetry add &amp;lt;package&amp;gt;@latest&lt;/code&gt;æ¥è¿›è¡Œå®‰è£…ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;poetry&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;add&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;zopfli&lt;/span&gt;&lt;span class="nv"&gt;@latest&lt;/span&gt;
&lt;span class="k"&gt;Using&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;version&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;^&lt;/span&gt;&lt;span class="mf"&gt;0.2.3&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;zopfli&lt;/span&gt;

&lt;span class="n"&gt;Updating&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dependencies&lt;/span&gt;
&lt;span class="n"&gt;Resolving&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dependencies&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.5&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;Package&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nl"&gt;operations&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;installs&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;update&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;removals&lt;/span&gt;

&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Updating&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;zopfli&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.2.2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0.2.3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;Writing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;lock&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;file&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;poetry show&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;poetry show&lt;/code&gt;åˆ™æ˜¯&lt;code&gt;pip show&lt;/code&gt;çš„å®Œå…¨å¢å¼ºç‰ˆã€‚&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥ä½¿ç”¨&lt;code&gt;-T&lt;/code&gt;åŠŸèƒ½æ¥æ˜¾ç¤ºæ‰€æœ‰é¡¶å±‚ä¾èµ–ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;poetry&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="n"&gt;ghp&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt;               &lt;/span&gt;&lt;span class="mf"&gt;2.1.0&lt;/span&gt;&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;Copy&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;your&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;docs&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;directly&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;gh&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;pages&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;branch&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="n"&gt;invoke&lt;/span&gt;&lt;span class="w"&gt;                   &lt;/span&gt;&lt;span class="mf"&gt;2.2.0&lt;/span&gt;&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;Pythonic&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;task&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;execution&lt;/span&gt;
&lt;span class="n"&gt;livereload&lt;/span&gt;&lt;span class="w"&gt;               &lt;/span&gt;&lt;span class="mf"&gt;2.6.3&lt;/span&gt;&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;Python&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;LiveReload&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;an&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;awesome&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;tool&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;web&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;developers&lt;/span&gt;
&lt;span class="n"&gt;markdown&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;include&lt;/span&gt;&lt;span class="w"&gt;         &lt;/span&gt;&lt;span class="mf"&gt;0.8.1&lt;/span&gt;&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Python&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Markdown&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;extension&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;which&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;provides&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;an&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;include&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;function&lt;/span&gt;
&lt;span class="n"&gt;pelican&lt;/span&gt;&lt;span class="w"&gt;                  &lt;/span&gt;&lt;span class="mf"&gt;4.9.1&lt;/span&gt;&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;Static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;site&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;generator&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;supporting&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Markdown&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;reStructuredText&lt;/span&gt;
&lt;span class="n"&gt;pelican&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;markdown&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;1.0.2&lt;/span&gt;&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;Pelican&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;plugin&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;using&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Markdown&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;extension&lt;/span&gt;
&lt;span class="n"&gt;pelican&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;photos&lt;/span&gt;&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="mf"&gt;1.6.0&lt;/span&gt;&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;Add&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;photo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;or&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;gallery&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;photos&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;an&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;article&lt;/span&gt;
&lt;span class="n"&gt;pelican&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;precompress&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="mf"&gt;2.2.0&lt;/span&gt;&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;Pre&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;compress&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;your&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Pelican&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;site&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;using&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;gzip&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;zopfli&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;brotli&lt;/span&gt;&lt;span class="err"&gt;!&lt;/span&gt;
&lt;span class="n"&gt;pelican&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;render&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;math&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="mf"&gt;1.0.3&lt;/span&gt;&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;Render&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;mathematics&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Pelican&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;site&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;
&lt;span class="n"&gt;pelican&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;seo&lt;/span&gt;&lt;span class="w"&gt;              &lt;/span&gt;&lt;span class="mf"&gt;1.2.2&lt;/span&gt;&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;Pelican&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;plugin&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;improve&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SEO&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Search&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Engine&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Optimization&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;reach&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;top&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;posit&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;
&lt;span class="n"&gt;pelican&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;simple&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;footnotes&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;1.0.2&lt;/span&gt;&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;Pelican&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;plugin&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;footnotes&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;articles&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pages&lt;/span&gt;
&lt;span class="n"&gt;pelican&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;sitemap&lt;/span&gt;&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="mf"&gt;1.1.0&lt;/span&gt;&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;Pelican&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;plugin&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;generate&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sitemap&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;plain&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;or&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;XML&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;format&lt;/span&gt;
&lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="w"&gt;                 &lt;/span&gt;&lt;span class="mf"&gt;2.31.0&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="n"&gt;Python&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;HTTP&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Humans&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="n"&gt;zopfli&lt;/span&gt;&lt;span class="w"&gt;                   &lt;/span&gt;&lt;span class="mf"&gt;0.2.3&lt;/span&gt;&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;Zopfli&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;module&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ä½ å¯ä»¥ä½¿ç”¨&lt;code&gt;-t&lt;/code&gt;é€‰é¡¹æ¥å±•ç¤ºå®Œæ•´çš„é¡¹ç›®ä¾èµ–æ ‘ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;&amp;gt; &lt;/span&gt;&lt;span class="ge"&gt;poetry show -t pelican&lt;/span&gt;
pelican 4.9.1 Static site generator supporting Markdown and reStructuredText
â”œâ”€â”€ blinker &amp;gt;=1.7.0
â”œâ”€â”€ docutils &amp;gt;=0.20.1
â”œâ”€â”€ feedgenerator &amp;gt;=2.1.0
â”‚   â””â”€â”€ pytz &amp;gt;=0a 
â”œâ”€â”€ jinja2 &amp;gt;=3.1.2
â”‚   â””â”€â”€ markupsafe &amp;gt;=2.0 
â”œâ”€â”€ ordered-set &amp;gt;=4.1.0
â”œâ”€â”€ pygments &amp;gt;=2.16.1
â”œâ”€â”€ python-dateutil &amp;gt;=2.8.2
â”‚   â””â”€â”€ six &amp;gt;=1.5 
â”œâ”€â”€ rich &amp;gt;=13.6.0
â”‚   â”œâ”€â”€ markdown-it-py &amp;gt;=2.2.0 
â”‚   â”‚   â””â”€â”€ mdurl &amp;gt;=0.1,&amp;lt;1.0 
â”‚   â””â”€â”€ pygments &amp;gt;=2.13.0,&amp;lt;3.0.0 
â”œâ”€â”€ tzdata *
â”œâ”€â”€ unidecode &amp;gt;=1.3.7
â””â”€â”€ watchfiles &amp;gt;=0.21.0
    â””â”€â”€ anyio &amp;gt;=3.0.0 
        â”œâ”€â”€ idna &amp;gt;=2.8 
        â””â”€â”€ sniffio &amp;gt;=1.1 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ä½ è¿˜å¯ä»¥ä½¿ç”¨&lt;code&gt;-o&lt;/code&gt;é€‰é¡¹æ¥å±•ç¤ºæ‰€æœ‰å­˜åœ¨æ–°ç‰ˆæœ¬çš„åŒ…ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;poetry&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;show&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;o&lt;/span&gt;
&lt;span class="nv"&gt;pelican&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;precompress&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;.&lt;span class="mi"&gt;1&lt;/span&gt;.&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;.&lt;span class="mi"&gt;2&lt;/span&gt;.&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nv"&gt;Pre&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;compress&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;your&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Pelican&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;site&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;using&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;gzip&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;zopfli&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;brotli&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;
&lt;span class="nv"&gt;pelican&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;sitemap&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;.&lt;span class="mi"&gt;0&lt;/span&gt;.&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;.&lt;span class="mi"&gt;1&lt;/span&gt;.&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nv"&gt;Pelican&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;plugin&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;generate&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;sitemap&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;plain&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;text&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;or&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;XML&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;format&lt;/span&gt;
&lt;span class="nv"&gt;pillow&lt;/span&gt;&lt;span class="w"&gt;              &lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;.&lt;span class="mi"&gt;0&lt;/span&gt;.&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;.&lt;span class="mi"&gt;2&lt;/span&gt;.&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Python&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Imaging&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Library&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;Fork&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;poetry run&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;Poetry&lt;/code&gt;ä¸ä»…åŒ…å«äº†åŒ…ç®¡ç†ç³»ç»Ÿï¼Œè¿˜æä¾›äº†ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒçš„ç®¡ç†ã€‚é€‚ç”¨&lt;code&gt;poetry run &amp;lt;command&amp;gt;&lt;/code&gt;å‘½ä»¤ç­‰ä»·äº&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;virtual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;env&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nv"&gt;command&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="k"&gt;exit&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;virtual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;env&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;å®˜æ–¹æ–‡æ¡£&lt;a href="https://python-poetry.org/docs/managing-environments/"&gt;Poetry Documentation - Managing environments&lt;/a&gt;ä¸­è®°å½•äº†æ›´å¤šé«˜é˜¶çš„ç”¨æ³•ï¼Œè¿™é‡Œç¬”è€…å°±ä¸å±•å¼€äº†ã€‚&lt;/p&gt;
&lt;p align="center"&gt;
  &lt;img src="https://mestrace.github.io/images/gei_li.png" /&gt;
&lt;/p&gt;

&lt;h2&gt;è™šæ‹Ÿç¯å¢ƒ&lt;/h2&gt;
&lt;p&gt;åœ¨poetryä¸­ï¼Œä½ å¯ä»¥è½»æ¾çš„ç®¡ç†ä½ é¡¹ç›®å½“ä¸­çš„è™šæ‹Ÿç¯å¢ƒã€‚ä½ å¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤ç®¡ç†ä½ çš„è™šæ‹Ÿç¯å¢ƒã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# åŸºäºpythonæ–‡ä»¶ç›®å½•åˆ›å»º&lt;/span&gt;
poetry&lt;span class="w"&gt; &lt;/span&gt;env&lt;span class="w"&gt; &lt;/span&gt;use&lt;span class="w"&gt; &lt;/span&gt;/path/to/python/bin/python3.6
&lt;span class="c1"&gt;# åŸºäºå‘½ä»¤åˆ›å»º&lt;/span&gt;
poetry&lt;span class="w"&gt; &lt;/span&gt;env&lt;span class="w"&gt; &lt;/span&gt;use&lt;span class="w"&gt; &lt;/span&gt;python3.8
&lt;span class="c1"&gt;# åŸºäºç‰ˆæœ¬å·åˆ›å»º&lt;/span&gt;
poetry&lt;span class="w"&gt; &lt;/span&gt;env&lt;span class="w"&gt; &lt;/span&gt;use&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;.10
&lt;span class="c1"&gt;# åŸºäºç³»ç»Ÿpythonåˆ›å»º&lt;/span&gt;
poetry&lt;span class="w"&gt; &lt;/span&gt;env&lt;span class="w"&gt; &lt;/span&gt;use&lt;span class="w"&gt; &lt;/span&gt;system
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;é‚£ä¹ˆæˆ‘ä»¬å°±ç»™å½“å‰repoåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒå§ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;âœ&lt;span class="w"&gt;  &lt;/span&gt;stacks-py&lt;span class="w"&gt; &lt;/span&gt;git:&lt;span class="o"&gt;(&lt;/span&gt;main&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;âœ—&lt;span class="w"&gt; &lt;/span&gt;poetry&lt;span class="w"&gt; &lt;/span&gt;env&lt;span class="w"&gt; &lt;/span&gt;use&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;.11
Creating&lt;span class="w"&gt; &lt;/span&gt;virtualenv&lt;span class="w"&gt; &lt;/span&gt;stacks-py-cHFsRABB-py3.11&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;~/Library/Caches/pypoetry/virtualenvs
Using&lt;span class="w"&gt; &lt;/span&gt;virtualenv:&lt;span class="w"&gt; &lt;/span&gt;~/Library/Caches/pypoetry/virtualenvs/stacks-py-cHFsRABB-py3.11
âœ&lt;span class="w"&gt;  &lt;/span&gt;stacks-py&lt;span class="w"&gt; &lt;/span&gt;git:&lt;span class="o"&gt;(&lt;/span&gt;main&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;âœ—&lt;span class="w"&gt; &lt;/span&gt;poetry&lt;span class="w"&gt; &lt;/span&gt;env&lt;span class="w"&gt; &lt;/span&gt;list
stacks-py-cHFsRABB-py3.11&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;Activated&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œè™šæ‹Ÿç¯å¢ƒçš„é»˜è®¤è·¯å¾„æ˜¯åœ¨ &lt;code&gt;~/Library/Caches/pypoetry/virtualenvs&lt;/code&gt;ä¸‹é¢çš„ã€‚å¦‚æœä½ æƒ³æ”¹å˜è¿™ä¸ªè¡Œä¸ºçš„è¯ï¼Œä½ ä¹Ÿå¯ä»¥å°†å…¶è®¾å®šä¸ºåœ¨å½“å‰repoç›®å½•ä¸‹åˆ›å»ºè™šæ‹Ÿç¯å¢ƒã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# è®¾ç½®ä¸ºåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ&lt;/span&gt;
poetry&lt;span class="w"&gt; &lt;/span&gt;config&lt;span class="w"&gt; &lt;/span&gt;virtualenvs.in-project&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;span class="c1"&gt;# æ¥ç€åˆ›å»ºè™šæ‹Ÿç¯å¢ƒçš„å‘½ä»¤&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;æŸ¥çœ‹å½“å‰å¯ç”¨çš„ç¯å¢ƒä¿¡æ¯&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;my-repo&lt;span class="w"&gt; &lt;/span&gt;git:&lt;span class="o"&gt;(&lt;/span&gt;main&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;âœ—&lt;span class="w"&gt; &lt;/span&gt;poetry&lt;span class="w"&gt; &lt;/span&gt;env&lt;span class="w"&gt; &lt;/span&gt;info

Virtualenv
Python:&lt;span class="w"&gt;         &lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;.11.7
Implementation:&lt;span class="w"&gt; &lt;/span&gt;CPython
Path:&lt;span class="w"&gt;           &lt;/span&gt;/path/to/repo/.venv
Executable:&lt;span class="w"&gt;     &lt;/span&gt;/path/to/repo/.venv/bin/python
Valid:&lt;span class="w"&gt;          &lt;/span&gt;True

Base
Platform:&lt;span class="w"&gt;   &lt;/span&gt;darwin
OS:&lt;span class="w"&gt;         &lt;/span&gt;posix
Python:&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;.11.7
Path:&lt;span class="w"&gt;       &lt;/span&gt;/usr/local/opt/python@3.11/Frameworks/Python.framework/Versions/3.11
Executable:&lt;span class="w"&gt; &lt;/span&gt;/usr/local/opt/python@3.11/Frameworks/Python.framework/Versions/3.11/bin/python3.11
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ç»“åˆvscodeä¸€èµ·ä½¿ç”¨çš„è¯æ›´ä½³å“¦ï¼&lt;/p&gt;
&lt;h2&gt;å°ç»“&lt;/h2&gt;
&lt;p&gt;ç®¡ç†é¡¹ç›®çš„ä¾èµ–å¹¶ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹æƒ…ï¼Œè€Œ&lt;code&gt;poetry&lt;/code&gt;å¯ä»¥å®‰å…¨çš„å¸®åŠ©æˆ‘ä»¬è§£å†³é‡å¤åŠ³ä½œçš„é—®é¢˜ã€‚å¦‚æœä½ çš„Pythoné¡¹ç›®è¿˜åœ¨ä½¿ç”¨&lt;code&gt;requirements.txt&lt;/code&gt;æ¥ç®¡ç†åŒ…ä¾èµ–çš„è¯ï¼Œä¸å¦¨èŠ±ä¸Š10åˆ†é’Ÿå‡çº§ä¸€ä¸‹ï¼Œä½ ä¼šè·å¾—æ›´å¥½çš„ä½“éªŒã€‚&lt;/p&gt;</content><category term="Computer Science"></category><category term="Python"></category></entry><entry><title>è§£å†³FoobaræŒ‘æˆ˜ï¼ˆå››ï¼‰- ç»ˆç¯‡</title><link href="https://mestrace.github.io/posts/2023/Sep/30/foobar-v/" rel="alternate"></link><published>2023-09-30T21:00:00+08:00</published><updated>2023-10-09T22:00:00+08:00</updated><author><name>Mestrace</name></author><id>tag:mestrace.github.io,2023-09-30:/posts/2023/Sep/30/foobar-v/</id><summary type="html">&lt;p&gt;æ¥ä¸Šå›ä¹¦ï¼Œæˆ‘ä»¬æ¥åˆ°äº†FoobaræŒ‘æˆ˜çš„ç¬¬äº”å±‚ï¼Œé¢˜ç›®è¶Šæ¥è¶Šå›°éš¾äº†ã€‚æœ¬é¢˜ä¸»è¦æ¶‰åŠä¸€äº›æ•°è®ºå’Œç»„åˆæ•°å­¦çš„çŸ¥è¯†ç‚¹ã€‚&lt;/p&gt;</summary><content type="html">&lt;p&gt;Foobarç³»åˆ—å·²ç»å…¨éƒ¨å®Œæˆäº†ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹ç›®å½•è®¿é—®ï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://mestrace.github.io/posts/2023/Apr/21/foobar-ii/"&gt;è§£å†³FoobaræŒ‘æˆ˜ï¼ˆä¸€ï¼‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://mestrace.github.io/posts/2023/Apr/22/foobar-iii/"&gt;è§£å†³FoobaræŒ‘æˆ˜ï¼ˆäºŒï¼‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://mestrace.github.io/posts/2023/May/13/foobar-iv/"&gt;è§£å†³FoobaræŒ‘æˆ˜ï¼ˆä¸‰ï¼‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;è§£å†³FoobaræŒ‘æˆ˜ï¼ˆå››ï¼‰- ç»ˆç¯‡&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Dodge the Lasers!&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nv"&gt;foobar&lt;/span&gt;:&lt;span class="o"&gt;~/&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;mestrace&lt;/span&gt;$&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;request&lt;/span&gt;
&lt;span class="nv"&gt;Requesting&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;challenge&lt;/span&gt;...
&lt;span class="nv"&gt;Huzzah&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;The&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;famous&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;pilots&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Luke&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Skybunny&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Jyn&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Erbun&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;managed&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;hijack&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;pair&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Commander&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Lambda&lt;/span&gt;&lt;span class="s1"&gt;'s starfighters and are laying down cover fire for the bunnies'&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;escape&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;pods&lt;/span&gt;.&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;You&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;give&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;them&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;wing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;salute&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;on&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;your&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;way&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;past&lt;/span&gt;.

&lt;span class="nv"&gt;New&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;challenge&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"Dodge the Lasers!"&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;added&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;your&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;home&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;folder&lt;/span&gt;.
&lt;span class="nv"&gt;Time&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;solve&lt;/span&gt;:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;528&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;hours&lt;/span&gt;.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;çœ‹åˆ°è¿™ä¸ª528å°æ—¶ï¼ˆ22å¤©ï¼‰çš„é™æ—¶æˆ‘å°±è§‰å¾—éšéšçº¦çº¦æœ‰äº›ä¸å¯¹åŠ²â€¦â€¦&lt;/p&gt;
&lt;details&gt;
&lt;summary&gt;é¢˜ç›®&lt;/summary&gt;
&lt;p&gt;Oh no! You've managed to escape Commander Lambda's collapsing space station in an escape pod with the rescued bunny workers - but Commander Lambda isnt about to let you get away that easily. Lambda sent an elite fighter pilot squadron after you -- and they've opened fire!&lt;/p&gt;
&lt;p&gt;Fortunately, you know something important about the ships trying to shoot you down. Back when you were still Lambda's assistant, the Commander asked you to help program the aiming mechanisms for the starfighters. They undergo rigorous testing procedures, but you were still able to slip in a subtle bug. The software works as a time step simulation: if it is tracking a target that is accelerating away at 45 degrees, the software will consider the targets acceleration to be equal to the square root of 2, adding the calculated result to the targets end velocity at each timestep. However, thanks to your bug, instead of storing the result with proper precision, it will be truncated to an integer before adding the new velocity to your current position.  This means that instead of having your correct position, the targeting software will erringly report your position as sum(i=1..n, floor(i*sqrt(2))) - not far enough off to fail Commander Lambdas testing, but enough that it might just save your life.&lt;/p&gt;
&lt;p&gt;If you can quickly calculate the target of the starfighters' laser beams to know how far off they'll be, you can trick them into shooting an asteroid,
releasing dust, and concealing the rest of your escape.  Write a function solution(str_n) which, given the string representation of an integer n, returns the
sum of (floor(1&lt;em&gt;sqrt(2)) + floor(2&lt;/em&gt;sqrt(2)) + ... + floor(n&lt;em&gt;sqrt(2))) as a string. That is, for every number i in the range 1 to n, it adds up all of the
integer portions of i&lt;/em&gt;sqrt(2).&lt;/p&gt;
&lt;p&gt;For example, if str_n was "5", the solution would be calculated as
floor(1&lt;em&gt;sqrt(2)) +
floor(2&lt;/em&gt;sqrt(2)) +
floor(3&lt;em&gt;sqrt(2)) +
floor(4&lt;/em&gt;sqrt(2)) +
floor(5*sqrt(2))
= 1+2+4+5+7 = 19
so the function would return "19".&lt;/p&gt;
&lt;p&gt;str_n will be a positive integer between 1 and 10^100, inclusive. Since n can be very large (up to 101 digits!), using just sqrt(2) and a loop won't work. Sometimes, it's easier to take a step back and concentrate not on what you have in front of you, but on what you don't.&lt;/p&gt;
&lt;/details&gt;
&lt;p&gt;è·Ÿä¹‹å‰çš„å¥—è·¯ä¸€æ ·ï¼Œé¦–å…ˆé¢˜ç›®å…ˆç»™å‡ºäº†ä¸€ä¸ªå†—é•¿çš„æè¿°ã€‚å…¶å®ä¸»è¦æ„æ€æ˜¯è¯´è®¡ç®— &lt;span class="math"&gt;\(S(n) = \sum_{i=1}^{n} \lfloor i\sqrt{2} \rfloor\)&lt;/span&gt;ã€‚å†æ‚ä¸€çœ¼æ•°æ®èŒƒå›´â€¦â€¦ åš¯ï¼Œå¥½å®¶ä¼™ï¼Œç›´æ¥ç»™äº†&lt;code&gt;1 &amp;lt;= n &amp;lt;= 10^100&lt;/code&gt;çš„æ•°æ®èŒƒå›´ã€‚æ˜æ‘†ç€ç”¨&lt;code&gt;for&lt;/code&gt;å¾ªç¯è§£å†³ä¸äº†ã€‚ä½†æˆ‘ä»¬è¿˜æ˜¯å¯ä»¥ç”¨è¿™ä¸ªæœ´ç´ æ–¹æ³•æ¥ä½œä¸ºæ ‡å‡†ç­”æ¡ˆã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;solution&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;sqrt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;é‚£ä¹ˆï¼Œæ¥ä¸‹æ¥æœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•èƒ½å¤Ÿè®©æˆ‘å¤§å¹…åº¦å‡å°‘ä»¥ä¸Šç®—æ³•çš„å¤æ‚åº¦å‘¢ï¼Ÿç»è¿‡ä¸€ç•ªæœç´¢ï¼Œæˆ‘æ‰¾åˆ°äº†è¿™ä¸ª&lt;a href="https://en.wikipedia.org/wiki/Beatty_sequence"&gt;Beatty åºåˆ—&lt;/a&gt;ï¼&lt;/p&gt;
&lt;p&gt;Beatty-Rayleighå®šç†ï¼šè‹¥ &lt;span class="math"&gt;\(\alpha, \beta \in \mathbb{R}^+\)&lt;/span&gt;ï¼Œä¸” &lt;span class="math"&gt;\(\alpha, \beta \notin \mathbb{Q}\)&lt;/span&gt;ï¼Œä½¿å¾—
&lt;span class="math"&gt;\(\frac{1}{\alpha} + \frac{1}{\beta} = 1\)&lt;/span&gt;ï¼Œåˆ™æœ‰ä¸¤ä¸ªé›†åˆ
&lt;span class="math"&gt;\(P = \left\{ \lfloor \alpha n \rfloor : n \in \mathbb{Z}^+ \right\}\)&lt;/span&gt; å’Œ &lt;span class="math"&gt;\( Q = \left\{ \lfloor \beta n \rfloor : n \in \mathbb{Z}^+ \right\}\)&lt;/span&gt;ï¼Œä¸” &lt;span class="math"&gt;\(P\)&lt;/span&gt; å’Œ &lt;span class="math"&gt;\(Q\)&lt;/span&gt; å®Œæ•´åˆ’åˆ†æ•´ä¸ªè‡ªç„¶æ•°é›†åˆ
&lt;span class="math"&gt;\(P \cap Q = \emptyset\)&lt;/span&gt;ï¼Œä»¥åŠ &lt;span class="math"&gt;\(P \cup Q = \mathbb{Z}^+\)&lt;/span&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å½“&lt;span class="math"&gt;\(\alpha = \sqrt{2}\)&lt;/span&gt;ï¼Œ&lt;span class="math"&gt;\(\beta=2 + \sqrt{2}\)&lt;/span&gt;æ—¶ï¼Œæˆ‘ä»¬æœ‰&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;i&lt;/th&gt;
&lt;th&gt;1&lt;/th&gt;
&lt;th&gt;2&lt;/th&gt;
&lt;th&gt;3&lt;/th&gt;
&lt;th&gt;4&lt;/th&gt;
&lt;th&gt;5&lt;/th&gt;
&lt;th&gt;6&lt;/th&gt;
&lt;th&gt;7&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;span class="math"&gt;\(\lfloor \alpha i \rfloor\)&lt;/span&gt;&lt;sup id="sf-foobar-v-1-back"&gt;&lt;a href="#sf-foobar-v-1" class="simple-footnote" title="OEIS A001951"&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;7&lt;/td&gt;
&lt;td&gt;8&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;span class="math"&gt;\(\lfloor \beta i \rfloor\)&lt;/span&gt;&lt;sup id="sf-foobar-v-2-back"&gt;&lt;a href="#sf-foobar-v-2" class="simple-footnote" title="OEIS A001952"&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;6&lt;/td&gt;
&lt;td&gt;10&lt;/td&gt;
&lt;td&gt;13&lt;/td&gt;
&lt;td&gt;17&lt;/td&gt;
&lt;td&gt;20&lt;/td&gt;
&lt;td&gt;23&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p align="center"&gt;
  &lt;img src="https://mestrace.github.io/images/where_sold.jpg"&gt;
&lt;/p&gt;

&lt;p&gt;é€šè¿‡Beatty-Rayleighå®šç†åæ¨ï¼Œç»™å®šä¸€ä¸ªæ­£æ•´æ•° &lt;span class="math"&gt;\(n\)&lt;/span&gt;ï¼Œæˆ‘ä»¬æƒ³è¦è®¡ç®— &lt;span class="math"&gt;\(P_n\)&lt;/span&gt;ï¼Œåˆ™å¯ä»¥è¡¨ç¤ºä¸º &lt;span class="math"&gt;\(\sum{P_n} = \sum{\mathcal{Z}} - \sum{Q_m}\)&lt;/span&gt;ã€‚å…¶ä¸­ï¼Œ&lt;span class="math"&gt;\(P_n\)&lt;/span&gt; å’Œ &lt;span class="math"&gt;\(Q_m\)&lt;/span&gt; å…±åŒç»„æˆäº†è‡ªç„¶æ•°é›†åˆ &lt;span class="math"&gt;\({1,2,3,...,\lfloor \alpha i \rfloor}\)&lt;/span&gt; ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬ä½¿ç”¨å˜é‡ &lt;span class="math"&gt;\(m\)&lt;/span&gt; å’Œ &lt;span class="math"&gt;\(n\)&lt;/span&gt; åˆ†åˆ«ä»£è¡¨å‰è¿°ä¸¤ä¸ªé›†åˆçš„æœ€å¤§å€¼ã€‚ä»ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°ï¼Œå½“&lt;code&gt;i&lt;/code&gt;ç›¸åŒæ—¶ï¼Œé›†åˆ &lt;span class="math"&gt;\(P\)&lt;/span&gt; å’Œ &lt;span class="math"&gt;\(Q\)&lt;/span&gt; çš„æœ€å¤§å€¼èŒƒå›´æ˜¯ä¸ä¸€æ ·çš„ï¼Œå› æ­¤ä»–ä»¬æ‰€åœˆé€‰çš„è‡ªç„¶æ•°ç©ºé—´ä¹Ÿä¸ä¸€æ ·ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¡ç®— &lt;span class="math"&gt;\(m = \lfloor \alpha i \rfloor / \beta\)&lt;/span&gt; æ¥é™åˆ¶ &lt;span class="math"&gt;\(Q\)&lt;/span&gt; çš„å–å€¼èŒƒå›´ã€‚æ¥ç€æˆ‘ä»¬å°±å¯ä»¥é€’å½’è®¡ç®— &lt;span class="math"&gt;\(Q_m\)&lt;/span&gt;ã€‚å› ä¸º &lt;span class="math"&gt;\(m\)&lt;/span&gt; æ¯æ¬¡éƒ½ä¼šå˜å°ï¼Œæˆ‘ä»¬æœŸæœ›ä»–èƒ½å¤Ÿæ”¶æ•›åˆ°è¿™ä¸ªé€’å½’æ–¹ç¨‹çš„åŸºçº¿æ¡ä»¶ï¼Œå³ &lt;span class="math"&gt;\(m = 0\)&lt;/span&gt; æˆ–è€… &lt;span class="math"&gt;\(m = 1\)&lt;/span&gt; ã€‚ä»¥ä¸‹ä¸ºä»£ç å®ç°ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;math&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;sqrt&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;sum_beatty_v2&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;alpha&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;alpha&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="n"&gt;beta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;alpha&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;alpha&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;//&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;sum_beatty_v2&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="n"&gt;beta&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;beta&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;solution_v2&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sum_beatty_v2&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;sqrt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;alpha&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;å®ç°å®Œæˆï¼Œç°åœ¨è®©æˆ‘ä»¬debugä¸€ä¸‹ï¼Œæ‰“å°å‡ºæ¥æ¯æ¬¡é€’å½’çš„å€¼çœ‹çœ‹å§ï¼&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;&amp;gt; &lt;/span&gt;&lt;span class="ge"&gt;solution_v2("10")&lt;/span&gt;

10 1.4142135623730951
4 3.4142135623730945
9 1.4142135623730951
3 3.4142135623730945
7 1.4142135623730951
2 3.4142135623730945
4 1.4142135623730951
1 3.4142135623730945

'73'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;æ¯æ¬¡é€’å½’çš„&lt;code&gt;n&lt;/code&gt;æ˜¯å‡å°äº†ï¼Œä½†æ•°é‡çº§æ²¡å˜å°ï¼Œé‚£ä¹ˆæ—¶é—´å¤æ‚åº¦è¿˜æ˜¯æ²¡æœ‰å˜åŒ–å•Šï¼ä¸è¿‡ï¼Œæˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°ï¼Œæ¯æ¬¡éƒ½æ˜¯ &lt;span class="math"&gt;\(\alpha\)&lt;/span&gt; å’Œ &lt;span class="math"&gt;\(\beta\)&lt;/span&gt; ä¸åœçš„åœ¨ &lt;span class="math"&gt;\(\sqrt 2\)&lt;/span&gt; å’Œ &lt;span class="math"&gt;\(2 + \sqrt 2\)&lt;/span&gt; ä¹‹é—´äº’æ¢ã€‚æ¯æ¬¡åœ¨ &lt;span class="math"&gt;\(\alpha = \sqrt 2\)&lt;/span&gt; çš„æ—¶å€™ï¼Œ&lt;code&gt;n&lt;/code&gt;éƒ½ä¼šå‡åŠï¼Œå¦‚æœæˆ‘ä»¬èƒ½è®© &lt;span class="math"&gt;\(\alpha = 2 + \sqrt 2\)&lt;/span&gt; çš„é‡çº§å˜å°å°±å¥½äº†â€¦â€¦&lt;/p&gt;
&lt;p align="center"&gt;
  &lt;img src="https://mestrace.github.io/images/cong-tian-er-jiang.jpg"&gt;
&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬ç›´æ¥åšä¸€ä¸ªå±•å¼€ï¼Œå½“ &lt;span class="math"&gt;\(\alpha = 2 + \sqrt 2\)&lt;/span&gt; æ—¶ï¼Œ&lt;span class="math"&gt;\(P_n = {\lfloor 2 + \sqrt 2\rfloor, \lfloor 4 + 2\sqrt 2 \rfloor ,...,\lfloor n (2 + \sqrt 2)}\)&lt;/span&gt;ã€‚å¦‚æœæˆ‘ä»¬æŠŠå…¶ä¸­çš„æ•´æ•°é¡¹æå‡ºæ¥ï¼Œå…¶å®æ˜¯ä¸å½±å“å‘ä¸‹å–æ•´çš„ç»“æœçš„ã€‚&lt;/p&gt;
&lt;p&gt;å®šç†2: è‹¥ &lt;span class="math"&gt;\(\alpha, \in \mathbb{R}^+\)&lt;/span&gt;ï¼Œ&lt;span class="math"&gt;\(\alpha, \notin \mathbb{Q}\)&lt;/span&gt; ï¼Œä¸” &lt;span class="math"&gt;\(\alpha &amp;gt; 1\)&lt;/span&gt; ï¼Œ &lt;span class="math"&gt;\(\beta = \alpha - 1\)&lt;/span&gt;ï¼Œåˆ™æœ‰ä¸¤ä¸ªé›†åˆ
&lt;span class="math"&gt;\(P = \left\{ \lfloor \alpha n \rfloor : n \in \mathbb{Z}^+ \right\}\)&lt;/span&gt; å’Œ &lt;span class="math"&gt;\( Q = \left\{ \lfloor \beta n \rfloor : n \in \mathbb{Z}^+ \right\}\)&lt;/span&gt;ï¼Œä½¿å¾— &lt;span class="math"&gt;\(\sum_{P} = \sum_{i = 1}^n{i} + \sum_{Q}\)&lt;/span&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªå®šç†æ¥è¿›ä¸€æ­¥åŒ–ç®€æˆ‘ä»¬çš„ç®—æ³•ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;math&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;sqrt&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;nsum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;//&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;sum_beatty_v3&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;alpha&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;alpha&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;

    &lt;span class="n"&gt;n1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;alpha&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;nsum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;n1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;nsum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;sum_beatty_v3&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;alpha&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;solution_v3&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sum_beatty_v3&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;sqrt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;&amp;gt; &lt;/span&gt;&lt;span class="ge"&gt;solution_v3("1000")&lt;/span&gt;

1000
414
171
70
28
11
4
1

'707314'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ä»æ•°å­¦ä¸Šçš„å®šä¹‰æ¥è¯´ï¼Œæˆ‘ä»¬ä¼¼ä¹å·²ç»æœ‰ä¸€ä¸ªå®Œå¤‡çš„ç¨‹åºæ¥è®¡ç®—è¿™é“é¢˜ç›®çš„ç»“æœäº†ã€‚ä½†æˆ‘ä»¬å¯èƒ½å¿½ç•¥äº†ä¸€ä¸ªé‡è¦çš„é—®é¢˜ ---- æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜ã€‚æˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ°ï¼Œåœ¨ä¸Šè¿°ç¨‹åºä¸­ï¼Œæˆ‘ä»¬ä¸€ç›´ä½¿ç”¨ä¸€ä¸ª&lt;code&gt;sqrt(2)&lt;/code&gt;çš„æµ®ç‚¹æ•°æ¥è®¡ç®—ï¼Œä½†æ˜¯å½“æ•°æ®å¤§å°æ‰©å¤§åˆ°&lt;code&gt;10^100&lt;/code&gt;çš„çº§åˆ«ï¼Œä½¿ç”¨æµ®ç‚¹æ•°ä¼šå¼•èµ·ä¸¤ä¸ªé—®é¢˜ï¼šéšç€æ•°æ®èŒƒå›´çš„å¢å¤§ï¼Œæµ®ç‚¹æ•°çš„è¡¨ç¤ºç²¾åº¦ä¼šä¸‹é™ï¼Œä¸”ä¹˜æ³•çš„ç®—æ•°ç²¾åº¦ä¼šä¸‹é™ã€‚æœ€ç»ˆè¿™ä¸¤è€…ç»“åˆèµ·æ¥ä¼šå¼•èµ·æˆ‘ä»¬ç®—å‡ºæ¥çš„ç»“æœä¸å¯¹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è¦ç”¨ç²¾ç¡®çš„&lt;code&gt;sqrt(2)&lt;/code&gt;è¡¨ç¤ºã€‚è¿™é‡Œæˆ‘ç”¨&lt;code&gt;decimal&lt;/code&gt;å’ŒåŸºæœ¬çš„æµ®ç‚¹æ•°ç”Ÿæˆäº†ç»“æœå¯¹æ¯”ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;decimal&lt;/span&gt;

&lt;span class="c1"&gt;# Set the precision to a sufficiently high value&lt;/span&gt;
&lt;span class="n"&gt;decimal&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getcontext&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;prec&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;200&lt;/span&gt;  &lt;span class="c1"&gt;# You can adjust the precision as needed&lt;/span&gt;

&lt;span class="c1"&gt;# Calculate sqrt(2)&lt;/span&gt;
&lt;span class="n"&gt;sqrt_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;decimal&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Decimal&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sqrt&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="c1"&gt;# Set the value of n&lt;/span&gt;
&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;  &lt;span class="c1"&gt;# You can replace this with the desired value of n&lt;/span&gt;

&lt;span class="c1"&gt;# Calculate sqrt(2) * 10^n&lt;/span&gt;
&lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sqrt_2&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;decimal&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Decimal&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sqrt_2_integer&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mi"&gt;14142135623730950488016887242096980785696718753769480731766797379907324784621070388503875343276415727&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;sqrt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;1e100&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="mi"&gt;14142135623730952214093017858547657902953555641438782124185842940740828094528952769132495248707026944&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;å¯ä»¥è§‚å¯Ÿåˆ°ï¼Œåœ¨ç¬¬&lt;code&gt;15&lt;/code&gt;ä½çš„æ—¶å€™å·²ç»æœ‰å·®åˆ«äº†ã€‚&lt;/p&gt;
&lt;p&gt;è€ƒè™‘åˆ°æˆ‘ä»¬å…¶å®åªéœ€è¦è®¡ç®—&lt;code&gt;sqrt(2) - 1&lt;/code&gt;å› æ­¤æˆ‘ä»¬æˆªå–å°æ•°éƒ¨åˆ†ï¼Œå¹¶é¢„è®¡ç®—åˆ°100ä½ï¼Œæœ€åä½¿ç”¨æ•´æ•°ä¹˜æ³•å’Œé™¤æ³•è®¡ç®—ä»¥ä¿å­˜ç²¾åº¦ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œåˆ«å¿˜äº†Foobaré‡‡ç”¨çš„æ˜¯Python2ï¼Œå› æ­¤ä¸€äº›è¯­æ³•éœ€è¦é¢å¤–å¤„ç†ã€‚è¿™é‡Œç»™å‡ºæˆ‘çš„æœ€ç»ˆç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;msqrt&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;4142135623730950488016887242096980785696718753769480731766797379907324784621070388503875343276415727&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;get_n1&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;msqrt&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;//&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;solution_v4&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sum_beatty_v4&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;long&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;nsum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;//&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;sum_beatty_v4&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;

    &lt;span class="n"&gt;n1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;get_n1&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;nsum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;n1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;nsum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;sum_beatty_v4&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;å¦‚æœä½ å¯¹Beattyæ•°åˆ—åŠç›¸å…³æ¦‚å¿µæ„Ÿå…´è¶£ï¼Œæˆ‘éå¸¸æ¨èé˜…è¯»ä»¥ä¸‹ä¸¤ç¯‡æ–‡ç« ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.cnblogs.com/emofunc/p/14892665.html"&gt;Beattyåºåˆ—ä¸Wythoffåšå¼ˆ &lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.matrix67.com/blog/archives/6784"&gt;æ¡çŸ³å­æ¸¸æˆã€ Wythoff æ•°è¡¨å’Œä¸€åˆ‡çš„ Fibonacci æ•°åˆ—&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Fin&lt;/h2&gt;
&lt;p&gt;æäº¤å®Œæœ€åä¸€é¢˜ï¼Œæˆ‘é•¿èˆ’äº†ä¸€å£æ°”ã€‚åœ¨ç†Ÿæ‚‰çš„å‘½ä»¤è¡Œé‡Œè¾“å…¥äº†&lt;code&gt;status&lt;/code&gt;ï¼Œå´å‡ºç°äº†æ–°çš„è°œé¢˜â€¦â€¦&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;foobar:~/&lt;span class="w"&gt; &lt;/span&gt;mestrace$&lt;span class="w"&gt; &lt;/span&gt;status
You've&lt;span class="w"&gt; &lt;/span&gt;completed&lt;span class="w"&gt; &lt;/span&gt;all&lt;span class="w"&gt; &lt;/span&gt;the&lt;span class="w"&gt; &lt;/span&gt;levels!!

&lt;span class="nt"&gt;&amp;lt;encrypted&amp;gt;&lt;/span&gt;b'FkIAARECBhYeQlNOUkYEFwgEB1NeQUQGAgkfERMGFgBKRUlUVQQQEQgAHhEWRk9FSgAVEh0TFxZK\nRUlUVQgNBh8AFx0QDQZCQUVUFREJCgAbAB4RHBVERVdFVAEcDQwGBgAXU15BRBcMBxEdBhJERVdF\nVAcTBwZCQUVUEh0OREVXRVQDGw9CQhA='&lt;span class="nt"&gt;&amp;lt;/encrypted&amp;gt;&lt;/span&gt;

For&lt;span class="w"&gt; &lt;/span&gt;your&lt;span class="w"&gt; &lt;/span&gt;*eyes*&lt;span class="w"&gt; &lt;/span&gt;only!

Use&lt;span class="w"&gt; &lt;/span&gt;the&lt;span class="w"&gt; &lt;/span&gt;status&lt;span class="w"&gt; &lt;/span&gt;command&lt;span class="w"&gt; &lt;/span&gt;to&lt;span class="w"&gt; &lt;/span&gt;repeat&lt;span class="w"&gt; &lt;/span&gt;this&lt;span class="w"&gt; &lt;/span&gt;message.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width &lt; 768) ? "left" : align;
        indent = (screen.width &lt; 768) ? "0em" : indent;
        linebreak = (screen.width &lt; 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js','color.js','mhchem.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;&lt;ol class="simple-footnotes"&gt;&lt;li id="sf-foobar-v-1"&gt;&lt;a href="https://oeis.org/A001951"&gt;OEIS A001951&lt;/a&gt; &lt;a href="#sf-foobar-v-1-back" class="simple-footnote-back"&gt;â†©ï¸&lt;/a&gt;&lt;/li&gt;&lt;li id="sf-foobar-v-2"&gt;&lt;a href="https://oeis.org/A001952"&gt;OEIS A001952&lt;/a&gt; &lt;a href="#sf-foobar-v-2-back" class="simple-footnote-back"&gt;â†©ï¸&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;</content><category term="Computer Science"></category><category term="Google Foobar"></category></entry><entry><title>Airline Empireä¹‹ä½¿ç”¨äºŒæ¬¡è§„åˆ’è§£å†³èˆªçº¿çš„æœ€ä½³åº§ä½æ’å¸ƒ</title><link href="https://mestrace.github.io/posts/2023/Aug/21/ae-best-seat-configuration/" rel="alternate"></link><published>2023-08-21T00:00:00+08:00</published><updated>2023-08-21T00:00:00+08:00</updated><author><name>Mestrace</name></author><id>tag:mestrace.github.io,2023-08-21:/posts/2023/Aug/21/ae-best-seat-configuration/</id><summary type="html">&lt;p&gt;æœ¬æ–‡æ¢è®¨äº†åœ¨çº¿èˆªç©ºå…¬å¸ç»è¥æ¸¸æˆAirline Empiresä¸­ï¼Œå¦‚ä½•é€šè¿‡æœ€ä½³åº§ä½é…ç½®æ¥æå‡ç›ˆåˆ©èƒ½åŠ›ã€‚ä»æ¸¸æˆæœºåˆ¶åˆ°åº§ä½ä¼˜åŒ–ï¼Œé€æ­¥å¼•å¯¼è¯»è€…äº†è§£å¦‚ä½•è¿ç”¨æ··åˆæ•´æ•°äºŒæ¬¡è§„åˆ’æ¥æå‡æ¸¸æˆä¸­çš„èˆªçº¿ç›ˆåˆ©ã€‚This article explores how optimal seating configurations can be used to improve profitability in Airline Empires, an online airline operating game. From game mechanics to seat optimization, the reader is guided step-by-step through how to use Mixed-Integer Quadratic Programming (MIQP) to improve airline profitability in the game.&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://www.airline-empires.com"&gt;Airline Empires&lt;/a&gt;ï¼ˆä¸‹ç§°AEï¼‰æ˜¯ä¸€æ¬¾åœ¨çº¿çš„èˆªç©ºå…¬å¸ç»è¥ç±»æ¸¸æˆã€‚åœ¨æ¸¸æˆä¸­ï¼Œç©å®¶å°†ä»¥ä¸Šå¸è§†è§’è¿è¥èˆªçº¿ï¼Œè¦†ç›–å„ä¸ªåœ°åŒºï¼Œå¹¶ä¸å…¶ä»–ç©å®¶å±•å¼€ç«äº‰ã€‚æ¸¸æˆçš„èŠ‚å¥è®¾è®¡è¾ƒä¸ºç¼“æ…¢ï¼Œæ¯ä¸ªæ¸¸æˆå†…çš„ä¸€å¤©ç›¸å½“äºç°å®æ—¶é—´çš„5è‡³20åˆ†é’Ÿï¼Œä½¿å…¶æˆä¸ºä¸€æ¬¾ä¼‘é—²çš„æ¨¡æ‹Ÿç»è¥æ¸¸æˆã€‚å°½ç®¡æ¸¸æˆä»¥çº¯æ–‡å­—å½¢å¼å‘ˆç°ï¼Œæ²¡æœ‰ä»»ä½•è§†è§‰æ•ˆæœï¼Œä½†AEæä¾›äº†ä¸°å¯Œå¤šæ ·çš„é£æœºé€‰æ‹©ã€‚è¿è¥èˆªçº¿éœ€è¦è€ƒè™‘è¯¸å¤šå› ç´ ï¼ŒåŒ…æ‹¬æœºåœºè·ç¦»ã€é£æœºèˆªç¨‹ã€è·‘é“é•¿åº¦ã€åº§ä½å¸ƒå±€ä»¥åŠä¸åŒèˆ±ä½çš„å®šä»·ç­–ç•¥ã€‚é€šè¿‡ä¸°å¯Œçš„ç»è¥å…ƒç´ å’Œç­–ç•¥è€ƒé‡ï¼ŒAEæˆåŠŸåœ°ä¸ºç©å®¶æä¾›äº†ä¸€ä¸ªæ–°å¥‡çš„èˆªç©ºå…¬å¸ä½“éªŒã€‚æ— è®ºæ˜¯è¿½æ±‚åˆ©æ¶¦æœ€å¤§åŒ–è¿˜æ˜¯èˆªçº¿ç½‘ç»œçš„æ‰©å¼ ï¼Œç©å®¶éƒ½èƒ½åœ¨AEä¸­æ‰¾åˆ°ä¹è¶£ä¸æŒ‘æˆ˜ã€‚&lt;/p&gt;
&lt;figure align="center"&gt;
  &lt;img src="https://mestrace.github.io/images/15/sin-per.png" alt="Airline Empire Screenshot of Singapore to Perth Route Configuration"/&gt;
  &lt;figcaption&gt;æ¸¸æˆæˆªå›¾ï¼šæ–°åŠ å¡åˆ°ç€æ–¯çš„èˆªçº¿é…ç½®&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;æ¸¸æˆç”±ä¸€äº›çˆ±å¥½è€…å›¢é˜Ÿè¿›è¡Œç»´æŠ¤ï¼Œæ¸¸ç©æ˜¯å…è´¹çš„ï¼Œä»…é€šè¿‡å°‘é‡çš„è´´ç‰‡å¹¿å‘Šè¿›è¡Œå˜ç°ä»¥æ”¯æŒæ¸¸æˆçš„è¿è¥ã€‚ç„¶è€Œè¿™ä¹Ÿæ„å‘³ç€ç©å®¶å¿…é¡»å¿å—å°éœ¸ç‹æœåŠ¡å™¨çš„å¡é¡¿ã€‚ä½†æ˜¯è¯åˆè¯´å›æ¥äº†ï¼Œå…è´¹åˆåˆ¶ä½œç²¾è‰¯çš„æ¸¸æˆï¼Œè¿˜æœ‰ä¸“äººè¿›è¡Œç»´æŠ¤ï¼Œç¤¾åŒºæ°›å›´ä¹Ÿä¸é”™çš„æ¸¸æˆï¼Œè¦ä»€ä¹ˆè‡ªè¡Œè½¦å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ç¬”è€…æ—©åœ¨2018å¹´å°±ç©äº†è¿™æ¬¾æ¸¸æˆï¼ŒæœŸé—´ä¹Ÿå¶å°”ä¼šå›å»é‡æ¸©ä¸€ä¸‹ã€‚ä¹°ä¸Šå‡ æ¶ç¬”è€…æœ€å–œæ¬¢çš„éº¦é“MD-80 (é“æ ¼æ‹‰æ–¯ DC-9)å’Œé“æ ¼æ‹‰æ–¯DC-10ï¼Œè¿è¥å‡ æ¡é•¿èˆªçº¿ï¼Œæ„Ÿè§‰éå¸¸æ»¡è¶³ã€‚ä½†ä»Šå¤©è¿™ç¯‡æ–‡ç« çš„ç›®çš„ä¸æ˜¯ä»‹ç»è¿™æ¬¾æ¸¸æˆæœ¬èº«ï¼Œè€Œæ˜¯ä»¥AEçš„å‚æ•°é…ç½®ä¸ºèµ·ç‚¹æ¥æ¢ç´¢å¦‚ä½•é€šè¿‡æœ€ä½³çš„åº§ä½å®‰æ’ä»¥è·å–æ”¶ç›Šã€‚é¦–å…ˆæˆ‘ä¼šä»‹ç»è¿™ä¸ªæ¸¸æˆä¸­å¦‚ä½•é…ç½®èˆªçº¿å’Œç›ˆåˆ©ï¼Œæ¥ç€æˆ‘ä¼šä»‹ç»æˆ‘æ˜¯å¦‚ä½•é€šè¿‡å»ºæ¨¡æ¥ç¡®å®šç‰¹å®šèˆªçº¿çš„æœ€ä½³åº§ä½é…ç½®ï¼Œå¹¶æä¾›ç›¸åº”çš„ä»£ç ä¾›å¤§å®¶å‚è€ƒã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä»æ–°åŠ å¡é£å¾€ç€æ–¯çš„èˆªçº¿ä¸ºä¾‹ï¼Œèˆªç¨‹å…¨é•¿2428è‹±é‡Œï¼ˆ3907å…¬é‡Œï¼‰ã€‚å½“å‰æˆ‘ä»¬ä½¿ç”¨ç¼–å·ä¸º58çš„éº¦é“MD-83å®¢æœºæ‰§é£ï¼Œæ¯å‘¨æ‰§é£26ç­ã€‚MD-83æœ€å¤šå¯å®¹çº³172åä¹˜å®¢ï¼Œåœ¨&lt;code&gt;4F10C146Y&lt;/code&gt;å…±160åä¹˜å®¢çš„åº§èˆ±é…ç½®ä¸‹ï¼Œæ¯å‘¨çš„ç›ˆåˆ©çº¦ä¸º&lt;code&gt;$246,014&lt;/code&gt;ã€‚ä½†æ˜¯è¿™ä¸ªä»“ä½æ•°é‡æ˜¯æˆ‘éšæ‰‹æ‹çš„ä¸€ä¸ªå€¼ï¼Œå¹¶æ²¡æœ‰ä»»ä½•çš„ä¾æ®ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿæ ¹æ®èˆªçº¿çš„æƒ…å†µæ¥å®šåˆ¶å„ä¸ªä»“ä½çš„åº§ä½æ•°é‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±èƒ½å¤§å¹…åº¦æé«˜æˆ‘ä»¬çš„ç›ˆåˆ©èƒ½åŠ›äº†ã€‚æ—©åœ¨ 2018 å¹´ï¼Œå½“æˆ‘ç¬¬ä¸€æ¬¡ç©è¿™ä¸ªæ¸¸æˆæ—¶ï¼Œæˆ‘å°±è®¾æƒ³è¿‡è¿™ç§ä¼˜åŒ–ï¼Œä½†ç¼ºä¹ç›¸å…³çš„çŸ¥è¯†å»çœŸæ­£æŠŠè¿™ä¸ªæ¨¡å‹å®ç°å‡ºæ¥ã€‚ä½†æ˜¯åˆ°äº†2023å¹´çš„ä»Šå¤©ï¼Œæˆ‘å·²ç»æŒæ¡äº†è¶³å¤Ÿçš„çŸ¥è¯†å»å®ç°ç¨‹å¼åŒ–åœ°è®¡ç®—äº†ï¼Œè®©æˆ‘ä»¬æ¥ä¸€èµ·çœ‹çœ‹æˆ‘ä»¬åˆ°åº•å¦‚ä½•å»ºæ¨¡å§ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆæˆ‘ä»¬è¦æ˜ç¡®ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯é¢„æµ‹æŸæ¡ç‰¹å®šèˆªçº¿ä¸Šä½¿ç”¨ç‰¹å®šæœºå‹æ‰§é£çš„åº§ä½æ•°é‡ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜è¦åšä¸€äº›å‡è®¾&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®¢æµ&lt;/strong&gt;ï¼šå› ä¸ºæ¸¸æˆä¸­ä¸Šå¸è§†è§’çš„å­˜åœ¨ï¼Œæˆ‘ä»¬çŸ¥é“æ¯æ¡çº¿è·¯ä¸Šå„ä¸ªä»“ä½çš„æ¯å‘¨å®¢æµæ•°é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœºå‹&lt;/strong&gt;ï¼šä¸€æ¶é£æœºæ¯å‘¨çš„é£è¡Œæ—¶é—´æ˜¯å›ºå®šçš„ï¼Œèˆªçº¿è€—æ—¶å’Œé£æœºè½¬åœºæ—¶é—´å†³å®šäº†ä¸€æ¡èˆªçº¿ä¸Šæ¯å‘¨æœ€å¤šåªèƒ½é£å¤šå°‘æ¬¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»·æ ¼&lt;/strong&gt;ï¼šåœ¨è™½ç„¶æ¸¸æˆå…è®¸æˆ‘ä»¬è‡ªç”±è®¾å®šæœºç¥¨ä»·æ ¼ï¼Œä½†åœ¨æˆ‘ä»¬çš„é¢„æµ‹æ¨¡å‹ä¸­ï¼Œæˆ‘ä»¬æš‚æ—¶å°†ä»·æ ¼è§†ä¸ºå·²çŸ¥å˜é‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¥ç€æˆ‘ä»¬è¦æ˜ç¡®æˆ‘ä»¬çš„ä¼˜åŒ–ç›®æ ‡ã€‚æˆ‘ä»¬æœ‰å››ä¸ªä¼˜åŒ–å˜é‡ï¼šå¤´ç­‰èˆ±ã€å•†åŠ¡èˆ±å’Œç»æµèˆ±çš„åº§ä½æ•°&lt;code&gt;X = (x, y, z)&lt;/code&gt;ï¼Œä»¥åŠæ¯å‘¨æ‰§é£èˆªç­æ•°é‡&lt;code&gt;n&lt;/code&gt;ã€‚æˆ‘ä»¬çš„ä¼˜åŒ–ç›®æ ‡ä¸ºå„ä¸ªä»“ä½çš„æ”¶å…¥çš„æ€»å’Œã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜ä¼šéœ€è¦æœ‰ä¸€äº›é¢å¤–çš„æ¡ä»¶ï¼Œè¿™äº›æ¡ä»¶åŒ…æ‹¬&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é£æœºè½½è·åˆ©ç”¨ç‡&lt;/strong&gt;ï¼šæˆ‘ä»¬è‡³å°‘åº”å½“ç”¨åˆ°&lt;code&gt;90%&lt;/code&gt;ä»¥ä¸Šçš„é£æœºè½½è·ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¯å‘¨é£è¡Œèˆªç­é‡&lt;/strong&gt;ï¼šæˆ‘ä»¬çš„æ¯å‘¨æ‰§é£èˆªç­æ•°é‡ä¸èƒ½è¶…è¿‡æœ€å¤§æ‰§é£èˆªç­æ•°é‡ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è—‰ç”±æ­¤å˜é‡æ§åˆ¶å¤šå°‘æ¶é£æœºé£è¿™æ¡èˆªçº¿ -- åªéœ€å°†æ¯æ¶é£æœºçš„æœ€å¤§é£è¡Œæ¬¡æ•°ä¹˜ä»¥é£æœºæ€»æ•°å³å¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»“ä½å®¢æµæ•°é‡&lt;/strong&gt;ï¼šæ¯ç­é£æœºæ¯å‘¨æä¾›çš„åº§ä½æ•°ä¸åº”è¶…è¿‡æ¯å‘¨ä¹˜å®¢äººæ•°ï¼Œå› ä¸ºè¶…è¿‡è¿™ä¸€é™åˆ¶å°†ä¸ä¼šäº§ç”Ÿé¢å¤–æ”¶å…¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ‰äº†è¿™äº›ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹å®ç°æˆ‘ä»¬çš„ä¼˜åŒ–æ¨¡å‹äº†ã€‚æˆ‘ä»¬é‡‡ç”¨Gurobiæ¥å®ç°æˆ‘ä»¬çš„æ–¹æ³•ã€‚é¦–å…ˆæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ¨¡å‹ï¼ŒæŒ‰ç…§æˆ‘ä»¬ä¸Šé¢æè¿°çš„ç›®æ ‡å®šä¹‰æè¿°å››ä¸ªæ•´æ•°å˜é‡ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# Create a Gurobi model&lt;/span&gt;
&lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;gp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Model&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;SeatOptimization&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Decision variables&lt;/span&gt;
&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addVar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vtype&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;gp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GRB&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;x&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addVar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vtype&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;gp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GRB&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;y&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;z&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addVar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vtype&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;gp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GRB&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;z&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addVar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vtype&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;gp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GRB&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;æ¥ç€æˆ‘ä»¬åŠ å…¥åˆšåˆšæ‰€è¯´çš„&lt;strong&gt;é£æœºç©ºé—´åˆ©ç”¨ç‡&lt;/strong&gt;çš„é™åˆ¶ã€‚åœ¨æ¸¸æˆä¸­ï¼Œæ¯ä¸ªé£æœºæœ‰ä¸€ä¸ªæœ€å¤§æ—…å®¢è½½è·ï¼Œä¸”å„ä¸ªä»“ä½ä¸å è½½è·æ¯”ä¾‹åˆ†åˆ«ä¸º&lt;code&gt;(2.5, 1.6, 1)&lt;/code&gt;ã€‚MD-83çš„æ—…å®¢è½½è·ä¸º&lt;code&gt;172&lt;/code&gt;ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ä½¿ç”¨&lt;code&gt;172Y&lt;/code&gt;çš„å…¨ç»æµèˆ±å¸ƒå±€ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨&lt;code&gt;4F10C146Y&lt;/code&gt;è¿™ç§ä¸¤ä»“å¸ƒå±€ã€‚æˆ‘è¿™é‡Œé€‰æ‹©æ·»åŠ äº†&lt;strong&gt;å½“å‰è½½è·å¿…é¡»åœ¨æŸä¸ªæœ€å°è½½è·å’Œæœ€å¤§è½½è·ä¹‹é—´&lt;/strong&gt;çš„é™åˆ¶æ¡ä»¶ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# Space constraint&lt;/span&gt;
&lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addConstr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.5&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mf"&gt;1.6&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;z&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;total_aircraft_space&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;space_constraint&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addConstr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.5&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mf"&gt;1.6&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;z&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="nb"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;total_aircraft_space&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mf"&gt;0.90&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;total_aircraft_space&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;space_constraint&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;è¿™é‡Œæˆ‘ä»¬æ·»åŠ &lt;strong&gt;æ¯å‘¨é£è¡Œèˆªç­é‡&lt;/strong&gt;çš„é™åˆ¶ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# Total flights constraint&lt;/span&gt;
&lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addConstr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;max_flights_per_week&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;total_flights_constraint&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;è¿™é‡Œæˆ‘ä»¬å®šä¹‰æ”¶å…¥å­—æ®µçš„é™åˆ¶ï¼Œå³æŸä¸ªä»“ä½çš„æ”¶å…¥ä¸ºä»“ä½æ•°é‡ * æ¯å‘¨èˆªç­æ•°é‡ * ä»“ä½åº§ä½ä»·æ ¼ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬æ·»åŠ &lt;strong&gt;ä»“ä½å®¢æµæ•°é‡&lt;/strong&gt;çš„é™åˆ¶ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addConstr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x_revenue&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;price_first_class&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addConstr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;y_revenue&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;price_business_class&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addConstr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;z_revenue&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;z&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;price_economy_class&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addConstr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x_revenue&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;daily_first_class_passengers&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;price_first_class&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addConstr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;y_revenue&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;daily_business_class_passengers&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;price_business_class&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addConstr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;z_revenue&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;daily_economy_class_passengers&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;price_economy_class&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;æœ€åï¼Œæˆ‘æˆ‘ä»¬å°†ç›®æ ‡ä¼˜åŒ–æ–¹ç¨‹å®šä¹‰ä¸ºæ€»æ”¶å…¥çš„æ€»å’Œã€‚ç”±äºæ€»æ”¶å…¥æ˜¯èˆªç­åº§ä½æ•°é‡ä¸æ¯å‘¨èˆªç­æ•°é‡çš„ä¹˜ç§¯ï¼Œå› æ­¤è¿™æ„æˆäº†ä¸€ä¸ªæ··åˆæ•´æ•°äºŒæ¬¡è§„åˆ’é—®é¢˜ï¼ˆMixed-Integer Quadratic Programming, MIQPï¼‰ã€‚åŸºäºè¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®&lt;a href="https://www.gurobi.com/documentation/current/refman/nonconvex.html"&gt;NonConvex&lt;/a&gt;ä¸º2ï¼Œå¦åˆ™æ— æ³•è¿›è¡Œæ±‚è§£ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# Objective function using auxiliary variables&lt;/span&gt;
&lt;span class="n"&gt;revenue&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x_revenue&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;y_revenue&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;z_revenue&lt;/span&gt;
&lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setObjective&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;revenue&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sense&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;gp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GRB&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MAXIMIZE&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="c1"&gt;# Maximize positive revenue&lt;/span&gt;
&lt;span class="c1"&gt;# Set NonConvex parameter to 2&lt;/span&gt;
&lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Params&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;NonConvex&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="c1"&gt;# Optimize the model&lt;/span&gt;
&lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;optimize&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;åˆ°è¿™é‡Œæˆ‘ä»¬å°±å®Œæˆäº†æ¨¡å‹çš„å®šä¹‰ï¼Œä»¥ä¸‹æ˜¯å…¨éƒ¨ä»£ç ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;gurobipy&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;gp&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;compute_best_seat_configuration&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;compute_best_seat_configuration&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="vm"&gt;__globals__&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;# Create a Gurobi model&lt;/span&gt;
    &lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;gp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Model&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;SeatOptimization&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;# Decision variables&lt;/span&gt;
    &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addVar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vtype&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;gp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GRB&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;x&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addVar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vtype&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;gp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GRB&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;y&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;z&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addVar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vtype&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;gp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GRB&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;z&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addVar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vtype&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;gp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GRB&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;# Space constraint&lt;/span&gt;
    &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addConstr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.5&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mf"&gt;1.6&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;z&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;total_aircraft_space&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;space_constraint&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addConstr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.5&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mf"&gt;1.6&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;z&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="nb"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;total_aircraft_space&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mf"&gt;0.90&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;total_aircraft_space&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;space_constraint&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;# Total flights constraint&lt;/span&gt;
    &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addConstr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;max_flights_per_week&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;total_flights_constraint&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;# auxiliary variables for min between seats and passengers&lt;/span&gt;
    &lt;span class="n"&gt;x_revenue&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addVar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vtype&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;gp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GRB&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;x_revenue&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;y_revenue&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addVar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vtype&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;gp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GRB&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;y_revenue&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;z_revenue&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addVar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vtype&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;gp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GRB&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;z_revenue&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addConstr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x_revenue&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;price_first_class&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addConstr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;y_revenue&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;price_business_class&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addConstr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;z_revenue&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;z&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;price_economy_class&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addConstr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x_revenue&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;daily_first_class_passengers&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;price_first_class&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addConstr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;y_revenue&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;daily_business_class_passengers&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;price_business_class&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addConstr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;z_revenue&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;daily_economy_class_passengers&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;price_economy_class&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;# Objective function using auxiliary variables&lt;/span&gt;
    &lt;span class="n"&gt;revenue&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x_revenue&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;y_revenue&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;z_revenue&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;ifs_per_pax&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;revenue&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;ifs_per_pax&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;z&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;
    &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setObjective&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;revenue&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sense&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;gp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GRB&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MAXIMIZE&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="c1"&gt;# Maximize positive revenue&lt;/span&gt;

    &lt;span class="c1"&gt;# Set NonConvex parameter to 2&lt;/span&gt;
    &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Params&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;NonConvex&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;

    &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;printStats&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

    &lt;span class="c1"&gt;# Optimize the model&lt;/span&gt;
    &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;optimize&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;


    &lt;span class="c1"&gt;# Get the optimal solution&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;status&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;gp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GRB&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;OPTIMAL&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;best_x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;
        &lt;span class="n"&gt;best_y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;
        &lt;span class="n"&gt;best_z&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;z&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;
        &lt;span class="n"&gt;best_n&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;
        &lt;span class="n"&gt;best_revenue&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objVal&lt;/span&gt;
        &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Best seat configuration (x, y, z):&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;best_x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;best_y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;best_z&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Best number of flights per week:&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;best_n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Maximized revenue:&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;best_revenue&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;No optimal solution found.&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;# Dispose of the model&lt;/span&gt;
    &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dispose&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;æˆ‘ä»¬å¯ä»¥è¯•ç€è¿è¡Œä¸€ä¸‹è¿™ä¸ªæ–¹æ³•&lt;code&gt;compute_best_seat_configuration&lt;/code&gt;æ¥è®¡ç®—æ–°åŠ å¡åˆ°ç€æ–¯çš„æœ€ä½³åº§ä½æ’å¸ƒã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;compute_best_seat_configuration&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;SIN - PER, MD-83&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
                                &lt;span class="n"&gt;price_first_class&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;2100&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                &lt;span class="n"&gt;price_business_class&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1100&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                &lt;span class="n"&gt;price_economy_class&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;660&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                &lt;span class="n"&gt;total_aircraft_space&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;172&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                &lt;span class="n"&gt;max_flights_per_week&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                &lt;span class="n"&gt;daily_first_class_passengers&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                &lt;span class="n"&gt;daily_business_class_passengers&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;117&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                &lt;span class="n"&gt;daily_economy_class_passengers&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;842&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;è¾“å‡ºä¸º&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Set parameter NonConvex to value 2

Statistics for modelSeatOptimization:
  Linear constraint matrix    : 0 Constrs, 0 Vars, 0 NZs
  Matrix coefficient range    : [ 0, 0 ]
  Objective coefficient range : [ 0, 0 ]
  Variable bound range        : [ 0, 0 ]
  RHS coefficient range       : [ 0, 0 ]
Gurobi Optimizer version 10.0.2 build v10.0.2rc0 (mac64[x86])

CPU model: Intel(R) Core(TM) i7-9750H CPU @ 2.60GHz
Thread count: 6 physical cores, 12 logical processors, using up to 12 threads

Optimize a model with 5 rows, 7 columns and 7 nonzeros
Model fingerprint: 0x76973cf4
Model has 3 quadratic objective terms
Model has 3 quadratic constraints
Variable types: 0 continuous, 7 integer (0 binary)
Coefficient statistics:
  Matrix range     [1e+00, 2e+00]
  QMatrix range    [7e+02, 2e+03]
  QLMatrix range   [1e+00, 1e+00]
  Objective range  [1e+00, 1e+00]
  QObjective range [1e+02, 1e+02]
  Bounds range     [0e+00, 0e+00]
  RHS range        [1e+01, 4e+06]
Found heuristic solution: objective -0.0000000
Presolve removed 4 rows and 0 columns
Presolve time: 0.00s
Presolved: 13 rows, 7 columns, 27 nonzeros
Presolved model has 3 bilinear constraint(s)
Variable types: 0 continuous, 7 integer (0 binary)

Root relaxation: objective 1.651664e+06, 6 iterations, 0.00 seconds (0.00 work units)

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time

     0     0 1651664.11    0    6   -0.00000 1651664.11      -     -    0s
H    0     0                    1009604.2400 1651664.11  63.6%     -    0s
     0     0 1647915.46    0    1 1009604.24 1647915.46  63.2%     -    0s
H    0     0                    1646069.2300 1647915.46  0.11%     -    0s
     0     0 1647915.46    0    1 1646069.23 1647915.46  0.11%     -    0s
     0     1 1647915.46    0    1 1646069.23 1647915.46  0.11%     -    0s
*    6     0               6    1647371.5700 1647371.57 -0.00%   1.0    0s

Cutting planes:
  Gomory: 1
  RLT: 1

Explored 7 nodes (18 simplex iterations) in 0.03 seconds (0.00 work units)
Thread count was 12 (of 12 available processors)

Solution count 4: 1.64737e+06 1.64607e+06 1.0096e+06 -0 

Optimal solution found (tolerance 1.00e-04)
Best objective 1.647371570000e+06, best bound 1.647371570000e+06, gap 0.0000%
Best seat configuration (x, y, z): 10.0 60.0 51.0
Best number of flights per week: 13.0
Maximized revenue: 1647371.5699999998
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ°åœ¨æ¯å‘¨13ç­çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨10F60C51Yçš„åº§ä½æ’å¸ƒèƒ½è·å¾—æœ€é«˜çš„æ”¶ç›Šã€‚ç¬”è€…åœ¨å¤šä¸ªèˆªçº¿ä¸Šä½¿ç”¨åå‘ç°ï¼Œå•æ¶é£æœºèƒ½è·å¾—&lt;code&gt;2-10%&lt;/code&gt;ä¸ç­‰çš„æå‡ï¼Œä¸”å¯ä»¥æ ¹æ®ä¸åŒçš„èˆªçº¿æ¼”å˜å‡º2-3ç§ä¸åŒçš„åº§ä½æ’å¸ƒã€‚è¿˜æ˜¯ä»¥ä¹‹å‰çš„æ–°åŠ å¡åˆ°ç€æ–¯çš„èˆªçº¿ä¸ºä¾‹ï¼Œåœ¨ä½¿ç”¨äº†ä¼˜åŒ–è¿‡åçš„&lt;code&gt;10F60C51Y&lt;/code&gt;ä¹‹åï¼Œè¿™æ¡èˆªçº¿çš„æ”¶ç›Šä¸º&lt;code&gt;$289647&lt;/code&gt;ï¼Œæ¯”åŸæ¥æ•´æ•´æå‡äº†&lt;code&gt;17%&lt;/code&gt;ï¼&lt;/p&gt;
&lt;p align="center"&gt;
  &lt;img src="https://mestrace.github.io/images/gei_li.png" /&gt;
&lt;/p&gt;

&lt;p&gt;å½“æˆ‘ä»¬ç»™é£æœºé…å¤‡äº†å®¢èˆ±æœåŠ¡çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä»æ¯ä½æ—…å®¢èº«ä¸Šèµšå–éƒ¨åˆ†æ”¶ç›Šï¼Œå› æ­¤å¯ä»¥åœ¨è®¡ç®—ä¸­åŠ å…¥å¦‚ä¸‹å‚æ•°ã€‚ç†è®ºä¸Šæ¥è¯´ï¼Œè¿™æ ·ä¼šä½¿å¾—æˆ‘ä»¬çš„æ¨¡å‹æ›´å€¾å‘äºä½¿ç”¨æ—…å®¢äººæ•°æ›´å¤šçš„åº§ä½æ’å¸ƒï¼Œä½†å®é™…ä¸Šå› ä¸ºå®¢èˆ±æœåŠ¡æ”¶å…¥å æ€»æ”¶å…¥å¤ªå°ï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šä¸ä¼šå¯¹ç»“æœæœ‰æ›´å¤šå½±å“ã€‚ä½†æ˜¯åœ¨ç«äº‰æ¯”è¾ƒæ¿€çƒˆçš„èˆªçº¿ä¸Šï¼Œå®¢èˆ±æœåŠ¡æ”¶å…¥è‡³å°‘èƒ½ç»™æˆ‘ä»¬å¸¦æ¥ä¸€å®šçš„é™ä»·ç©ºé—´ï¼Œæ‰€ä»¥è¿˜æ˜¯å€¼å¾—æŠ•å…¥çš„ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;ifs_per_pax&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;revenue&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;ifs_per_pax&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;z&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p align="center"&gt;
  &lt;img src="https://mestrace.github.io/images/gei_li.png" /&gt;
&lt;/p&gt;

&lt;p&gt;å½“ç„¶ï¼Œæˆ‘ä»¬æ‰€å‘ˆç°çš„MIQPé—®é¢˜åªæ˜¯ä¸€ä¸ªåŸºç¡€æ¨¡å‹ï¼Œå¹¶æœªè§£å†³æ‰€æœ‰é—®é¢˜ã€‚ä¸»è¦é›†ä¸­åœ¨ä¸¤ä¸ªæ–¹é¢ï¼šä»·æ ¼é¢„æµ‹å’Œåº§ä½æ•°é‡çš„å¼¹æ€§æ¡ä»¶ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é€ä¸€æ¢è®¨è¿™äº›æ–¹é¢ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œå°½ç®¡ä»·æ ¼ç”±ç©å®¶è®¾å®šï¼Œä½†æ¨¡å‹å°†å…¶è§†ä¸ºè¾“å…¥çš„å¸¸æ•°ã€‚ç„¶è€Œï¼Œåœ¨æ¸¸æˆä¸­ï¼Œæ—…å®¢å¯¹èˆªç¨‹çš„æ”¯ä»˜æ„æ„¿æ˜¯éšè—çš„å˜é‡ã€‚åœ¨ä¸€æ¡èˆªçº¿ä¸Šï¼Œå­˜åœ¨ä¸€éƒ¨åˆ†æ„¿æ„é«˜ä»·æ”¯ä»˜çš„æ—…å®¢å’Œå¦ä¸€éƒ¨åˆ†å¯¹ä»·æ ¼æ•æ„Ÿçš„æ—…å®¢ã€‚å¦å¤–ï¼Œèˆªç©ºå…¬å¸çš„å£°èª‰å’Œç«äº‰å¯¹æ‰‹çš„å½±å“ä¹Ÿä¼šå½±å“åº§ä½ä¸Šåº§ç‡ã€‚è¿™äº›å› ç´ åªèƒ½é€šè¿‡ä»·æ ¼è°ƒæ•´æ¥æ§åˆ¶ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æœ€åˆè®¾å®šçš„ä»·æ ¼å¾ˆå¯èƒ½ä¸å‡†ç¡®ï¼Œå½“æˆ‘ä»¬å¢åŠ åº§ä½åå¯èƒ½ä¼šå‘ç°ä¸Šåº§ç‡ä¸‹é™ã€‚ç¬”è€…ä¸€èˆ¬ä¼šä½¿ç”¨å¤šæ¬¡ä¿®æ­£ä»·æ ¼å’Œè°ƒæ•´åº§ä½æ•°é‡å»æ‰¾åˆ°æœ€ä¼˜çš„åº§ä½æ•°é‡ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ¨¡å‹ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®äº†ä¸€ä¸ªç¡¬æ€§çº¦æŸï¼Œå³åº§ä½æ•°é‡ä¸èƒ½è¶…è¿‡æ¯å‘¨æ—…å®¢éœ€æ±‚ã€‚ç„¶è€Œï¼Œåœ¨æ¸¸æˆä¸­ï¼Œæœ‰æ—¶å³ä½¿æŸäº›ä»“ä½æœ‰ç©ºä½ï¼Œå¢åŠ èˆªç­ä»ä¼šå¸¦æ¥æ”¶ç›Šã€‚æ­¤å¤–ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›ä¸ºæ¯ä¸ªèˆªç­å®šåˆ¶ç‹¬ç‰¹çš„åº§ä½å¸ƒå±€ã€‚è™½ç„¶åœ¨æ¸¸æˆä¸­æ“ä½œç›¸å¯¹ç®€ä¾¿ï¼Œä½†ä»éœ€è¿›è¡Œå¤šæ¬¡ç‚¹å‡»ï¼Œç¨æ˜¾ç¹çã€‚æ­¤å¤–ï¼Œåœ¨ç°å®èˆªç©ºè¿è¥ä¸­ï¼Œç”±äºåº§ä½è°ƒæ•´çš„å¤æ‚æ€§å’Œæ³•è§„é™åˆ¶ï¼Œèˆªç©ºå…¬å¸æ— æ³•éšæ„è°ƒæ•´åº§ä½æ•°é‡ã€‚å› æ­¤ï¼Œåç»­çš„ä¼˜åŒ–å¯èƒ½ä¼šå¼•å…¥åº§ä½æ•°é‡æ¾å¼›æ¡ä»¶ã€‚å³ä½¿æä¾›çš„åº§ä½æ•°è¶…è¿‡æ¯å‘¨æ—…å®¢æ•°ï¼Œä»å¯é€šè¿‡å¢åŠ èˆªç­å’Œåº§ä½æ¥å®ç°ç›ˆåˆ©ã€‚æ­¤å¤–ï¼Œå¼•å…¥å¤šç§æ ‡å‡†åŒ–çš„åº§ä½å¸ƒå±€ä¹Ÿæ˜¯å¯è¡Œçš„ï¼Œè‹¥ä¼˜åŒ–ç›®æ ‡ç›¸å·®ä¸å¤§ï¼Œåˆ™ä¼˜å…ˆè€ƒè™‘æ ‡å‡†åŒ–å¸ƒå±€ã€‚&lt;/p&gt;
&lt;p&gt;ç»¼ä¸Šæ‰€è¿°ï¼Œæœ¬æ–‡å¯¹AEè¿™æ¬¾ç»è¥æ¸¸æˆåŠå…¶æœºåˆ¶è¿›è¡Œäº†ç®€è¦ä»‹ç»ã€‚ä»èˆªçº¿æ•°æ®å’Œåº§ä½ä¼˜åŒ–çš„è§†è§’ï¼Œç¬”è€…æ¢è®¨äº†å¦‚ä½•å®ç°æœ€ä½³ç›ˆåˆ©ã€‚é€šè¿‡å»ºç«‹æ··åˆæ•´æ•°äºŒæ¬¡ä¼˜åŒ–ï¼ˆMIQPï¼‰æ¨¡å‹ï¼Œæˆ‘ä»¬èƒ½å¤Ÿç»¼åˆè€ƒè™‘å®¢æµã€æœºå‹ã€ä»·æ ¼ç­‰è¦ç´ ï¼Œåˆ¶å®šæ›´ä¸ºä¼˜åŒ–çš„åº§ä½é…ç½®ç­–ç•¥ã€‚åœ¨ç°å®ä¸–ç•Œä¸­ï¼Œåº§ä½æ’å¸ƒåœ¨èˆªç©ºå…¬å¸çš„è¿è¥ä¸­æ‰®æ¼”ç€å…³é”®è§’è‰²ã€‚é€šè¿‡ä¼˜åŒ–åº§ä½å¸ƒå±€ï¼Œèˆªç©ºå…¬å¸ä¸ä»…èƒ½æå‡è¿è¥æ•ˆç‡å’Œæ”¶å…¥ï¼Œè¿˜èƒ½æå‡ä¹˜å®¢çš„æ—…è¡Œä½“éªŒã€‚&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œæ¬¢è¿å¤§å®¶æ¥AEä¸–ç•Œé‡Œé™ªæˆ‘ç©è€ï¼æˆ‘åœ¨Realistic World R7ç­‰å¤§å®¶ï¼&lt;/p&gt;</content><category term="Computer Science"></category></entry><entry><title>è§£å†³FoobaræŒ‘æˆ˜ï¼ˆä¸‰ï¼‰</title><link href="https://mestrace.github.io/posts/2023/May/13/foobar-iv/" rel="alternate"></link><published>2023-05-13T19:00:00+08:00</published><updated>2023-10-09T22:00:00+08:00</updated><author><name>Mestrace</name></author><id>tag:mestrace.github.io,2023-05-13:/posts/2023/May/13/foobar-iv/</id><summary type="html">&lt;p&gt;æ¥ä¸Šå›ä¹¦ï¼Œæˆ‘ä»¬æ¥åˆ°äº†FoobaræŒ‘æˆ˜çš„ç¬¬å››å±‚ï¼Œé¢˜ç›®è¶Šæ¥è¶Šå›°éš¾äº†ã€‚è¿™ç¯‡æ–‡ç« ç»™å‡ºäº†Foobar Level 4 çš„ä¸¤é“é¢˜ Running with Bunnies å’Œ Distract the Trainers çš„è§£é¢˜æ€è·¯å’Œpythonä»£ç ã€‚è¿™ä¸€å±‚è¦æ±‚æˆ‘ä»¬æŒæ¡å›¾ç›¸å…³çš„ç®—æ³•ï¼ŒåŒ…æ‹¬Dijkstraï¼ŒFloyd-Warshallï¼Œä»¥åŠäºŒåˆ†å›¾å’Œç½‘ç»œæµç®—æ³•ï¼Œå¦‚åŒˆç‰™åˆ©ç®—æ³•å’ŒHopcroft-Karpç®—æ³•ã€‚&lt;/p&gt;</summary><content type="html">&lt;p&gt;Foobarç³»åˆ—å·²ç»å…¨éƒ¨å®Œæˆäº†ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹ç›®å½•è®¿é—®ï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://mestrace.github.io/posts/2023/Apr/21/foobar-ii/"&gt;è§£å†³FoobaræŒ‘æˆ˜ï¼ˆä¸€ï¼‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://mestrace.github.io/posts/2023/Apr/22/foobar-iii/"&gt;è§£å†³FoobaræŒ‘æˆ˜ï¼ˆäºŒï¼‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;è§£å†³FoobaræŒ‘æˆ˜ï¼ˆä¸‰ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;a href="https://mestrace.github.io/posts/2023/Sep/30/foobar-v/"&gt;è§£å†³FoobaræŒ‘æˆ˜ï¼ˆå››ï¼‰- ç»ˆç¯‡&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¥ä¸Šå›ä¹¦ï¼Œæˆ‘ä»¬æ¥åˆ°äº†FoobaræŒ‘æˆ˜çš„ç¬¬å››å±‚ã€‚é¢˜ç›®è¶Šæ¥è¶Šå›°éš¾äº†ã€‚&lt;/p&gt;
&lt;h2&gt;Running with Bunnies&lt;/h2&gt;
&lt;details&gt;
&lt;summary&gt;é¢˜ç›®&lt;/summary&gt;
&lt;p&gt;You and the bunny workers need to get out of this collapsing death trap of a space station -- and fast! Unfortunately, some of the bunnies have been weakened by their long work shifts and can't run very fast. Their friends are trying to help them, but this escape would go a lot faster if you also pitched in. The defensive bulkhead doors have begun to close, and if you don't make it through in time, you'll be trapped! You need to grab as many bunnies as you can and get through the bulkheads before they close. &lt;/p&gt;
&lt;p&gt;The time it takes to move from your starting point to all of the bunnies and to the bulkhead will be given to you in a square matrix of integers. Each row will tell you the time it takes to get to the start, first bunny, second bunny, ..., last bunny, and the bulkhead in that order. The order of the rows follows the same pattern (start, each bunny, bulkhead). The bunnies can jump into your arms, so picking them up is instantaneous, and arriving at the bulkhead at the same time as it seals still allows for a successful, if dramatic, escape. (Don't worry, any bunnies you don't pick up will be able to escape with you since they no longer have to carry the ones you did pick up.) You can revisit different spots if you wish, and moving to the bulkhead doesn't mean you have to immediately leave -- you can move to and from the bulkhead to pick up additional bunnies if time permits.&lt;/p&gt;
&lt;p&gt;In addition to spending time traveling between bunnies, some paths interact with the space station's security checkpoints and add time back to the clock. Adding time to the clock will delay the closing of the bulkhead doors, and if the time goes back up to 0 or a positive number after the doors have already closed, it triggers the bulkhead to reopen. Therefore, it might be possible to walk in a circle and keep gaining time: that is, each time a path is traversed, the same amount of time is used or added.&lt;/p&gt;
&lt;p&gt;Write a function of the form solution(times, time_limit) to calculate the most bunnies you can pick up and which bunnies they are, while still escaping through the bulkhead before the doors close for good. If there are multiple sets of bunnies of the same size, return the set of bunnies with the lowest worker IDs (as indexes) in sorted order. The bunnies are represented as a sorted list by worker ID, with the first bunny being 0. There are at most 5 bunnies, and time_limit is a non-negative integer that is at most 999.&lt;/p&gt;
&lt;p&gt;For instance, in the case of&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;[
  [0, 2, 2, 2, -1],  # 0 = Start
  [9, 0, 2, 2, -1],  # 1 = Bunny 0
  [9, 3, 0, 2, -1],  # 2 = Bunny 1
  [9, 3, 2, 0, -1],  # 3 = Bunny 2
  [9, 3, 2, 2,  0],  # 4 = Bulkhead
]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;and a time limit of 1, the five inner array rows designate the starting point, bunny 0, bunny 1, bunny 2, and the bulkhead door exit respectively. You could take the path:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nv"&gt;Start&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;End&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Delta&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Time&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Status&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Bulkhead&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;initially&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;open&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Bulkhead&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;closes&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Bulkhead&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;reopens&lt;/span&gt;&lt;span class="c1"&gt;; you and the bunnies exit&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;With this solution, you would pick up bunnies 1 and 2. This is the best combination for this space station hallway, so the solution is [1, 2].&lt;/p&gt;
&lt;p&gt;Test cases
Your code should pass the following test cases.
Note that it may also be run against hidden test cases not shown here.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;Input&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;solution&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;solution&lt;/span&gt;&lt;span class="o"&gt;([[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;],&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;],&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;],&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;],&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]],&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Output&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;Input&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;solution&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;solution&lt;/span&gt;&lt;span class="o"&gt;([[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;],&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;],&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;],&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;],&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]],&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Output&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;/details&gt;
&lt;p&gt;åˆšæ‹¿åˆ°é¢˜ç›®çš„æ—¶å€™æˆ‘æ˜¯ä¸€è„¸æ‡µé€¼çš„ã€‚æè¿°å®åœ¨å¤ªæŠ½è±¡äº†ä»¥è‡³äºäººç±»éš¾ä»¥ç†è§£ã€‚ä½†æ˜¯æ€»è€Œè¨€ä¹‹ï¼Œåœ¨åå¤è§‚æ‘©äº†ä¸¤å¤©ä¹‹åï¼Œæˆ‘ç»ˆäºæ˜ç™½äº†é¢˜ç›®çš„æ„æ€ã€‚ç»™å®šä¸€ä¸ª&lt;code&gt;n x n&lt;/code&gt;çš„è·ç¦»çŸ©é˜µ&lt;code&gt;times&lt;/code&gt;ï¼Œå…¶ä¸­ä½ç½®&lt;code&gt;0&lt;/code&gt;æ˜¯èµ·å§‹ç‚¹ï¼Œä½ç½®&lt;code&gt;n-1&lt;/code&gt;æ˜¯å‡ºå£ï¼Œè€Œä½ç½®&lt;code&gt;1,2...n-2&lt;/code&gt;æ˜¯æ¯åªå…”å­çš„ä½ç½®ã€‚åœ¨ç»™å®šæ—¶é—´&lt;code&gt;time_limit&lt;/code&gt;å†…ï¼Œè¦æ±‚ä½ è¥æ•‘å°½å¯èƒ½å¤šçš„å…”å­ï¼ˆå³åˆ°è¾¾å…”å­æ‰€åœ¨çš„ä½ç½®ï¼‰ï¼Œå¹¶åœ¨æ—¶é—´è€—å°½ä¹‹å‰åˆ°è¾¾å‡ºå£ï¼Œæœ€åè¾“å‡ºä½ è¥æ•‘å…”å­çš„é¡ºåºã€‚æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ç‚¹æ˜¯ä»ä¸€ä¸ªä½ç½®è·³åˆ°å¦ä¸€ä¸ªä½ç½®çš„æ—¶å€™ï¼Œæ¶ˆè€—å¯èƒ½ä¸ºè´Ÿæ•°ï¼Œå³èµ°è¿™æ¡è·¯çš„è¯æ—¶é—´åè€Œä¼šå¢åŠ ã€‚åœ¨å­˜åœ¨è´Ÿæ•°è¾¹çš„è¿™ä¸ªå‰æä¹‹ä¸‹ï¼Œå‰©ä½™æ—¶é—´ä¹Ÿå¯ä»¥çŸ­æš‚å˜ä¸ºè´Ÿæ•°ï¼Œåªè¦ä¿è¯åˆ°è¾¾å‡ºå£çš„æ—¶å€™ä¸ºéè´Ÿæ•°ï¼Œå‡ºå£å°±ä¼šé‡æ–°æ‰“å¼€ã€‚&lt;/p&gt;
&lt;p&gt;â€¦â€¦å¥½çš„ï¼Œç†è§£å®Œé¢˜ç›®ä¹‹åï¼Œè¿˜æ˜¯ä¸€è„¸æ‡µé€¼ã€‚ä¸è¿‡ï¼Œè‡³å°‘ç†è§£äº†ä»–æ˜¯ä¸ªå›¾çš„é¢˜ç›®ã€‚ä½†æ˜¯è·Ÿæ­£å¸¸å¥—è·¯å›¾é¢˜ç›®ä¸ä¸€æ ·çš„åœ°æ–¹æœ‰ä¸¤ç‚¹ã€‚é¦–å…ˆå®ƒè¦æ±‚çš„æ˜¯å°½å¯èƒ½å¤šçš„è¥æ•‘å…”å­ï¼Œè€Œä¸æ˜¯ä»€ä¹ˆæœ€çŸ­è·¯å¾„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æ’é™¤ç‹„å…‹æ–¯ç‰¹æ‹‰è¿™ç§ç®—æ³•ã€‚å…¶æ¬¡ï¼Œä»–è¿˜è¦æ±‚å‡ºè¥æ•‘çš„é¡ºåºï¼Œå› æ­¤æˆ‘ä»¬åœ¨è€ƒè™‘ç®—æ³•çš„æ—¶å€™ä¹Ÿéœ€è¦æƒ³åˆ°è¥æ•‘å…”å­çš„é¡ºåºå¯èƒ½ä¼šå½±å“ç»“æœçš„å¯èƒ½æ€§ã€‚ä¸è¿‡ï¼Œè¦æ³¨æ„çš„æ˜¯ï¼Œä»–è¦æ±‚çš„æ˜¯&lt;strong&gt;è¥æ•‘å…”å­çš„é¡ºåº&lt;/strong&gt;ï¼Œè€Œä¸æ˜¯åˆ°è¾¾æ¯ä¸ªç‚¹çš„&lt;strong&gt;è·¯å¾„é¡ºåº&lt;/strong&gt;ã€‚åœ¨èµ°çš„è¿‡ç¨‹ä¸­ï¼Œä½ ä»ç„¶å¯ä»¥é‡å¤ç»è¿‡æœ‰å…”å­çš„åœ°æ–¹ã€‚åœ¨æ‹æ¸…æ¥šè¿™ä¸¤ç‚¹ä¹‹åï¼Œæˆ‘å†³å®šç”¨backtrackè¯•ä¸€ä¸‹ã€‚æ­¤å¤–ï¼Œå› ä¸ºè·¯å¾„é¡ºåºæ— å…³ï¼Œæˆ‘ä»¬è€ƒè™‘ç”¨Floyd Warshallæ¥å‚¨å­˜æœ€çŸ­è·ç¦»çŸ©é˜µï¼Œè¿™æ ·å°±é¿å…äº†å¤„ç†è·¯å¾„çš„éº»çƒ¦é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆåŸºäºFloyd Warshallåœ¨&lt;span class="math"&gt;\(O(n^3)\)&lt;/span&gt;æ—¶é—´å†…æ±‚å‡ºæ¯ä¸ªç‚¹åˆ°æ¯ä¸ªç‚¹çš„æœ€çŸ­è·ç¦»ã€‚æ¥ç€backtrackingçš„æ ¸å¿ƒé€»è¾‘å°±æ¯”è¾ƒæš´åŠ›äº†ï¼Œæˆ‘ä»¬å°è¯•æ¯ä¸€ç§è¥æ•‘å…”å­çš„è§£å†³æ–¹æ¡ˆï¼Œå½“æˆ‘ä»¬æ¯æ¬¡åˆ°è¾¾ç»ˆç‚¹çš„æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½å°è¯•æ›´æ–°è¥æ•‘çš„å…”å­åˆ—è¡¨ã€‚è¿™é‡Œæˆ‘ä»¬å…è®¸å‰©ä½™æ—¶é—´æš‚æ—¶ä¸ºè´Ÿæ•°ï¼Œåªæœ‰æœ€ç»ˆç»“æœçš„æ—¶å€™æ‰æ£€æŸ¥å‰©ä½™æ—¶é—´æ˜¯å¦å¤§äºç­‰äºé›¶ã€‚è¿˜æœ‰ä¸€ä¸ªåŒ–ç®€æ¡ä»¶å¯ä»¥åº”ç”¨ã€‚å³å½“èŠ‚ç‚¹&lt;code&gt;i&lt;/code&gt;åˆ°è‡ªèº«çš„æ¶ˆè€—ä¸ºè´Ÿæ•°æ—¶ï¼Œæˆ‘ä»¬æ€»å¯ä»¥å‡‘åˆ°å¾ˆå¤šæ—¶é—´å»æ•‘æ‰€æœ‰å…”å­ï¼Œå› æ­¤è¿™é‡Œå¯ä»¥ç›´æ¥è¿”å›æ‰€æœ‰å…”å­çš„IDã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;floyd_warshall&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;times&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;times&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;dist&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;times&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="c1"&gt;# list.copy&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
                &lt;span class="n"&gt;dist&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dist&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;dist&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;dist&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;dist&lt;/span&gt;


&lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;None&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;solution&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;times&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;times_limit&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="c1"&gt;# reset&lt;/span&gt;
    &lt;span class="c1"&gt;# I hate python2 foobar should consider use python3&lt;/span&gt;
    &lt;span class="k"&gt;global&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;
    &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;

    &lt;span class="c1"&gt;# computes the shortest distance by floyd warshall&lt;/span&gt;
    &lt;span class="n"&gt;dist&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;floyd_warshall&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;times&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;# if there are negative cycle, we can always hit&lt;/span&gt;
    &lt;span class="c1"&gt;# it to add more time and save all bunnies&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;times&lt;/span&gt;&lt;span class="p"&gt;)):&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;dist&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;times&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;bt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dist&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;time_limit&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;visited&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bunnies&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="c1"&gt;# only for python3&lt;/span&gt;
        &lt;span class="c1"&gt;# nonlocal result&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;time_limit&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt;

        &lt;span class="k"&gt;global&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dist&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;time_limit&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bunnies&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
                &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bunnies&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# list.copy&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;visited&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt;
        &lt;span class="n"&gt;visited&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;True&lt;/span&gt;
        &lt;span class="n"&gt;bunnies&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dist&lt;/span&gt;&lt;span class="p"&gt;)):&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="k"&gt;continue&lt;/span&gt;
            &lt;span class="n"&gt;bt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dist&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;time_limit&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;dist&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;visited&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bunnies&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="n"&gt;bunnies&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pop&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="n"&gt;visited&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;False&lt;/span&gt;

    &lt;span class="n"&gt;visited&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;times&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;visited&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;True&lt;/span&gt;
    &lt;span class="c1"&gt;# try each bunny as starting point&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dist&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;bt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dist&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;times_limit&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;dist&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;visited&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;[])&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nb"&gt;sorted&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;Distract the Trainers&lt;/h2&gt;
&lt;details&gt;
&lt;summary&gt;é¢˜ç›®&lt;/summary&gt;
&lt;p&gt;The time for the mass escape has come, and you need to distract the bunny trainers so that the workers can make it out! Unfortunately for you, they're watching the bunnies closely. Fortunately, this means they haven't realized yet that the space station is about to explode due to the destruction of the LAMBCHOP doomsday device. Also fortunately, all that time you spent working as first a minion and then a henchman means that you know the trainers are fond of bananas. And gambling. And thumb wrestling.&lt;/p&gt;
&lt;p&gt;The bunny trainers, being bored, readily accept your suggestion to play the Banana Games.&lt;/p&gt;
&lt;p&gt;You will set up simultaneous thumb wrestling matches. In each match, two trainers will pair off to thumb wrestle. The trainer with fewer bananas will bet all their bananas, and the other trainer will match the bet. The winner will receive all of the bet bananas. You don't pair off trainers with the same number of bananas (you will see why, shortly). You know enough trainer psychology to know that the one who has more bananas always gets over-confident and loses. Once a match begins, the pair of trainers will continue to thumb wrestle and exchange bananas, until both of them have the same number of bananas. Once that happens, both of them will lose interest and go back to supervising the bunny workers, and you don't want THAT to happen!&lt;/p&gt;
&lt;p&gt;For example, if the two trainers that were paired started with 3 and 5 bananas, after the first round of thumb wrestling they will have 6 and 2 (the one with 3 bananas wins and gets 3 bananas from the loser). After the second round, they will have 4 and 4 (the one with 6 bananas loses 2 bananas). At that point they stop and get back to training bunnies.&lt;/p&gt;
&lt;p&gt;How is all this useful to distract the bunny trainers? Notice that if the trainers had started with 1 and 4 bananas, then they keep thumb wrestling! 1, 4 -&amp;gt; 2, 3 -&amp;gt; 4, 1 -&amp;gt; 3, 2 -&amp;gt; 1, 4 and so on.&lt;/p&gt;
&lt;p&gt;Now your plan is clear. You must pair up the trainers in such a way that the maximum number of trainers go into an infinite thumb wrestling loop!&lt;/p&gt;
&lt;p&gt;Write a function solution(banana_list) which, given a list of positive integers depicting the amount of bananas the each trainer starts with, returns the fewest possible number of bunny trainers that will be left to watch the workers. Element i of the list will be the number of bananas that trainer i (counting from 0) starts with.&lt;/p&gt;
&lt;p&gt;The number of trainers will be at least 1 and not more than 100, and the number of bananas each trainer starts with will be a positive integer no more than 1073741823 (i.e. 2^30 -1). Some of them stockpile a LOT of bananas.&lt;/p&gt;
&lt;p&gt;Test cases&lt;/p&gt;
&lt;p&gt;Your code should pass the following test cases.
Note that it may also be run against hidden test cases not shown here.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;Input&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;solution&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;solution&lt;/span&gt;&lt;span class="o"&gt;([&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;19&lt;/span&gt;&lt;span class="o"&gt;])&lt;/span&gt;
&lt;span class="n"&gt;Output&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;Input&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;solution&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;solution&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Output&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;/details&gt;
&lt;p&gt;ç»™å®šä¸€ä¸ªåˆ—è¡¨&lt;code&gt;banana_list&lt;/code&gt;ï¼Œä»£è¡¨æ¯ä¸€ä¸ªtraineræ‹¥æœ‰çš„é¦™è•‰ä¸ªæ•°ã€‚å¦‚æœä½ å°†ä¸¤ä¸ªtraineråŒ¹é…åœ¨ä¸€èµ·ï¼Œé‚£ä¹ˆä»–ä»¬å°±ä¼šç”¨é¦™è•‰æ¥æ‰“èµŒã€‚è‹¥ä¸¤ä¸ªtraineråˆ†åˆ«æœ‰&lt;code&gt;A&lt;/code&gt;å’Œ&lt;code&gt;B&lt;/code&gt;ä¸ªé¦™è•‰ï¼Œä¸”&lt;code&gt;A &amp;lt; B&lt;/code&gt;ï¼Œé‚£ä¹ˆä¸€å±€æ¸¸æˆä¹‹åä»–ä»¬çš„é¦™è•‰ä¸ªæ•°åˆ†åˆ«ä¸º&lt;code&gt;2A&lt;/code&gt;å’Œ&lt;code&gt;B - A&lt;/code&gt;ã€‚ä»–ä»¬ä¼šä¸€ç›´ç©è¿™ä¸ªæ¸¸æˆï¼Œç›´åˆ°&lt;code&gt;A = B&lt;/code&gt;æ‰ä¼šåœä¸‹æ¥ ---- æˆ–è€…æ°¸è¿œä¸ä¼šåœä¸‹æ¥ï¼Œé™·å…¥ä¸€ä¸ªæ­»å¾ªç¯ã€‚æˆ‘ä»¬éœ€éœ€è¦æ ¹æ®ä»–ä»¬çš„é¦™è•‰æ•°é‡å°½å¯èƒ½åœ°åŒ¹é…ä½¿å¾—é™·å…¥æ­»å¾ªç¯çš„traineræœ€å¤šï¼Œä¸”æ¯ä¸ªtraineræœ€å¤šåŒ¹é…ä¸€æ¬¡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªç«‹å³éœ€è¦è§£å†³çš„é—®é¢˜å°±æ˜¯ï¼Œä»€ä¹ˆæ ·çš„æ•°å­—å¯¹æ‰å¯ä»¥å½¢æˆé¢˜ç›®æè¿°çš„æ­»å¾ªç¯å‘¢ï¼Ÿç®€å•æ¨¡æ‹Ÿä¸‹å¯çŸ¥ï¼Œåªæœ‰ä¸¤ä¸ªæ•°å­—ä¹‹å’Œä¸ºäºŒæ¬¡å¹‚æ‰å¯ä»¥å½¢æˆã€‚æ­¤å¤–ï¼Œ&lt;code&gt;A&lt;/code&gt;å’Œ&lt;code&gt;B&lt;/code&gt;çš„æ•°å­—å¤§å°ä¹Ÿä¸é‡è¦ï¼ŒæŠŠä»–ä»¬é€šè¿‡&lt;code&gt;gcd&lt;/code&gt;æœ€å¤§å…¬å› æ•°åŒ–ç®€ä¹‹åçš„ç»“æœä»ç„¶ç­‰äºåŸæ¥çš„ç»“æœã€‚å¦‚&lt;code&gt;1 4&lt;/code&gt;å’Œ&lt;code&gt;2 8&lt;/code&gt;éƒ½ä¼šå¾ªç¯ï¼Œ&lt;code&gt;1 3&lt;/code&gt;å’Œ&lt;code&gt;2 6&lt;/code&gt;éƒ½ä¼šç»ˆæ­¢ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥éœ€è¦è§£å†³çš„æ˜¯å¦‚ä½•è¿›è¡ŒåŒ¹é…çš„é—®é¢˜ã€‚æœ€ç»ˆéœ€è¦é…å¯¹çš„è¿™ä¸ªæ€§è´¨ä½¿å¾—è¿™ä¸ªé¢˜ç›®çœ‹èµ·æ¥æœ‰ç‚¹åƒäºŒåˆ†å›¾çš„æœ€å¤§åŒ¹é…ï¼Œå³ç»™å®šä¸€ä¸ªå›¾ï¼Œæˆ‘ä»¬è¦æ±‚æ‰¾åˆ°æœ€å¤šçš„è¾¹ï¼Œä¸”è¿™äº›è¾¹æ²¡æœ‰å…±åŒçš„èŠ‚ç‚¹ã€‚åˆ°è¿™é‡Œè¿™é“é¢˜çš„è€ƒç‚¹æ‰æ˜æ™°èµ·æ¥ã€‚é¦–å…ˆæˆ‘ä»¬æ¥ä»‹ç»ä¸¤ä¸ªæ¦‚å¿µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;äº¤æ›¿è·¯ Alternating pathï¼šä»ä¸€ä¸ªæœªåŒ¹é…ç‚¹å‡ºå‘ï¼Œä¾æ¬¡ç»è¿‡éåŒ¹é…è¾¹ã€åŒ¹é…è¾¹ã€éåŒ¹é…è¾¹â€¦å½¢æˆçš„è·¯å¾„å«äº¤æ›¿è·¯ã€‚&lt;/li&gt;
&lt;li&gt;å¢å¹¿è·¯ Augmenting pathï¼šä»ä¸€ä¸ªæœªåŒ¹é…ç‚¹å‡ºå‘ï¼Œèµ°äº¤æ›¿è·¯ï¼Œå¦‚æœé€”å¾„å¦ä¸€ä¸ªæœªåŒ¹é…ç‚¹ï¼ˆä¸åŒ…å«å‡ºå‘ç‚¹ï¼‰ï¼Œåˆ™è¿™æ¡äº¤æ›¿è·¯ç§°ä¸ºå¢å¹¿è·¯ã€‚
å½“æˆ‘ä»¬æ‰¾åˆ°ä¸€æ¡å¢å¹¿è·¯æ—¶ï¼Œæˆ‘ä»¬åªè¦æŠŠå¢å¹¿è·¯ä¸­é—´çš„åŒ¹é…è¾¹å’ŒéåŒ¹é…è¾¹çš„èº«ä»½äº¤æ¢å³å¯ï¼Œè¿™æ ·ä¸ä¼šç ´ååŒ¹é…çš„æ€§è´¨ï¼Œä¸”ä¼šå°†åŒ¹é…çš„è¾¹çš„é•¿åº¦å¢åŠ &lt;code&gt;1&lt;/code&gt;ã€‚è€Œå¯¹äºæˆ‘ä»¬çš„æƒ…å†µæ¥è¯´ï¼Œåªè¦èƒ½å¤Ÿåˆ¤æ–­ä»æŸä¸ªç‚¹å¼€å§‹æ˜¯å¦å½¢æˆå¢å¹¿è·¯ï¼Œå³å¯çŸ¥é“è¿™ä¸ªç‚¹æ˜¯å¦å¯ä»¥è¢«åŒ…æ‹¬è¿›åŒ¹é…å¯¹é‡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯¹äºè¿™é“é¢˜æ¥è¯´ï¼Œè‹¥ä¸¤ä¸ªtrainerèƒ½å½¢æˆæ­»å¾ªç¯ï¼Œåˆ™æˆ‘ä»¬è¯´è¿™ä¸¤ä¸ªtrainerä¹‹é—´æœ‰ä¸€æ¡è¾¹ç›¸è¿ã€‚è¿™æ ·çš„è¯å¯ä»¥åœ¨&lt;code&gt;O(n^2)&lt;/code&gt;æ—¶é—´ç”Ÿæˆå›¾ã€‚æ¥ç€æˆ‘ä»¬å¯¹äºæ•´ä¸ªå›¾ä¸­çš„æ¯ä¸ªç‚¹å¼€å§‹è´ªå¿ƒåŒ¹é…å¢å¹¿è·¯ã€‚ä»ç‚¹&lt;code&gt;A&lt;/code&gt;å¼€å§‹ï¼Œè‹¥ç‚¹&lt;code&gt;A&lt;/code&gt;çš„é‚»å±…&lt;code&gt;B&lt;/code&gt;æ²¡æœ‰è¢«åŒ¹é…è¿‡ï¼Œé‚£ä¹ˆ&lt;code&gt;A&lt;/code&gt;å’Œ&lt;code&gt;B&lt;/code&gt;å°±å¯ä»¥è¢«åŒ¹é…ï¼›è‹¥&lt;code&gt;B&lt;/code&gt;å·²ç»åŒ¹é…äº†&lt;code&gt;C&lt;/code&gt;ï¼Œé‚£ä¹ˆå°±å°†&lt;code&gt;A&lt;/code&gt;å’Œ&lt;code&gt;B&lt;/code&gt;åŒ¹é…ï¼Œå¹¶é€’å½’åŒ¹é…&lt;code&gt;C&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;collections&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;defaultdict&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;gcd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;is_infinite_loop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;
    &lt;span class="n"&gt;g&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;gcd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;//=&lt;/span&gt; &lt;span class="n"&gt;g&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;total&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;solution&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;banana_list&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;banana_list&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;graph&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;defaultdict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;is_infinite_loop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;banana_list&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;banana_list&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;]):&lt;/span&gt;
                &lt;span class="n"&gt;graph&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="n"&gt;graph&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;bpm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;u&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;matched&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;visited&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;graph&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;u&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;visited&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
                &lt;span class="k"&gt;continue&lt;/span&gt;
            &lt;span class="n"&gt;visited&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;True&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;matched&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="n"&gt;bpm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;matched&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;matched&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;visited&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
                &lt;span class="n"&gt;matched&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;u&lt;/span&gt;
                &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;True&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;False&lt;/span&gt;

    &lt;span class="n"&gt;matched&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;

    &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;visited&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="kc"&gt;False&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;bpm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;matched&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;visited&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
        &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;matched&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;# print(matched)&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;-=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p align="center"&gt;
  &lt;img src="https://mestrace.github.io/images/gei_li.png" /&gt;
&lt;/p&gt;

&lt;p&gt;ä¸Šé¢è¿™ä¸ªè§£æ³•ä¸­ï¼Œä½¿ç”¨çš„æ–¹æ³•å…¶å®æ˜¯ç®€åŒ–ç‰ˆæœ¬çš„Hopcroft-Karpç®—æ³•ã€‚æœ‰å·®å¼‚çš„åœ°æ–¹æ˜¯ï¼ŒHopcroft-Karpç®—æ³•ä¼šè¾“å‡ºæ‰€æœ‰çš„è¾¹ï¼Œè€Œè¿™é“é¢˜åªéœ€è¦åˆ¤æ–­ç‚¹æ˜¯å¦å±äºä¸€ä¸ªå¢å¹¿è·¯ã€‚å¯¹äºHopcroft-Karpç®—æ³•æ¥è¯´ï¼Œé¦–å…ˆä¼šä½¿ç”¨BFSä»æ¯ä¸ªæœªåŒ¹é…çš„ç‚¹å¼€å§‹å¯»æ‰¾å¢å¹¿è·¯å¾„ã€‚ç„¶ååˆ©ç”¨ä¸æ­¤è§£æ³•ç±»ä¼¼çš„DFSç®—æ³•å¯¹äºæ¯æ¡å¢å¹¿è·¯å¾„è¿›è¡Œå¢å¹¿ï¼Œä»¥å¯»æ‰¾æœ€å¤§åŒ¹é…ã€‚&lt;/p&gt;
&lt;h2&gt;å°ç»“&lt;/h2&gt;
&lt;p&gt;ç›¸æ¯”èµ·å‰ä¸€å±‚æ¥è¯´ï¼Œç¬¬å››å±‚æ˜¾è‘—èŠ±è´¹äº†æˆ‘æ›´å¤šçš„æ—¶é—´åœ¨å¯»æ‰¾ç›¸å…³çš„ç®—æ³•ä¸Šé¢ã€‚å¥½åœ¨æ—¶é—´ç»™çš„éå¸¸å……è£•ï¼Œæ¯é“é¢˜éƒ½æœ‰360ä¸ªå°æ—¶çš„å®Œæˆæ—¶é—´ã€‚æ­¤å¤–ï¼Œè¿˜è¿›ä¸€æ­¥æ‹“å±•äº†æˆ‘å¯¹äºå›¾ç®—æ³•çš„çŸ¥è¯†è¾¹ç•Œã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æˆ‘ç ”ç©¶ç¬¬äºŒé¢˜çš„è¿‡ç¨‹ä¸­ï¼Œè¿™äº›èµ„æ–™å¯¹æˆ‘æœ‰å¾ˆå¤§çš„å¸®åŠ©ï¼Œä½ ä¹Ÿå¯ä»¥çœ‹çœ‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://zhuanlan.zhihu.com/p/391388290"&gt;æœ€å¤§æµæ±‚è§£ &amp;amp; å¢å¹¿è·¯å®šç†&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.columbia.edu/~cs2035/courses/ieor8100.F12/lec4.pdf"&gt;Columbia IEOR 8100  Matching Algorithms for Bipartite Graphs&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width &lt; 768) ? "left" : align;
        indent = (screen.width &lt; 768) ? "0em" : indent;
        linebreak = (screen.width &lt; 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js','color.js','mhchem.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</content><category term="Computer Science"></category><category term="Google Foobar"></category></entry><entry><title>è§£å†³FoobaræŒ‘æˆ˜ï¼ˆäºŒï¼‰</title><link href="https://mestrace.github.io/posts/2023/Apr/22/foobar-iii/" rel="alternate"></link><published>2023-04-22T22:00:00+08:00</published><updated>2023-10-09T22:00:00+08:00</updated><author><name>Mestrace</name></author><id>tag:mestrace.github.io,2023-04-22:/posts/2023/Apr/22/foobar-iii/</id><summary type="html">&lt;p&gt;æ¥ä¸Šå›ä¹¦ï¼Œæˆ‘ä»¬æ¥åˆ°äº†FoobaræŒ‘æˆ˜çš„ç¬¬ä¸‰å±‚ã€‚æ¯ä¸€å±‚éƒ½æ¯”ä¸Šä¸€å±‚æ›´åŠ å›°éš¾ã€‚è¿™ç¯‡æ–‡ç« ç»™å‡ºäº†Foobar Level 3 çš„ä¸‰é“é¢˜ Queue To Doï¼Œ Hey, Fuel Injection Perfection å’Œ Doomsday Fuel çš„è§£é¢˜æ€è·¯å’Œpythonä»£ç ã€‚è¿™ä¸€å±‚è¦æ±‚æˆ‘ä»¬æŒæ¡ä¸€äº›ä½è¿ç®—ï¼Œè´ªå¿ƒç®—æ³•ï¼Œçº¿æ€§ä»£æ•°å’Œæ¦‚ç‡è®ºçš„çŸ¥è¯†ã€‚&lt;/p&gt;</summary><content type="html">&lt;p&gt;Foobarç³»åˆ—å·²ç»å…¨éƒ¨å®Œæˆäº†ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹ç›®å½•è®¿é—®ï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://mestrace.github.io/posts/2023/Apr/21/foobar-ii/"&gt;è§£å†³FoobaræŒ‘æˆ˜ï¼ˆä¸€ï¼‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;è§£å†³FoobaræŒ‘æˆ˜ï¼ˆäºŒï¼‰&lt;/li&gt;
&lt;li&gt;&lt;a href="https://mestrace.github.io/posts/2023/May/13/foobar-iv/"&gt;è§£å†³FoobaræŒ‘æˆ˜ï¼ˆä¸‰ï¼‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://mestrace.github.io/posts/2023/Sep/30/foobar-v/"&gt;è§£å†³FoobaræŒ‘æˆ˜ï¼ˆå››ï¼‰- ç»ˆç¯‡&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¥ä¸Šå›ä¹¦ï¼Œæˆ‘ä»¬æ¥åˆ°äº†FoobaræŒ‘æˆ˜çš„ç¬¬ä¸‰å±‚ã€‚æ¯ä¸€å±‚éƒ½æ¯”ä¸Šä¸€å±‚æ›´åŠ å›°éš¾ã€‚ä¸å¤šåºŸè¯äº†ï¼Œæˆ‘ä»¬ç›´æ¥æ¥åšé¢˜ã€‚&lt;/p&gt;
&lt;h2&gt;Queue To Do&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;You're almost ready to make your move to destroy the LAMBCHOP doomsday device, but the security checkpoints that guard the underlying systems of the LAMBCHOP are going to be a problem. You were able to take one down without tripping any alarms, which is great! Except that as Commander Lambda's assistant, you've learned that the checkpoints are about to come under automated review, which means that your sabotage will be discovered and your cover blown -- unless you can trick the automated review system.&lt;/p&gt;
&lt;p&gt;To trick the system, you'll need to write a program to return the same security checksum that the bunny trainers would have after they would have checked all the workers through. Fortunately, Commander Lambda's desire for efficiency won't allow for hours-long lines, so the trainers at the checkpoint have found ways to quicken the pass-through rate. Instead of checking each and every worker coming through, the bunny trainers instead go over everyone in line while noting their worker IDs, then allow the line to fill back up. Once they've done that they go over the line again, this time leaving off the last worker. They continue doing this, leaving off one more worker from the line each time but recording the worker IDs of those they do check, until they skip the entire line, at which point they XOR the IDs of all the workers they noted into a checksum and then take off for lunch. Fortunately, the workers' orderly nature causes them to always line up in numerical order without any gaps.&lt;/p&gt;
&lt;p&gt;For example, if the first worker in line has ID 0 and the security checkpoint line holds three workers, the process would look like this:&lt;/p&gt;
&lt;p&gt;0 1 2 /&lt;/p&gt;
&lt;p&gt;3 4 / 5&lt;/p&gt;
&lt;p&gt;6 / 7 8&lt;/p&gt;
&lt;p&gt;where the trainers' XOR (^) checksum is 0^1^2^3^4^6 == 2.&lt;/p&gt;
&lt;p&gt;Likewise, if the first worker has ID 17 and the checkpoint holds four workers, &amp;gt; the process would look like:&lt;/p&gt;
&lt;p&gt;17 18 19 20 /&lt;/p&gt;
&lt;p&gt;21 22 23 / 24&lt;/p&gt;
&lt;p&gt;25 26 / 27 28&lt;/p&gt;
&lt;p&gt;29 / 30 31 32&lt;/p&gt;
&lt;p&gt;which produces the checksum 17^18^19^20^21^22^23^25^26^29 == 14.&lt;/p&gt;
&lt;p&gt;All worker IDs (including the first worker) are between 0 and 2000000000 inclusive, and the checkpoint line will always be at least 1 worker long.&lt;/p&gt;
&lt;p&gt;With this information, write a function solution(start, length) that will cover for the missing security checkpoint by outputting the same checksum the trainers would normally submit before lunch. You have just enough time to find out the ID of the first worker to be checked (start) and the length of the line (length) before the automatic review occurs, so your program must generate the proper checksum with just those two values.&lt;/p&gt;
&lt;p&gt;Input: solution.solution(0, 3)&lt;/p&gt;
&lt;p&gt;Output: 2&lt;/p&gt;
&lt;p&gt;Input: solution.solution(17, 4)&lt;/p&gt;
&lt;p&gt;Output: 14&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ¯ä¸ªå·¥äººæœ‰ä¸€ä¸ªæ•°å­—IDä¸”æ‰€æœ‰å·¥äººçš„æ•°å­—IDéƒ½ä¸ºè¿ç»­çš„ã€‚ä»–ä»¬æ’æˆé•¿åº¦ä¸º&lt;code&gt;n&lt;/code&gt;çš„æ–¹é˜µæ¥å—å®‰å…¨ç³»ç»Ÿçš„æ£€æŸ¥ã€‚å®‰å…¨ç³»ç»Ÿçš„æ£€æŸ¥çš„ç®—æ³•æ˜¯æŠ½æŸ¥ä¸€éƒ¨åˆ†å·¥äººçš„IDè¿›è¡Œå¼‚æˆ–è®¡ç®—æ ¡éªŒå’Œï¼šç¬¬ä¸€è¡Œé€‰æ‹©å‰&lt;code&gt;n&lt;/code&gt;ä¸ªå·¥äººçš„IDè¿›è¡Œå¼‚æˆ–ï¼ˆXORï¼‰ï¼Œç¬¬äºŒè¡Œé€‰æ‹©å‰&lt;code&gt;n - 1&lt;/code&gt;ä¸ªå·¥äººçš„IDè¿›è¡Œå¼‚æˆ–æ“ä½œï¼Œä»¥æ­¤ç±»æ¨ç›´åˆ°&lt;code&gt;n == 0&lt;/code&gt;ã€‚ç»™å®šä¸€ä¸ªå¼€å§‹çš„ID&lt;code&gt;start&lt;/code&gt;ï¼Œå’Œæ¯ä¸€è¡Œçš„é•¿åº¦&lt;code&gt;length&lt;/code&gt;ï¼Œæ±‚è¿™ä¸ªæ–¹é˜µçš„æ ¡éªŒå’Œã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶å¯ä»¥ç›´æ¥è¿›è¡Œæ¨¡æ‹Ÿï¼Œä½†æ˜¯å®é™…ä¸Šè¿™é“é¢˜æ˜¯æœ‰è§„å¾‹å¯å¾ªçš„ã€‚åœ¨&lt;a href="https://mestrace.github.io/posts/2023/Mar/12/2588-count-the-number-of-beautiful-subarrays/"&gt;Leetcode 2588é¢˜è§£&lt;/a&gt;æˆ‘ä»¬åˆ†æäº†XORçš„ä¸€äº›æ€§è´¨ã€‚å…¶ä¸­ï¼Œå•ä½å…ƒæ€§è´¨å‘Šè¯‰æˆ‘ä»¬ä»»ä½•æ•°å­—&lt;code&gt;X XOR X = 0&lt;/code&gt;ï¼Œ&lt;code&gt;X XOR 0 = X&lt;/code&gt;ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦æ±‚è¿ç»­æ•°åˆ—çš„å¼‚æˆ–&lt;code&gt;XOR([i:j])&lt;/code&gt;çš„æ—¶å€™ï¼Œå®é™…ä¸Šç­‰ä»·äº&lt;code&gt;XOR([1:j]) ^ XOR([1:i - 1])&lt;/code&gt;ã€‚è€Œå½“æˆ‘ä»¬è®¡ç®—ä¸€ä¸ªè¿ç»­æ•°åˆ—çš„å¼‚æˆ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªè§„å¾‹ã€‚å°±æ‹¿&lt;code&gt;[1,n]&lt;/code&gt;æ¥ä¸¾ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;
&lt;span class="n"&gt;XOR&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;):&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;åœ¨è¿™é‡Œæˆ‘ä»¬å‘ç°ï¼Œ&lt;code&gt;XOR([1:n])&lt;/code&gt;çš„ç»“æœæ˜¯æ ¹æ®&lt;code&gt;n % 4&lt;/code&gt;æ¥ä»¥ä¸€ç§è§„å¾‹è¿›è¡Œå¾ªç¯çš„ï¼Œå› æ­¤å¯ä»¥å¿«é€Ÿæ±‚å¾—æ‰€æœ‰çš„æ ¡éªŒå’Œã€‚&lt;/p&gt;
&lt;h3&gt;ä»£ç &lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;xor&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;rem&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;rem&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;
    &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;rem&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
    &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;rem&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;  &lt;span class="c1"&gt;# rem == 3&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;solution&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;length&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;checksum&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;

    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;length&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;first&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;length&lt;/span&gt;
        &lt;span class="n"&gt;last&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;first&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;length&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
        &lt;span class="n"&gt;checksum&lt;/span&gt; &lt;span class="o"&gt;^=&lt;/span&gt; &lt;span class="n"&gt;xor&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;last&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;^&lt;/span&gt; &lt;span class="n"&gt;xor&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;first&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;checksum&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;Fuel Injection Perfection&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Commander Lambda has asked for your help to refine the automatic quantum antimatter fuel injection system for the LAMBCHOP doomsday device. It's a great chance for you to get a closer look at the LAMBCHOP -- and maybe sneak in a bit of sabotage while you're at it -- so you took the job gladly. &lt;/p&gt;
&lt;p&gt;Quantum antimatter fuel comes in small pellets, which is convenient since the many moving parts of the LAMBCHOP each need to be fed fuel one pellet at a time. However, minions dump pellets in bulk into the fuel intake. You need to figure out the most efficient way to sort and shift the pellets down to a single pellet at a time. &lt;/p&gt;
&lt;p&gt;The fuel control mechanisms have three operations: &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Add one fuel pellet&lt;/li&gt;
&lt;li&gt;Remove one fuel pellet&lt;/li&gt;
&lt;li&gt;Divide the entire group of fuel pellets by 2 (due to the destructive energy released when a quantum antimatter pellet is cut in half, the safety controls will only allow this to happen if there is an even number of pellets)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Write a function called solution(n) which takes a positive integer as a string and returns the minimum number of operations needed to transform the number of pellets to 1. The fuel intake control panel can only display a number up to 309 digits long, so there won't ever be more pellets than you can express in that many digits.&lt;/p&gt;
&lt;p&gt;For example:&lt;/p&gt;
&lt;p&gt;solution(4) returns 2: 4 -&amp;gt; 2 -&amp;gt; 1&lt;/p&gt;
&lt;p&gt;solution(15) returns 5: 15 -&amp;gt; 16 -&amp;gt; 8 -&amp;gt; 4 -&amp;gt; 2 -&amp;gt; 1&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç»™å®š&lt;code&gt;n&lt;/code&gt;ä¸ªé¢—ç²’çš„é‡å­åç‰©è´¨ç‡ƒæ–™ï¼ˆï¼Ÿï¼‰ï¼Œæˆ‘ä»¬è¦æŠŠä»–å‡å°‘åˆ°&lt;code&gt;1&lt;/code&gt;ã€‚æˆ‘ä»¬å¯ä»¥æœ‰ä¸‰ç§æ“ä½œï¼šå¢åŠ ä¸€ä¸ªé¢—ç²’ï¼Œå‡å°‘ä¸€ä¸ªé¢—ç²’ï¼Œå’Œå°†é¢—ç²’æ€»æ•°é™¤&lt;code&gt;2&lt;/code&gt;ï¼ˆä»…å½“å¯ä»¥æ•´é™¤çš„æ—¶å€™ï¼‰ã€‚æ±‚æœ€å°‘éœ€è¦å¤šå°‘ä¸ªæ“ä½œæ•°æ‰å¯ä»¥å®Œæˆã€‚&lt;/p&gt;
&lt;p&gt;ä¸€å¼€å§‹æˆ‘æƒ³çš„æ˜¯&lt;code&gt;DP&lt;/code&gt;æ¥è®¡ç®—æœ€å°å¯èƒ½çš„æ“ä½œæ•°é‡ï¼Œä½†æ˜¯ä¸€çœ‹æ•°æ®èŒƒå›´&lt;code&gt;1e308&lt;/code&gt;å°±ç–¯ç‹‚æŒ å¤´ã€‚æ— è®ºå¦‚ä½•æˆ‘ä»¬ä¸èƒ½æŠŠæ‰€æœ‰&lt;code&gt;n&lt;/code&gt;å¯¹åº”çš„æœ€å°æ“ä½œæ•°é‡éƒ½å­˜ä¸‹æ¥å§ã€‚ä½†æ˜¯è¿™é“é¢˜è¿˜æ˜¯æœ‰ä¸€äº›&lt;code&gt;DP&lt;/code&gt;çš„æ€§è´¨åœ¨çš„ï¼Œå› æ­¤æˆ‘ä»¬è€ƒè™‘æ˜¯å¦èƒ½æœ‰æŸç§è´ªå¿ƒçš„æ–¹å¼è¿›è¡Œè®¡ç®—ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿå¾—åˆ°ï¼Œè¦å°½å¯èƒ½å¤šçš„è¿›è¡Œç¬¬ä¸‰ä¸ªæ“ä½œï¼Œä¹Ÿå°±æ˜¯æ•´é™¤&lt;code&gt;2&lt;/code&gt;ï¼Œæ‰èƒ½æœ€å¿«å°†&lt;code&gt;n&lt;/code&gt;å‡å°‘åˆ°&lt;code&gt;1&lt;/code&gt;ã€‚è€Œå‰ä¸¤ä¸ªæ“ä½œ&lt;code&gt;+/- 1&lt;/code&gt;éƒ½æ˜¯ä¸ºäº†ç¬¬ä¸‰ä¸ªæ“ä½œæœåŠ¡çš„ã€‚å®é™…ä¸Šï¼Œè¦æƒ³ä¸€ä¸ªæ•°å­—èƒ½å¤Ÿæ•´é™¤2ï¼Œæˆ‘ä»¬åº”è¯¥çœ‹è¿™ä¸ªæ•°å­—æœ€åä¸€ä¸ªæ¯”ç‰¹æ˜¯å¦ä¸º&lt;code&gt;0&lt;/code&gt;ã€‚è€ŒåŠ å‡æ“ä½œåˆ™èƒ½è®©æˆ‘ä»¬åœ¨æœ€åä¸€ä¸ªæ¯”ç‰¹ä½ä¸º&lt;code&gt;1&lt;/code&gt;çš„æ—¶å€™æŠŠå®ƒå˜æˆ&lt;code&gt;0&lt;/code&gt;ã€‚æˆ‘ä»¬åªç”¨æœ€åå‡ ä¸ªbitæ¥ä¸¾ä¸ªä¾‹å­ï¼šå‡å¦‚ä¸€ä¸ªæ•°å­—ä¸º&lt;code&gt;...000001&lt;/code&gt;çš„è¯ï¼Œæˆ‘ä»¬åº”è¯¥å‡&lt;code&gt;1&lt;/code&gt;æ‰å¯ä»¥è®©ä»–æ›´å¿«å˜ä¸º&lt;code&gt;1&lt;/code&gt;ï¼›è€Œå‡å¦‚ä¸€ä¸ªæ•°å­—ä¸º&lt;code&gt;...11111&lt;/code&gt;çš„è¯ï¼Œæˆ‘ä»¬åº”è¯¥åŠ &lt;code&gt;1&lt;/code&gt;æ‰èƒ½è®©ä»–æ›´å¿«å˜ä¸º&lt;code&gt;1&lt;/code&gt;ã€‚è¿™é‡Œæˆ‘ä»¬åªè¦è´ªå¿ƒçš„çœ‹æœ€åä¸¤ä½æ˜¯&lt;code&gt;01&lt;/code&gt;æˆ–è€…&lt;code&gt;11&lt;/code&gt;å°±å¯ä»¥ã€‚ä¸€ä¸ªç‰¹æ®Šæƒ…å†µæ˜¯&lt;code&gt;n = 3 = 0b11&lt;/code&gt;çš„æ—¶å€™ï¼Œæˆ‘ä»¬åº”è¯¥å‡ä¸€å¹¶ä½ç§»å¾—åˆ°æœ€ç»ˆç»“æœã€‚&lt;/p&gt;
&lt;h3&gt;ä»£ç &lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;solution&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;operations&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;

    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="c1"&gt;# is even, end is 0&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;//=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
        &lt;span class="c1"&gt;# end is 01 or special case is &amp;#39;11&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;-=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
        &lt;span class="c1"&gt;# end is &amp;#39;11&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
        &lt;span class="n"&gt;operations&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;operations&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;Doomsday Fuel&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Making fuel for the LAMBCHOP's reactor core is a tricky process because of the exotic matter involved. It starts as raw ore, then during processing, begins randomly changing between forms, eventually reaching a stable form. There may be multiple stable forms that a sample could ultimately reach, not all of which are useful as fuel. &lt;/p&gt;
&lt;p&gt;Commander Lambda has tasked you to help the scientists increase fuel creation efficiency by predicting the end state of a given ore sample. You have carefully studied the different structures that the ore can take and which transitions it undergoes. It appears that, while random, the probability of each structure transforming is fixed. That is, each time the ore is in 1 state, it has the same probabilities of entering the next state (which might be the same state).  You have recorded the observed transitions in a matrix. The others in the lab have hypothesized more exotic forms that the ore can become, but you haven't seen all of them.&lt;/p&gt;
&lt;p&gt;Write a function solution(m) that takes an array of array of nonnegative ints representing how many times that state has gone to the next state and return an array of ints for each terminal state giving the exact probabilities of each terminal state, represented as the numerator for each state, then the denominator for all of them at the end and in simplest form. The matrix is at most 10 by 10. It is guaranteed that no matter which state the ore is in, there is a path from that state to a terminal state. That is, the processing will always eventually end in a stable state. The ore starts in state 0. The denominator will fit within a signed 32-bit integer during the calculation, as long as the fraction is simplified regularly. &lt;/p&gt;
&lt;p&gt;For example, consider the matrix m:&lt;/p&gt;
&lt;p&gt;[&lt;/p&gt;
&lt;p&gt;[0,1,0,0,0,1],  # s0, the initial state, goes to s1 and s5 with equal probability&lt;/p&gt;
&lt;p&gt;[4,0,0,3,2,0],  # s1 can become s0, s3, or s4, but with different probabilities&lt;/p&gt;
&lt;p&gt;[0,0,0,0,0,0],  # s2 is terminal, and unreachable (never observed in practice)&lt;/p&gt;
&lt;p&gt;[0,0,0,0,0,0],  # s3 is terminal&lt;/p&gt;
&lt;p&gt;[0,0,0,0,0,0],  # s4 is terminal&lt;/p&gt;
&lt;p&gt;[0,0,0,0,0,0],  # s5 is terminal&lt;/p&gt;
&lt;p&gt;]&lt;/p&gt;
&lt;p&gt;So, we can consider different paths to terminal states, such as:&lt;/p&gt;
&lt;p&gt;s0 -&amp;gt; s1 -&amp;gt; s3&lt;/p&gt;
&lt;p&gt;s0 -&amp;gt; s1 -&amp;gt; s0 -&amp;gt; s1 -&amp;gt; s0 -&amp;gt; s1 -&amp;gt; s4&lt;/p&gt;
&lt;p&gt;s0 -&amp;gt; s1 -&amp;gt; s0 -&amp;gt; s5&lt;/p&gt;
&lt;p&gt;Tracing the probabilities of each, we find that&lt;/p&gt;
&lt;p&gt;s2 has probability 0&lt;/p&gt;
&lt;p&gt;s3 has probability 3/14&lt;/p&gt;
&lt;p&gt;s4 has probability 1/7&lt;/p&gt;
&lt;p&gt;s5 has probability 9/14&lt;/p&gt;
&lt;p&gt;So, putting that together, and making a common denominator, gives an answer in the form of&lt;/p&gt;
&lt;p&gt;[s2.numerator, s3.numerator, s4.numerator, s5.numerator, denominator] which is&lt;/p&gt;
&lt;p&gt;[0, 3, 2, 9, 14].&lt;/p&gt;
&lt;p&gt;Input: solution([[0, 2, 1, 0, 0], [0, 0, 0, 3, 4], [0, 0, 0, 0, 0], [0, 0, 0, 0,0], [0, 0, 0, 0, 0]])&lt;/p&gt;
&lt;p&gt;Output: [7, 6, 8, 21]&lt;/p&gt;
&lt;p&gt;Input: solution([[0, 1, 0, 0, 0, 1], [4, 0, 0, 3, 2, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0]])&lt;/p&gt;
&lt;p&gt;Output: [0, 3, 2, 9, 14]&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç»™å®šä¸€ä¸ª&lt;code&gt;n x n&lt;/code&gt;çš„çŸ©é˜µ&lt;code&gt;m&lt;/code&gt;ã€‚å…¶ä¸­ï¼Œ&lt;code&gt;m[i][j]&lt;/code&gt;æ˜¯çŸ¿çŸ³ç”±çŠ¶æ€&lt;code&gt;s_i&lt;/code&gt;å˜åˆ°&lt;code&gt;s_j&lt;/code&gt;çš„å®éªŒè§‚å¯Ÿæ¬¡æ•°ã€‚çŸ¿çŸ³æ°¸è¿œä»çŠ¶æ€&lt;code&gt;s_0&lt;/code&gt;å¼€å§‹å¹¶åœ¨æœ‰é™æ—¶é—´å†…æœ€ç»ˆå˜åŒ–åˆ°æŸä¸ªç¨³å®šæ€&lt;code&gt;s_t&lt;/code&gt;ä¸Šã€‚è¦æ±‚æœ€ç»ˆè½¬ç§»åˆ°æŸä¸ªç¨³å®šæ€çš„æ¦‚ç‡ã€‚æ­¤å¤–è¿˜è¦å¤„ç†åˆ†æ¯å’Œåˆ†å­çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;çœ‹åˆ°é¢˜ç›®çš„æ—¶å€™æˆ‘çš„å¿ƒæ€æ˜¯å´©æºƒçš„ã€‚å¦‚æœç”¨DFSæ¥åšï¼ŒçŠ¶æ€å¯èƒ½æœ‰å¾ªç¯ã€‚æ­¤å¤–æˆ‘ä»¬ä¸ç¡®å®šä»–ä»€ä¹ˆæ—¶å€™æ”¶æ•›åˆ°æœ€ç»ˆæ€ã€‚ä½†æ˜¯çœ‹åˆ°æ¦‚ç‡å’ŒçŠ¶æ€è½¬ç§»ï¼Œæ„Ÿè§‰å¥½åƒæœ‰ä¸€äº›ç†Ÿæ‚‰çš„æ„Ÿè§‰ã€‚æ­¤å¤–ï¼Œé¢˜ç›®è¿˜æåˆ°çŠ¶æ€è½¬ç§»è™½ç„¶æ˜¯ä¸€ä¸ªéšæœºçš„è¿‡ç¨‹ï¼Œä½†æ˜¯ä»ä¸€ä¸ªçŠ¶æ€è½¬ç§»åˆ°å¦ä¸€ä¸ªçŠ¶æ€çš„æ¦‚ç‡æ˜¯å›ºå®šçš„ã€‚è¿™æ„å‘³ç€ï¼Œæ¯ä¸ªçŠ¶æ€è½¬ç§»éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿‡ç¨‹ï¼Œå³è½¬ç§»åˆ°æŸä¸ªçŠ¶æ€çš„æ¦‚ç‡åªå–å†³äºä¸Šä¸€ä¸ªçŠ¶æ€ã€‚å€Ÿè¿™äº›å…³é”®è¯ï¼Œæˆ‘å¾ˆå¿«æœç´¢åˆ°äº†ä¸€ä¸ªç›¸å…³çš„ä¸œè¥¿ï¼šé©¬å°”ç§‘å¤«é“¾ã€‚ã€‚ã€‚GoogleçœŸæœ‰ä½ çš„ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;p&gt;é©¬å°”ç§‘å¤«é“¾ï¼ˆMarkov chainï¼‰æè¿°äº†ä¸€ä¸ªç‹¬ç«‹çš„çŠ¶æ€è½¬ç§»è¿‡ç¨‹ã€‚å³æˆ‘ä»¬åˆšåˆšæ‰€è¯´çš„ï¼Œç»™å®šä¸€ç³»åˆ—çŠ¶æ€ï¼Œåœ¨çŠ¶æ€å’ŒçŠ¶æ€ä¹‹é—´çš„éšæœºè¿‡ç¨‹çš„å‘ç”Ÿæ¦‚ç‡åªå–å†³äºå½“å‰æ‰€å¤„çš„çŠ¶æ€ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜æœ‰ä¸ªå„¿å­ï¼Œå¸æ”¶é©¬å°”ç§‘å¤«é“¾ï¼ˆAbsorbing Markov chainï¼‰ã€‚æŒ‡çš„æ˜¯åœ¨é©¬å°”ç§‘å¤«é“¾çš„åŸºç¡€ä¸Šï¼Œå­˜åœ¨ä¸€äº›å¸æ”¶çŠ¶æ€ï¼ˆAbsorbing stateï¼‰ã€‚ä¸€æ—¦çŠ¶æ€è½¬ç§»è¿›å…¥äº†å¸æ”¶çŠ¶æ€ï¼Œå°±ä¼šä¸€ç›´ä¿æŒåœ¨å¸æ”¶çŠ¶æ€ä¸­ã€‚è€Œå¯¹äºåœ¨æœ‰é™æ—¶é—´æ”¶æ•›çš„å¸æ”¶é©¬å°”ç§‘å¤«é“¾çš„å„ä¸ªçŠ¶æ€è½¬ç§»åˆ°å¸æ”¶çŠ¶æ€çš„æœŸæœ›æ¦‚ç‡ï¼Œå¯ä»¥é€šè¿‡ä¸€ç³»åˆ—çŸ©é˜µè®¡ç®—å¾—å‡ºã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬é€šè¿‡ç»™å®šçš„å®éªŒè§‚å¯Ÿè®°å½•&lt;code&gt;m&lt;/code&gt;å¯ä»¥è®¡ç®—å‡ºä¸€ä¸ªæ ‡å‡†çš„é©¬å°”ç§‘å¤«é“¾çš„çŠ¶æ€è½¬ç§»æ¦‚ç‡çŸ©é˜µã€‚ç®€å•å¯çŸ¥ï¼Œ&lt;code&gt;s_i -&amp;gt; s_j&lt;/code&gt;çš„æ¦‚ç‡ä¸º&lt;code&gt;m[i][j] / sum(m[i])&lt;/code&gt;ã€‚æ­¤å¤–ï¼Œå¯¹äº&lt;code&gt;sum(m[i]) == 0&lt;/code&gt;çš„æƒ…å†µï¼Œ&lt;code&gt;i&lt;/code&gt;åˆ™æ˜¯ä¸€ä¸ªå¸æ”¶çŠ¶æ€ã€‚å› ä¸ºåœ¨è¿™ä¸ªçŠ¶æ€ä¸‹ï¼Œ&lt;code&gt;s_i&lt;/code&gt;ä¸ä¼šç§»åŠ¨åˆ°ä»»ä½•å…¶ä»–çŠ¶æ€å»ï¼Œä¹Ÿè‡ªç„¶æ²¡æœ‰å®éªŒè§‚å¯Ÿç°è±¡ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦æŠŠæ¦‚ç‡çŸ©é˜µè½¬æ¢æˆä¸€ä¸ªå¸æ”¶é©¬å°”ç§‘å¤«é“¾çš„æ ‡å‡†è½¬ç§»çŸ©é˜µï¼Œå‡è®¾æˆ‘ä»¬æœ‰&lt;code&gt;n&lt;/code&gt;ä¸ªå¸æ”¶çŠ¶æ€å’Œ&lt;code&gt;m&lt;/code&gt;ä¸ªéå¸æ”¶çŠ¶æ€ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠçŠ¶æ€è½¬ç§»çŸ©é˜µçš„ç´¢å¼•é‡å†™ä»¥å˜æˆä¸‹é¢çš„å½¢å¼ã€‚&lt;/p&gt;
&lt;div class="math"&gt;$$
P = \begin{bmatrix}
I_n &amp;amp; 0_{n \times m} \\
R_{m \times n} &amp;amp; Q_m
\end{bmatrix}
$$&lt;/div&gt;
&lt;p&gt;å…¶ä¸­&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å•ä½çŸ©é˜µ&lt;span class="math"&gt;\(I_n\)&lt;/span&gt;ä»£è¡¨äº†&lt;code&gt;n&lt;/code&gt;ä¸ªå¸æ”¶çŠ¶æ€äº’ç›¸è½¬ç§»çš„æ¦‚ç‡ã€‚&lt;/li&gt;
&lt;li&gt;0çŸ©é˜µ&lt;span class="math"&gt;\(0_{n \times m}\)&lt;/span&gt;ä»£è¡¨äº†&lt;code&gt;n&lt;/code&gt;ä¸ªå¸æ”¶çŠ¶æ€è½¬ç§»åˆ°&lt;code&gt;m&lt;/code&gt;ä¸ªéå¸æ”¶çŠ¶æ€çš„æ¦‚ç‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;span class="math"&gt;\(R_{m \times n}\)&lt;/span&gt;ä»£è¡¨äº†&lt;code&gt;m&lt;/code&gt;ä¸ªéå¸æ”¶çŠ¶æ€è½¬ç§»åˆ°&lt;code&gt;n&lt;/code&gt;ä¸ªå¸æ”¶çŠ¶æ€çš„æ¦‚ç‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;span class="math"&gt;\(Q_m\)&lt;/span&gt;ä»£è¡¨äº†&lt;code&gt;m&lt;/code&gt;ä¸ªéå¸æ”¶çŠ¶æ€äº’ç›¸è½¬ç§»çš„æ¦‚ç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç»è¿‡æœ‰é™æ¬¡æ•°çš„è½¬ç§»ï¼Œæˆ‘ä»¬æœ€ç»ˆå¯ä»¥è½¬ç§»åˆ°ä¸€ä¸ªç»ˆæ€ï¼Œå¯ä»¥è¡¨ç¤ºä¸º&lt;/p&gt;
&lt;div class="math"&gt;$$
\bar{P} = \begin{bmatrix}
I_n &amp;amp; 0_{n\times m} \\
F_m R_{m \times n} &amp;amp; 0_m
\end{bmatrix}
$$&lt;/div&gt;
&lt;p&gt;å…¶ä¸­åŸºæœ¬çŸ©é˜µä»£è¡¨äº†ç”±éå¸æ”¶çŠ¶æ€æ”¶æ•›åˆ°è½¬ç§»å¸æ”¶çŠ¶æ€çš„æ¦‚ç‡çš„ä¹˜æ•°ï¼Œå¯è¡¨ç¤ºä¸º&lt;/p&gt;
&lt;div class="math"&gt;$$
F = (I - Q)^{-1}
$$&lt;/div&gt;
&lt;p&gt;æœ€åå·¦ä¸‹è§’çš„éƒ¨åˆ†æ‰¾åˆ°&lt;code&gt;s_0&lt;/code&gt;æ‰€åœ¨çš„è¡Œï¼Œå°±æ˜¯&lt;code&gt;s_0&lt;/code&gt;è½¬ç§»åˆ°å¸æ”¶çŠ¶æ€çš„æœŸæœ›æ¦‚ç‡äº†ã€‚&lt;/p&gt;
&lt;p&gt;ç­‰ä¸‹ï¼Œè¿˜æ²¡å®Œã€‚æˆ‘ä»¬è¿˜è¦æŠŠç»“æœè½¬æ¢ä¸ºåˆ†æ•°å½¢å¼å¹¶è¾“å‡ºã€‚è¿™é‡Œæˆ‘ä»¬ç®€å•ç”¨&lt;code&gt;fractions&lt;/code&gt;è¿›è¡Œå¤„ç†ã€‚è®¡ç®—æ‰€æœ‰åˆ†æ¯çš„æœ€å°å…¬å€æ•°å³å¯ã€‚&lt;/p&gt;
&lt;h3&gt;ä»£ç &lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;fractions&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Fraction&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;gcd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;lcm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;//&lt;/span&gt; &lt;span class="n"&gt;gcd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;convert_to_common_denominator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;arr&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;denominators&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;Fraction&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;limit_denominator&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;denominator&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;arr&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;common_denominator&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;denominators&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;common_denominator&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;lcm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;common_denominator&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;numerators&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;common_denominator&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;Fraction&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;limit_denominator&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;arr&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;numerators&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;common_denominator&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;solution&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="c1"&gt;# the sum of the rows&lt;/span&gt;
    &lt;span class="n"&gt;row_sum&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;axis&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;# index of transient states&lt;/span&gt;
    &lt;span class="n"&gt;transient_states&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;row_sum&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;nonzero&lt;/span&gt;&lt;span class="p"&gt;()[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="c1"&gt;# index of absorbing states&lt;/span&gt;
    &lt;span class="n"&gt;absorbing_states&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;where&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;row_sum&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;absorbing_states&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;absorbing_states&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;absorbing_states&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
    &lt;span class="c1"&gt;# compute the intial markov probability&lt;/span&gt;
    &lt;span class="n"&gt;markov&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;matrix&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dtype&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;nz&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;transient_states&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;markov&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;nz&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;markov&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;nz&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;row_sum&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;nz&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
    &lt;span class="c1"&gt;# construct based on the standard form&lt;/span&gt;
    &lt;span class="c1"&gt;# R =&amp;gt; rows transitent cols absorbing&lt;/span&gt;
    &lt;span class="n"&gt;R&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;markov&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;transient_states&lt;/span&gt;&lt;span class="p"&gt;][:,&lt;/span&gt; &lt;span class="n"&gt;absorbing_states&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="c1"&gt;# Q =&amp;gt; rows transient cols transient&lt;/span&gt;
    &lt;span class="n"&gt;Q&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;markov&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;transient_states&lt;/span&gt;&lt;span class="p"&gt;][:,&lt;/span&gt; &lt;span class="n"&gt;transient_states&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="c1"&gt;# F =&amp;gt; fundamental matrix (I - Q)^(-1)&lt;/span&gt;
    &lt;span class="n"&gt;F&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;identity&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;transient_states&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;Q&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;# L =&amp;gt; Limiting matrix part&lt;/span&gt;
    &lt;span class="n"&gt;L&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;F&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;R&lt;/span&gt;

    &lt;span class="c1"&gt;# the first row is the result we want&lt;/span&gt;
    &lt;span class="n"&gt;state_zero_row&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;L&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;where&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;transient_states&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]])&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;flatten&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

    &lt;span class="c1"&gt;# convert based on the requred form by the problem&lt;/span&gt;
    &lt;span class="n"&gt;numerators&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;denominator&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;convert_to_common_denominator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;state_zero_row&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;numerators&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;denominator&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;numerators&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;å°ç»“&lt;/h2&gt;
&lt;p&gt;æ€»çš„æ¥è¯´ï¼Œç¬¬ä¸‰å±‚çš„éš¾åº¦æå‡å¾—å¾ˆå¿«ã€‚ç‰¹åˆ«æ˜¯æœ€åä¸€é¢˜è¦æ±‚æˆ‘ä»¬æŒæ¡é©¬å°”ç§‘å¤«é“¾çš„ç›¸å…³è®¡ç®—å’Œä¸€äº›çŸ©é˜µä¹˜æ³•çš„è®¡ç®—ã€‚è¿˜æ˜¯ç›¸å½“çš„æœ‰æŒ‘æˆ˜æ€§çš„ã€‚å®Œæˆè¿™ä¸€ç« èŠ‚ä¹‹åï¼Œæˆ‘è¿˜å¡«å…¥äº†è‡ªå·±çš„ä¸ªäººè”ç³»æ–¹å¼å’ŒLinkedIné¡µé¢ã€‚æ®ç½‘ä¸Šè¯´ï¼Œå¯èƒ½ä¼šæœ‰recruiterç›´æ¥è”ç³»æˆ‘ã€‚ä¸è¿‡ç›®å‰çœ‹è¿™ä¸ªå¤§ç¯å¢ƒï¼Œä¼°è®¡ä¹Ÿåªæ˜¯é¥ä¸å¯åŠçš„æ¢¦æƒ³ç½¢äº†ï¼ˆç¬‘ï¼‰ã€‚æ¥ä¸‹æ¥è¿˜æœ‰ä¸¤å±‚æŒ‘æˆ˜ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æˆ‘åˆ°åº•èƒ½èµ°å¤šè¿œæŠŠã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç ”ç©¶ç¬¬ä¸‰é¢˜çš„è¿‡ç¨‹ä¸­ï¼Œè¿™äº›èµ„æ–™å¯¹æˆ‘æœ‰å¾ˆå¤§çš„å¸®åŠ©ï¼Œä½ ä¹Ÿå¯ä»¥çœ‹çœ‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://youtu.be/BsOkOaB8SFk"&gt;Youtube - Markov Chains - Part 8 - Standard Form for Absorbing Markov Chains&lt;/a&gt; å¼ºçƒˆå»ºè®®çœ‹å®ŒPart 7ï¼Œ8 å’Œ 9ï¼Œè¿™ä¼šæ˜¯ä½ äººç”Ÿä¸­èŠ±çš„æœ€å€¼çš„45åˆ†é’Ÿã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.cnblogs.com/guolei/p/3504931.html"&gt;Lei Blog - å¸æ”¶é©¬å°”å¯å¤«é“¾&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width &lt; 768) ? "left" : align;
        indent = (screen.width &lt; 768) ? "0em" : indent;
        linebreak = (screen.width &lt; 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js','color.js','mhchem.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</content><category term="Computer Science"></category><category term="Google Foobar"></category></entry><entry><title>è§£å†³FoobaræŒ‘æˆ˜ï¼ˆä¸€ï¼‰</title><link href="https://mestrace.github.io/posts/2023/Apr/21/foobar-ii/" rel="alternate"></link><published>2023-04-21T15:00:00+08:00</published><updated>2023-10-09T22:00:00+08:00</updated><author><name>Mestrace</name></author><id>tag:mestrace.github.io,2023-04-21:/posts/2023/Apr/21/foobar-ii/</id><summary type="html">&lt;p&gt;å› ä¸ºæœºç¼˜å·§åˆï¼Œæˆ‘å¶ç„¶ç‚¹å¼€äº†Googleçš„Foobar Challengeé¡µé¢ï¼Œå‘ç°è‡ªå·±ä»ç„¶å¯ä»¥ç™»é™†å¹¶ç»§ç»­Foobaræ—…ç¨‹ã€‚è¿™ç¯‡æ–‡ç« ç®€å•ä»‹ç»äº†FoobaræŒ‘æˆ˜çš„æœºåˆ¶ï¼Œå¹¶ç»™å‡ºäº†Foobar Level 2 çš„ä¸¤é“é¢˜ Gearing Up for Destruction å’Œ Hey, I Already Did That! ä¸¤é“é¢˜çš„è§£é¢˜æ€è·¯å’Œpythonä»£ç ã€‚&lt;/p&gt;</summary><content type="html">&lt;p&gt;Foobarç³»åˆ—å·²ç»å…¨éƒ¨å®Œæˆäº†ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹ç›®å½•è®¿é—®ï¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è§£å†³FoobaræŒ‘æˆ˜ï¼ˆä¸€ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;a href="https://mestrace.github.io/posts/2023/Apr/22/foobar-iii/"&gt;è§£å†³FoobaræŒ‘æˆ˜ï¼ˆäºŒï¼‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://mestrace.github.io/posts/2023/May/13/foobar-iv/"&gt;è§£å†³FoobaræŒ‘æˆ˜ï¼ˆä¸‰ï¼‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://mestrace.github.io/posts/2023/Sep/30/foobar-v/"&gt;è§£å†³FoobaræŒ‘æˆ˜ï¼ˆå››ï¼‰- ç»ˆç¯‡&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Googleç”¨FoobaræŒ‘æˆ˜æ¥ç”„é€‰äººæ‰å·²ç»æ˜¯ä¸€ä¸ªåŠå…¬å¼€çš„ç§˜å¯†äº†ã€‚åœ¨æœç´¢æ¡†é‡Œè¾“å…¥ä¸€äº›ç‰¹å®šçš„ç¨‹åºè¯­è¨€å…³é”®è¯ï¼Œæˆ–è€…æ˜¯æŸ¥çœ‹Googleäº§å“çš„å¼€å‘è€…æ–‡æ¡£çš„æ—¶å€™ï¼Œä½ æœ‰å‡ ç‡åœ¨æŸä¸ªè§’è½é‡Œæ‰¾åˆ°ä¸€ä¸ªå¥‡æ€ªçš„å›¾æ ‡ã€‚ç‚¹å‡»è¿™ä¸ªå›¾æ ‡ï¼Œå°±è¿›å…¥äº†FoobaræŒ‘æˆ˜çš„æµç¨‹ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½ éœ€è¦åœ¨é™æ—¶å†…å®Œæˆä¸€å®šæ•°é‡çš„ä»£ç é¢˜ç›®ï¼Œç„¶åGoogleä¼šè§†å®Œæˆæƒ…å†µå‘ä½ å‘å‡ºé¢è¯•é‚€è¯·ã€‚ä¸å¾—ä¸è¯´è¿™ä¸ªè¡Œä¸ºéå¸¸çš„Geekã€‚æ•°å¹´å‰ï¼Œç¬”è€…æœ‰å¹¸è§¦å‘äº†ä¸€æ¬¡FoobaræŒ‘æˆ˜ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å®Œæˆã€‚ä»Šå¤©åœ¨æµè§ˆäº’è”ç½‘ä¸Šçš„ä¿¡æ¯çš„æ—¶å€™ï¼Œçªç„¶å‘ç°è‡ªå·±è¿˜æ˜¯å¯ä»¥ç™»å…¥FoobaræŒ‘æˆ˜çš„é¡µé¢ï¼Œå¹¶ä¸”æ¥ç€ä¸Šæ¬¡çš„è¿›åº¦ç»§ç»­å®ŒæˆæŒ‘æˆ˜ï¼Œäºæ˜¯ä¾¿æœ‰äº†è¿™ç¯‡åšæ–‡ã€‚&lt;/p&gt;
&lt;p align="center"&gt;
  &lt;img src="https://mestrace.github.io/images/foobar/foobar-initial.png" /&gt;
&lt;/p&gt;

&lt;p&gt;Foobarçš„é¡µé¢ä¸€è¿›å»å°±æ˜¯ä¸€ä¸ªç‚«é…·çš„å‘½ä»¤è¡Œç•Œé¢ã€‚åœ¨è¿™é‡Œä½ å¯ä»¥è¾“å…¥ä¸€äº›å‘½ä»¤å»æŸ¥çœ‹å½“å‰æŒ‘æˆ˜è¿›åº¦ï¼Œè¯·æ±‚æ–°çš„æŒ‘æˆ˜é¢˜ç›®ï¼Œæäº¤ç­”æ¡ˆç­‰ç­‰ã€‚æ€»å…±æœ‰äº”å±‚æŒ‘æˆ˜ï¼Œè€Œä¸”ä¼—æ‰€å‘¨çŸ¥çš„ï¼Œæ¯ä¸€å±‚æŒ‘æˆ˜éƒ½æ¯”ä¸Šä¸€å±‚éš¾åº¦ä¼šæå‡ã€‚æ¯é“é¢˜çš„æ—¶é—´éƒ½ç»™çš„éå¸¸å……è£•ï¼Œä½ ä¼šæœ‰7å¤©å·¦å³çš„æ—¶é—´å»å®Œæˆæ¯ä¸€é“é¢˜ç›®ã€‚æ¥ç€ä¸Šæ¬¡çš„è¿›åº¦ï¼Œæˆ‘è¿›å…¥äº†ç¬¬äºŒé¢˜çš„æµç¨‹ã€‚è¾“å…¥&lt;code&gt;request&lt;/code&gt;ä¾¿æ”¶é›†åˆ°äº†ç¬¬äºŒé¢˜çš„é¢˜ç›®ã€‚è®©æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹å§ã€‚&lt;/p&gt;
&lt;h2&gt;Gearing Up for Destruction&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;As Commander Lambda's personal assistant, you've been assigned the task of configuring the LAMBCHOP doomsday device's axial orientation gears. It should be pretty simple -- just add gears to create the appropriate rotation ratio. But the problem is, due to the layout of the LAMBCHOP and the complicated system of beams and pipes supporting it, the pegs that will support the gears are fixed in place.&lt;/p&gt;
&lt;p&gt;The LAMBCHOP's engineers have given you lists identifying the placement of groups of pegs along various support beams. You need to place a gear on each peg (otherwise the gears will collide with unoccupied pegs). The engineers have plenty of gears in all different sizes stocked up, so you can choose gears of any size, from a radius of &lt;code&gt;1&lt;/code&gt; on up. Your goal is to build a system where the last gear rotates at twice the rate (in revolutions per minute, or rpm) of the first gear, no matter the direction. Each gear (except the last) touches and turns the gear on the next peg to the right.&lt;/p&gt;
&lt;p&gt;Given a list of distinct positive integers named pegs representing the location of each peg along the support beam, write a function solution(pegs) which, if there is a solution, returns a list of two positive integers a and b representing the numerator and denominator of the first gear's radius in its simplest form in order to achieve the goal above, such that &lt;code&gt;radius = a/b&lt;/code&gt;. The ratio a/b should be greater than or equal to 1. Not all support configurations will necessarily be capable of creating the proper rotation ratio, so if the task is impossible, the function &lt;code&gt;solution(pegs)&lt;/code&gt; should return the list &lt;code&gt;[-1, -1]&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;For example, if the pegs are placed at &lt;code&gt;[4, 30, 50]&lt;/code&gt;, then the first gear could have a radius of &lt;code&gt;12&lt;/code&gt;, the second gear could have a radius of &lt;code&gt;14&lt;/code&gt;, and the last one a radius of &lt;code&gt;6&lt;/code&gt;. Thus, the last gear would rotate twice as fast as the first one. In this case, pegs would be &lt;code&gt;[4, 30, 50]&lt;/code&gt; and &lt;code&gt;solution(pegs)&lt;/code&gt; should return &lt;code&gt;[12, 1]&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The list pegs will be given sorted in ascending order and will contain at least &lt;code&gt;2&lt;/code&gt; and no more than &lt;code&gt;20&lt;/code&gt; distinct positive integers, all between &lt;code&gt;1&lt;/code&gt; and &lt;code&gt;10000&lt;/code&gt; inclusive.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç»™å®šä¸€ä¸ªæ•´æ•°åˆ—è¡¨&lt;code&gt;pegs&lt;/code&gt;ï¼Œä»£è¡¨åœ¨å¢™ä¸Šçš„é”€å­çš„ä½ç½®ã€‚ä½ éœ€è¦åœ¨æ¯ä¸€ä¸ªé”€å­ä¸Šéƒ½æ”¾ç½®ä¸€ä¸ªé½¿è½®ä¸”è¿™äº›é½¿è½®éƒ½äº’ç›¸å’¬åˆã€‚æ¯ä¸ªé½¿è½®çš„å¤§å°å¯ä»¥ä¸ºä»»æ„æ•°å­—ï¼Œä½†æ˜¯è‡³å°‘è¦ä¸º&lt;code&gt;1&lt;/code&gt;ã€‚æ‰¾åˆ°ä¸€ç§æ’åˆ—æ–¹å¼ï¼Œä½¿å¾—æœ€åä¸€ä¸ªé½¿è½®çš„æ—‹è½¬é€Ÿåº¦æ˜¯ç¬¬ä¸€ä¸ªé½¿è½®çš„ä¸¤å€ï¼Œå¹¶è¿”å›ç¬¬ä¸€ä¸ªé½¿è½®çš„å¤§å°ã€‚ç”±äºè¿”å›å€¼å¯èƒ½ä¸æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œä½ éœ€è¦è¿”å›ä¸€ä¸ªæ•°ç»„åˆ—è¡¨&lt;code&gt;[m,n]&lt;/code&gt;ä»£è¡¨&lt;code&gt;m/n&lt;/code&gt;ã€‚å¦‚æœç»™å®šçš„&lt;code&gt;pegs&lt;/code&gt;æ— æ³•æ‰¾åˆ°ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„ç»„åˆï¼Œåˆ™åº”è¯¥è¿”å›&lt;code&gt;[-1, -1]&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;é¢˜ç›®çœ‹ä¸Šå»æŒºå”¬äººçš„ã€‚å…ˆæ˜¯ä¸€ä¸‹å­ç»™äº†ä¸¤ç™¾å­—çš„æ•…äº‹ç±»çš„æ–‡å­—æè¿°ï¼Œæ¥ç€å¼•å…¥äº†é½¿è½®å’¬åˆè¿™ä¸ªå¤§å¤šæ•°äººçœ‹èµ·æ¥ç”Ÿç–çš„æ¦‚å¿µã€‚æˆ‘ä»¬ç®€å•è¿›è¡Œå»ºæ¨¡ä¸€ä¸‹ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬æš‚æ—¶ä¸éœ€è¦è€ƒè™‘ä¸€äº›ç‰¹åˆ«çš„å‚æ•°ï¼Œå¦‚é½¿è½®çš„é½¿æ•°å¦‚ä½•å½±å“å’¬åˆã€‚å°±è€ƒè™‘ä¸€ä¸ªçœŸç©ºä¸­çš„çƒå½¢é¸¡çš„æ¨¡å‹ï¼šç»™å®šä¸¤ä¸ªé½¿è½®&lt;code&gt;a&lt;/code&gt;å’Œ&lt;code&gt;b&lt;/code&gt;ï¼Œå¯çŸ¥ä¸¤ä¸ªé½¿è½®çš„åŠå¾„å’Œç­‰äºè¿™ä¸¤ä¸ªé½¿è½®ä¹‹é—´çš„é”€å­é•¿åº¦ï¼›è‹¥éœ€è¦é½¿è½®&lt;code&gt;b&lt;/code&gt;çš„è§’é€Ÿåº¦æ˜¯é½¿è½®&lt;code&gt;a&lt;/code&gt;çš„ä¸¤å€ï¼Œé‚£ä¹ˆé½¿è½®&lt;code&gt;a&lt;/code&gt;çš„åŠå¾„åº”è¯¥æ˜¯é½¿è½®&lt;code&gt;b&lt;/code&gt;çš„ä¸¤å€ã€‚æˆ‘ä»¬å¯ä»¥æ‹“å±•æˆ‘ä»¬çš„æ¨¡å‹åˆ°ä¸‰ä¸ªé½¿è½®ã€‚ç»™å®šä¸‰ä¸ªé½¿è½®&lt;code&gt;a&lt;/code&gt;ï¼Œ&lt;code&gt;b&lt;/code&gt;å’Œ&lt;code&gt;c&lt;/code&gt;ï¼Œä»–ä»¬çš„ä½ç½®åˆ†åˆ«åœ¨é”€å­&lt;span class="math"&gt;\(p_a\)&lt;/span&gt;, &lt;span class="math"&gt;\(p_b\)&lt;/span&gt;å’Œ&lt;span class="math"&gt;\(p_c\)&lt;/span&gt;ä¸Šï¼Œæ­¤å¤–æˆ‘ä»¬è¿˜çŸ¥é“é”€å­ä¹‹é—´çš„è·ç¦»&lt;span class="math"&gt;\(D_x\)&lt;/span&gt;å¯ä»¥è¡¨ç¤ºä¸º&lt;/p&gt;
&lt;div class="math"&gt;$$
\begin{aligned}
p_b - p_a &amp;amp;= D_0\\
p_c - p_b &amp;amp;= D_1
\end{aligned}
$$&lt;/div&gt;
&lt;p&gt;åˆ™å¯å¾—&lt;/p&gt;
&lt;div class="math"&gt;$$
\begin{aligned}
r_a + r_b &amp;amp;= D_0\\
r_b + r_c &amp;amp;= D_1
\end{aligned}
$$&lt;/div&gt;
&lt;p&gt;åŒ–ç®€å¯å¾—&lt;/p&gt;
&lt;div class="math"&gt;$$
\begin{aligned}
r_b &amp;amp;= D_0 - r_a\\
r_c &amp;amp;= D_1 - r_b\\
    &amp;amp;= D_1 - D_0 + r_a
\end{aligned}
$$&lt;/div&gt;
&lt;p&gt;åˆå› &lt;span class="math"&gt;\(r_a = 2 r_c\)&lt;/span&gt;ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æŠŠ&lt;span class="math"&gt;\(r_a\)&lt;/span&gt;è¡¨ç¤ºä¸º&lt;/p&gt;
&lt;div class="math"&gt;$$
r_a = 2 * (D_0 - D_1)
$$&lt;/div&gt;
&lt;p&gt;å€˜è‹¥æˆ‘ä»¬æœ‰å››ä¸ªé½¿è½®ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨åŒæ ·çš„æ–¹å¼è¿›è¡ŒåŒ–ç®€&lt;/p&gt;
&lt;div class="math"&gt;$$
\begin{aligned}
r_a + r_b &amp;amp;= D_0\\
r_b + r_c &amp;amp;= D_1\\
r_d + r_c &amp;amp;= D_2
\end{aligned}
$$&lt;/div&gt;
&lt;p&gt;åŒ–ç®€å¯å¾—&lt;/p&gt;
&lt;div class="math"&gt;$$
\begin{aligned}
r_b &amp;amp;= D_0 - r_a\\
r_c &amp;amp;= D_1 - r_b\\
    &amp;amp;= D_1 - D_0 + r_a\\
r_d &amp;amp;= D_2 - D_1 + D_0 - r_a
\end{aligned}
$$&lt;/div&gt;
&lt;p&gt;åŒæ ·å¯çŸ¥&lt;span class="math"&gt;\(r_a = 2 r_d\)&lt;/span&gt;ï¼Œå› æ­¤&lt;/p&gt;
&lt;div class="math"&gt;$$
r_a = \frac{2}{3} (D_2 - D_1 + D_0)
$$&lt;/div&gt;
&lt;p&gt;åˆ°è¿™é‡Œæˆ‘ä»¬å°±æ‰¾å‡ºäº†è¿™é“é¢˜çš„è§„å¾‹ã€‚æ¥ä¸‹æ¥å°±è¯¥è®¾è®¡ç®—æ³•äº†ã€‚æˆ‘ä»¬ç®€å•åˆ†ä¸ºä¸‰æ­¥ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é¦–å…ˆç®—å‡º&lt;code&gt;distance&lt;/code&gt;ï¼Œå³&lt;code&gt;pegs&lt;/code&gt;ä¹‹é—´çš„å·®å€¼&lt;/li&gt;
&lt;li&gt;å¯¹äºç®—å‡º&lt;code&gt;distance&lt;/code&gt;å¶æ•°ç´¢å¼•çš„å’Œå’Œå¥‡æ•°ç´¢å¼•å’Œä¹‹é—´çš„å·®å€¼ï¼Œå¹¶æ ¹æ®&lt;code&gt;distance&lt;/code&gt;çš„å¥‡å¶æ€§æ±‚å¾—å‰é¢çš„ä¹˜æ•°ã€‚&lt;/li&gt;
&lt;li&gt;æœ€åæ ¡éªŒæ‰€æœ‰é½¿è½®æ˜¯å¦ç¬¦åˆé½¿è½®å¤§å°çš„è¦æ±‚ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p align="center"&gt;
  &lt;img src="https://mestrace.github.io/images/gei_li.png" /&gt;
&lt;/p&gt;

&lt;p&gt;ä¸”æ…¢ï¼Œè¿™é¢˜è¿˜æœ‰ä¸ªè¦æ±‚æ˜¯è¦è¾“å‡ºä¸€ä¸ªåˆ†æ•°è€Œä¸æ˜¯æµ®ç‚¹æ•°ã€‚è‹¥å­˜åœ¨&lt;code&gt;2/3&lt;/code&gt;çš„ä¹˜æ•°çš„è¯ï¼Œæˆ‘ä»¬åº”è¯¥æŠŠä»–è¿›è¡ŒåŒ–ç®€ã€‚è¿™é‡Œä½¿ç”¨Pythonçš„åŒå­¦æœ‰ç¦äº†ï¼Œå¯ä»¥ç›´æ¥ç”¨&lt;code&gt;fractions.Fraction&lt;/code&gt;è¿›è¡Œè®¡ç®—ï¼Œ&lt;code&gt;f.numerator&lt;/code&gt;å¯å¾—å‡ºåˆ†æ¯ï¼Œ&lt;code&gt;f.denominator&lt;/code&gt;ä¸ºåˆ†å­ã€‚å¯¹äºå…¶ä»–è¯­è¨€çš„åŒå­¦æ¥è¯´å‘¢ï¼Œæ—¢å¯ä»¥ä½¿ç”¨æœ€å¤§å…¬çº¦æ•°&lt;code&gt;gcd&lt;/code&gt;æ¥åŒ–ç®€åˆ†å­å’Œåˆ†æ¯ï¼Œä¹Ÿå¯ä»¥ç”¨æµ®ç‚¹æ•°è¿‘ä¼¼åˆ°ç²¾åº¦æ¥å¤„ç†ã€‚è¿™é‡Œå°±ä¸å±•å¼€äº†ã€‚&lt;/p&gt;
&lt;h3&gt;ä»£ç &lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;fractions&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Fraction&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;solution&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pegs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="c1"&gt;# Calculate the distances between pegs&lt;/span&gt;
    &lt;span class="n"&gt;distances&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;pegs&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;pegs&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pegs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;

    &lt;span class="c1"&gt;# print(distances)&lt;/span&gt;

    &lt;span class="n"&gt;radius&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;distances&lt;/span&gt;&lt;span class="p"&gt;[::&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="nb"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;distances&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;distances&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;radius&lt;/span&gt; &lt;span class="o"&gt;*=&lt;/span&gt; &lt;span class="n"&gt;Fraction&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;radius&lt;/span&gt; &lt;span class="o"&gt;*=&lt;/span&gt; &lt;span class="n"&gt;Fraction&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;radius&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="c1"&gt;# print(&amp;quot;less&amp;quot;, radius)&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

    &lt;span class="n"&gt;cradius&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;radius&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;distances&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;cradius&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;cradius&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;cradius&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="c1"&gt;# print(&amp;quot;less intermediate&amp;quot;, cradius, radius)&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;radius&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;numerator&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;radius&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;denominator&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;Hey, I Already Did That!&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Commander Lambda uses an automated algorithm to assign minions randomly to tasks, in order to keep minions on their toes. But you've noticed a flaw in the algorithm -- it eventually loops back on itself, so that instead of assigning new minions as it iterates, it gets stuck in a cycle of values so that the same minions end up doing the same tasks over and over again. You think proving this to Commander Lambda will help you make a case for your next promotion. &lt;/p&gt;
&lt;p&gt;You have worked out that the algorithm has the following process: &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Start with a random minion ID &lt;code&gt;n&lt;/code&gt;, which is a nonnegative integer of length &lt;code&gt;k&lt;/code&gt; in base &lt;code&gt;b&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Define &lt;code&gt;x&lt;/code&gt; and &lt;code&gt;y&lt;/code&gt; as integers of length &lt;code&gt;k&lt;/code&gt;.  &lt;code&gt;x&lt;/code&gt; has the digits of &lt;code&gt;n&lt;/code&gt; in descending order, and &lt;code&gt;y&lt;/code&gt; has the digits of &lt;code&gt;n&lt;/code&gt; in ascending order&lt;/li&gt;
&lt;li&gt;Define &lt;code&gt;z = x - y&lt;/code&gt;.  Add leading zeros to z to maintain length k if necessary&lt;/li&gt;
&lt;li&gt;Assign &lt;code&gt;n = z&lt;/code&gt; to get the next minion ID, and go back to step 2&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;For example, given minion ID &lt;code&gt;n = 1211, k = 4, b = 10&lt;/code&gt;, then &lt;code&gt;x = 2111&lt;/code&gt;, &lt;code&gt;y = 1112&lt;/code&gt; and &lt;code&gt;z = 2111 - 1112 = 0999&lt;/code&gt;. Then the next minion ID will be &lt;code&gt;n = 0999&lt;/code&gt; and the algorithm iterates again: &lt;code&gt;x = 9990&lt;/code&gt;, &lt;code&gt;y = 0999&lt;/code&gt; and &lt;code&gt;z = 9990 - 0999 = 8991&lt;/code&gt;, and so on.&lt;/p&gt;
&lt;p&gt;Depending on the values of n, k (derived from n), and b, at some point the algorithm reaches a cycle, such as by reaching a constant value. For example, starting with &lt;code&gt;n = 210022, k = 6, b = 3&lt;/code&gt;, the algorithm will reach the cycle of values &lt;code&gt;[210111, 122221, 102212]&lt;/code&gt; and it will stay in this cycle no matter how many times it continues iterating. Starting with &lt;code&gt;n = 1211&lt;/code&gt;, the routine will reach the integer &lt;code&gt;6174&lt;/code&gt;, and since &lt;code&gt;7641 - 1467&lt;/code&gt; is &lt;code&gt;6174&lt;/code&gt;, it will stay as that value no matter how many times it iterates.&lt;/p&gt;
&lt;p&gt;Given a minion ID as a string n representing a nonnegative integer of length &lt;code&gt;k&lt;/code&gt; in base &lt;code&gt;b&lt;/code&gt;, where &lt;code&gt;2 &amp;lt;= k &amp;lt;= 9&lt;/code&gt; and &lt;code&gt;2 &amp;lt;= b &amp;lt;= 10&lt;/code&gt;, write a function &lt;code&gt;solution(n, b)&lt;/code&gt; which returns the length of the ending cycle of the algorithm above starting with &lt;code&gt;n&lt;/code&gt;. For instance, in the example above, &lt;code&gt;solution(210022, 3)&lt;/code&gt; would return &lt;code&gt;3&lt;/code&gt;, since iterating on 102212 would return to &lt;code&gt;210111&lt;/code&gt; when done in base &lt;code&gt;3&lt;/code&gt;. If the algorithm reaches a constant, such as &lt;code&gt;0&lt;/code&gt;, then the length is &lt;code&gt;1&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Your code should pass the following test cases.
Note that it may also be run against hidden test cases not shown here.&lt;/p&gt;
&lt;p&gt;Input: solution.solution('1211', 10)
Output: 1&lt;/p&gt;
&lt;p&gt;Input: solution.solution('210022', 3)
Output: 3&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç»™å®šä¸€ä¸ª&lt;code&gt;b&lt;/code&gt;è¿›åˆ¶ï¼Œé•¿åº¦ä¸º&lt;code&gt;k&lt;/code&gt;çš„æ•°å­—&lt;code&gt;z&lt;/code&gt;ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å…¶åº”ç”¨ä¸€ä¸ªç®—æ³•&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å®šä¹‰&lt;code&gt;x&lt;/code&gt;ä¸ºè¿™ä¸ªæ•°å­—&lt;code&gt;z&lt;/code&gt;æ‰€æœ‰çš„ä½æ•°é™åºæ’åˆ—ã€‚&lt;/li&gt;
&lt;li&gt;å®šä¹‰&lt;code&gt;y&lt;/code&gt;ä¸ºè¿™ä¸ªæ•°å­—&lt;code&gt;z&lt;/code&gt;çš„æ‰€æœ‰ä½æ•°å‡åºæ’åˆ—ã€‚&lt;/li&gt;
&lt;li&gt;è®¡ç®—&lt;code&gt;z = x - y&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;é‡å¤è¿™ä¸ªè¿‡ç¨‹ç›´åˆ°æˆ‘ä»¬é‡åˆ°æ‰€æœ‰æ•°å­—çš„å¾ªç¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æœ€ç»ˆæˆ‘ä»¬åº”è¯¥è¿”å›è¿™ä¸ªç¯çš„é•¿åº¦ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬ç›´æ¥è¿›è¡Œæ¨¡æ‹Ÿå»æ‰¾ä»–çš„ç¯ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦è½¬æ¢è¿›åˆ¶çš„å·¥å…·ã€‚&lt;code&gt;python&lt;/code&gt;å¹¶æ²¡æœ‰æä¾›ä»»æ„åº•æ•°çš„è½¬æ¢ï¼Œæ‰€ä»¥æˆ‘ä»¬è‡ªå·±ç®€å•å†™ä¸€ä¸‹å­—ç¬¦ä¸²è½¬baseçš„å·¥å…·ï¼Œä¹‹åå°±æŒ‰ç…§é¢˜æ„è¿›è¡Œæ¨¡æ‹Ÿã€‚è€Œå¯¹äºç¯çš„æ£€æµ‹ï¼Œæˆ‘ä»¬ç›´æ¥ç”¨ä¸€ä¸ªmapè®°å½•æ¯ä¸€ä¸ªæ•°å­—å‡ºç°çš„ç´¢å¼•ã€‚è‹¥æˆ‘ä»¬é‡å¤é‡åˆ°ä¹‹å‰é‡åˆ°çš„&lt;code&gt;z&lt;/code&gt;çš„è¯ï¼Œæˆ‘ä»¬å°±é‡åˆ°äº†ä¸€ä¸ªç¯ï¼Œè€Œç¯çš„é•¿åº¦ä¸ºå½“å‰ç´¢å¼•å‡å»ä¹‹å‰é‡åˆ°çš„ç´¢å¼•ã€‚&lt;/p&gt;
&lt;p align="center"&gt;
  &lt;img src="https://mestrace.github.io/images/gei_li.png" /&gt;
&lt;/p&gt;

&lt;p&gt;å®é™…ä¸Šï¼Œæ•°å­¦å®¶D. R. Kaprekaråœ¨1955å¹´å¯¹è¿™ä¸ªæ€§è´¨è¿›è¡Œç ”ç©¶ï¼Œå‘ç°å¯¹äºä»»æ„åè¿›åˆ¶å››ä½æ•°ï¼Œé€šè¿‡ä¸Šè¿°å˜æ¢ï¼Œæœ€å¤šè¿›è¡Œ7æ¬¡å°±ä¼šå¾—åˆ°&lt;code&gt;6174&lt;/code&gt;ï¼Œå› æ­¤è¿™ä¸ªæ•°å­—ä¹Ÿè¢«ç§°ä¸ºKarprekarå¸¸æ•°ã€‚æœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥çœ‹ä¸€ä¸‹&lt;a href="http://lanqi.org/everyday/17172/"&gt;è¿™ç¯‡æ–‡ç« &lt;/a&gt;ï¼Œè®¨è®ºäº†å¯¹äºä¸‰ä½æ•°å­—è¿›è¡Œä¸Šè¿°å˜æ¢ä¼šæ”¶æ•›åˆ°495çš„æ€§è´¨ã€‚&lt;/p&gt;
&lt;h3&gt;ä»£ç &lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;to_base_10&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;Converts a string `n` in base `b` to an integer in base 10.&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;digit&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;digit&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;from_base_10&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;Converts an integer `n` in base 10 to a string in base `b`.&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;
    &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;digit&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;
        &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;digit&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;
        &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;//=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;solution&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;k&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;seen&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;
    &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;seen&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;seen&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;
        &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;sorted&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;reverse&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rjust&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;sorted&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rjust&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;z&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;from_base_10&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;to_base_10&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;to_base_10&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rjust&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="c1"&gt;# print(n, &amp;quot;-&amp;gt;&amp;quot;, x, &amp;quot;-&amp;quot;, y, &amp;quot;=&amp;quot;, z)&lt;/span&gt;
        &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;z&lt;/span&gt;
        &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;seen&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;å°ç»“&lt;/h2&gt;
&lt;p&gt;ç¬¬äºŒå±‚çš„é¢˜ç›®éš¾åº¦ä¸é«˜ï¼Œä½†æ˜¯æ€»ä½“æ¥è®²æ¯”è¾ƒè€ƒéªŒå‡ºé¢˜è€…å¯¹äºé¢˜ç›®çš„ç†è§£ï¼Œå¹¶å°†é¢˜ç›®è¿›è¡Œæ‹†è§£ã€‚ä¸¤é¢˜éƒ½æ˜¯æ¯”è¾ƒåå‘æ¨¡æ‹Ÿçš„é¢˜ç›®ã€‚æ­¤å¤–ï¼Œç»™çš„æ—¶é—´éƒ½å¾ˆå……è£•ï¼Œèƒ½è®©å‚èµ›è€…æœ‰å……è¶³çš„æ—¶é—´å»å­¦ä¹ å’Œç ”ç©¶è¿™é“é¢˜ç›®ï¼Œå¹¶ç»™å‡ºæ­£ç¡®çš„è§£æ³•ï¼Œè€Œä¸å•å•åƒæ˜¯ä¸€ä¸ªé™æ—¶çš„OJã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæ˜¯ä¸€äº›å‚è€ƒæ–‡çŒ®ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://en.wikipedia.org/wiki/6174_(number)"&gt;Wikipedia - 6174 (number)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://patataeater.blogspot.com/2020/08/how-to-get-hired-by-google.html"&gt;Everything You Need to Know About Google Foobar Challenge&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width &lt; 768) ? "left" : align;
        indent = (screen.width &lt; 768) ? "0em" : indent;
        linebreak = (screen.width &lt; 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js','color.js','mhchem.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</content><category term="Computer Science"></category><category term="Google Foobar"></category></entry><entry><title>æ‰‹æŠŠæ‰‹æ•™ä½ åœ¨æ ‘è“æ´¾4Bä¸Šè¿è¡ŒLLaMA 7Bæ¨¡å‹</title><link href="https://mestrace.github.io/posts/2023/Mar/15/llama-rpi/" rel="alternate"></link><published>2023-03-15T00:00:00+08:00</published><updated>2023-03-15T00:00:00+08:00</updated><author><name>Mestrace</name></author><id>tag:mestrace.github.io,2023-03-15:/posts/2023/Mar/15/llama-rpi/</id><summary type="html">&lt;p&gt;æœ¬æ–‡è¯¦ç»†æè¿°äº†æˆ‘æ˜¯å¦‚ä½•ä¸€æ­¥æ­¥åœ¨æ ‘è“æ´¾4Bä¸Šè¿è¡ŒLLaMAæ¨¡å‹ã€‚LLaMAæ˜¯ç”±Meta AIå‘å¸ƒçš„ä¸€ä¸ªå¤§è¯­è¨€æ¨¡å‹ã€‚ggerganov/llama.cppæ˜¯ä¸€ä¸ªç”±C++å®ç°çš„LLaMAç§»æ¤ç‰ˆæœ¬ï¼Œå¹¶ä½¿ç”¨4-bité‡åŒ–æŠ€æœ¯ä»¥å°†æ¨¡å‹é€‚é…è‡³ä¸ªäººè®¾å¤‡ä¸Šã€‚è¶…å¤§å‹è¯­æ–™æ¨¡å‹ä»æœªå¦‚æ­¤å”¾æ‰‹å¯å¾—ã€‚åœ¨æ ‘è“æ´¾ä¸Šè·å¾—ä½ çš„ä¸ªäººchatgptã€‚å¦‚æœä½ å¯¹æ ‘è“æ´¾ã€LLaMAæ¨¡å‹æˆ–å¤§å‹è¯­è¨€æ¨¡å‹æ„Ÿå…´è¶£ï¼Œé‚£ä¹ˆæœ¬æ–‡ä¸€å®šä¼šå¯¹ä½ æœ‰å¸®åŠ©ã€‚How I run the LLaMA model step by step on a Raspberry Pi 4B. LLaMA is a large language model released by Meta AI. ggerganov/llama.cpp is a C++ implementation of the LLaMA port, which uses 4-bit quantization techniques to adapt the model to personal devices. A large-scale Machine Learning model has never been so readily available for normal people. If you are interested in Raspberry Pi, LLaMA model, or large-scale language models, this article will provide you with useful information.&lt;/p&gt;</summary><content type="html">&lt;h2&gt;å¼•è¨€&lt;/h2&gt;
&lt;p&gt;LLaMAå…¨ç§°æ˜¯Large Language Model Meta AIï¼Œæ˜¯ç”±Meta AIç ”ç©¶äººå‘˜å‘å¸ƒçš„ä¸€ä¸ªé¢„è®­ç»ƒè¯­è¨€æ¨¡å‹ã€‚ä¸æœ€è¿‘çˆ†ç«çš„ChatGPTç›¸æ¯”ï¼ŒLLaMAæ¶æ„æ›´å°ï¼Œä½†è®­ç»ƒè¿‡ç¨‹å’Œå•GPUæ¨ç†é€Ÿåº¦æ›´å¿«ï¼Œæˆæœ¬æ›´ä½ã€‚ä»Šå¤©åœ¨åˆ·æ¨ç‰¹çš„æ—¶å€™æ— æ„ä¸­çœ‹åˆ°äº†è¿™æ ·ä¸€æ¡æ¶ˆæ¯ï¼Œ&lt;a href="https://github.com/ggerganov"&gt;@ggerganov&lt;/a&gt;åœ¨GitHubä¸Šå‘å¸ƒäº†&lt;a href="https://github.com/ggerganov/llama.cpp"&gt;llama.cpp&lt;/a&gt;ï¼Œä½¿ç”¨äº†4-bité‡åŒ–å°†æ¨¡å‹å°½å¯èƒ½ç¼©å°ï¼Œå¹¶èƒ½åœ¨å¤šç§ç§»åŠ¨è®¾å¤‡ä¸Šè¿è¡Œã€‚è¿™æˆ‘å°±ä¸æ·¡å®šäº†ï¼Œæ­£å¥½æ‰‹é‡Œæœ‰ä¸ªé—²ç½®çš„Raspberry Pi 4B 4GBç‰ˆæœ¬ï¼Œèµ¶ç´§æèµ·ã€‚&lt;/p&gt;
&lt;blockquote class="twitter-tweet" data-conversation="none"&gt;&lt;p lang="en" dir="ltr"&gt;Added a new section to my post highlighting the advances we&amp;#39;ve already seen in the last two days: LLaMA runs on a 4GB RaspberryPi and a Pixel 6 phone now! &lt;a href="https://t.co/pWOv6PP85b"&gt;https://t.co/pWOv6PP85b&lt;/a&gt;&lt;/p&gt;&amp;mdash; Simon Willison (@simonw) &lt;a href="https://twitter.com/simonw/status/1635314097318395904?ref_src=twsrc%5Etfw"&gt;March 13, 2023&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src="https://platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;

&lt;h2&gt;é…ç½®æ ‘è“æ´¾&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;å¦‚æœä½ å·²ç»é…ç½®å¥½äº†æ ‘è“æ´¾ï¼Œä¸”gccç‰ˆæœ¬ä¸º10ä»¥ä¸Šçš„å°±å¯ä»¥è·³è¿‡è¿™ä¸€éƒ¨åˆ†äº†&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯æˆ‘é…ç½®æ ‘è“æ´¾çš„æ­¥éª¤&lt;/p&gt;
&lt;p&gt;é¦–å…ˆé€šè¿‡&lt;a href=""&gt;Raspberry Pi Imager&lt;/a&gt;åˆ·å…¥ç³»ç»Ÿè‡³SDå¡
- ç³»ç»Ÿç‰ˆæœ¬ä¸ºUbuntu Server 22.10 (64 bit)
- æ³¨æ„è¿™é‡Œä¸€å®šè¦ä½¿ç”¨64 bitçš„ç³»ç»Ÿï¼Œä¸ç„¶åç»­å¯èƒ½æ— æ³•ç¼–è¯‘&lt;/p&gt;
&lt;p&gt;é…ç½®ç³»ç»Ÿ&lt;/p&gt;
&lt;p&gt;ç›´æ¥ç”¨å‘½ä»¤è¡Œå‡çº§è½¯ä»¶åŒ…å¹¶å®‰è£…ç›¸å…³ä¾èµ–ï¼Œè¿™é‡Œç»™å‡ºå‚è€ƒå‘½ä»¤&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;su
apt-get&lt;span class="w"&gt; &lt;/span&gt;update
apt-get&lt;span class="w"&gt; &lt;/span&gt;upgrade

&lt;span class="c1"&gt;# ä¸€äº›ä¼šç”¨åˆ°çš„å·¥å…·&lt;/span&gt;
apt-get&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;gcc&lt;span class="w"&gt; &lt;/span&gt;g++&lt;span class="w"&gt; &lt;/span&gt;python3&lt;span class="w"&gt; &lt;/span&gt;python3-pip

&lt;span class="c1"&gt;# å®‰è£…pythonä¾èµ–&lt;/span&gt;
python3&lt;span class="w"&gt; &lt;/span&gt;-m&lt;span class="w"&gt; &lt;/span&gt;pip&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;torch&lt;span class="w"&gt; &lt;/span&gt;numpy&lt;span class="w"&gt; &lt;/span&gt;sentencepiece
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;&lt;code&gt;llama.cpp&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆå¯ä»¥å…ˆä¸‹è½½LLaMaæ¨¡å‹ï¼Œ7Bçš„æ¨¡å‹å¤§æ¦‚æ˜¯28GBå·¦å³ï¼Œç½‘é€Ÿä¸å¥½çš„åŒå­¦å¯ä»¥æå‰å¼€å§‹ä¸‹è½½ï¼Œä»¥å…åˆ°æ—¶å€™è¿˜éœ€è¦è‹¦ç­‰ã€‚å¯ä»¥åœ¨ç½‘ä¸Šæœç´¢åˆ°æ³„æ¼çš„ä¸‹è½½ç£åŠ›é“¾æ¥ï¼Œç”¨ä½ å–œæ¬¢çš„ä»»æ„P2P / Torrentè½¯ä»¶ä¸‹è½½å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥å°±å¯ä»¥è¿›å…¥&lt;a href="https://github.com/ggerganov/llama.cpp"&gt;&lt;code&gt;llama.cpp&lt;/code&gt;&lt;/a&gt;æŒ‰ç…§é‡Œé¢çš„æ•™ç¨‹è¿›è¡Œæ“ä½œäº†ã€‚è™½ç„¶çœ‹ä¼¼æ¯”è¾ƒç®€å•ï¼Œä½†é‡Œé¢è¿˜æ˜¯æœ‰ä¸€äº›å°å‘çš„åœ°æ–¹çš„ã€‚æˆ‘åœ¨è¿™é‡Œç®€å•é˜è¿°ä¸‹æˆ‘é‡åˆ°çš„é—®é¢˜ä»¥åŠæˆ‘æ˜¯æ€ä¹ˆè§£å†³çš„ã€‚&lt;/p&gt;
&lt;h3&gt;æ„å»ºäºŒè¿›åˆ¶&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# build this repo&lt;/span&gt;
git&lt;span class="w"&gt; &lt;/span&gt;clone&lt;span class="w"&gt; &lt;/span&gt;https://github.com/ggerganov/llama.cpp
&lt;span class="nb"&gt;cd&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;llama.cpp
make
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;é¦–å…ˆéœ€è¦å…‹éš†ä»“åº“åˆ°æœ¬åœ°ï¼Œå¹¶è¿›è¡Œmakeã€‚æˆ‘åœ¨è¿™ä¸€æ­¥å‘ç°ä¸¤ä¸ªé—®é¢˜&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Rasbian Busterè‡ªå¸¦çš„gccç‰ˆæœ¬è¾ƒè€ï¼ˆgcc 8ï¼‰ä¸”æ— æ³•å‡çº§ï¼Œå› æ­¤æ‰éœ€è¦åœ¨å‰é¢é‡è£…ç³»ç»Ÿå¹¶å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ã€‚ç›®å‰æˆ‘ä½¿ç”¨çš„æ˜¯gcc 12ã€‚&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;make&lt;/code&gt;çš„æ—¶å€™æç¤ºä¸æ”¯æŒçš„é€‰é¡¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;makefile&lt;/code&gt;é‡Œé¢å¤„ç†ä¸€äº›å¹³å°ç‰¹å®šçš„flagçš„æ—¶å€™æ˜¯è¯»å–ç³»ç»Ÿå¹³å°å¹¶å‚¨å­˜åˆ°&lt;code&gt;UNAME_S&lt;/code&gt;,&lt;code&gt;UNAME_P&lt;/code&gt;å’Œ&lt;code&gt;UNAME_M&lt;/code&gt;é‡Œé¢ï¼Œä¹‹åé€šè¿‡è¿™ä¸‰ä¸ªå‚æ•°åˆ¤æ–­ç¼–è¯‘å™¨ç›¸å…³çš„é€‰é¡¹ã€‚å¦‚æœè¿™é‡Œé€šè¿‡ä¸äº†çš„è¯å¯ä»¥è€ƒè™‘çœ‹çœ‹&lt;code&gt;makefile&lt;/code&gt;é‡Œç›¸è¿‘å¹³å°çš„å‚æ•°å¹¶æŒ‡å®šã€‚&lt;code&gt;make UNAME_P=armv7 UNAME_M=armv7&lt;/code&gt;å°±å¯ä»¥æŒ‡å®šä¸º&lt;code&gt;armv7&lt;/code&gt;çš„ç¼–è¯‘é€‰é¡¹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;make&lt;/code&gt;çš„æ—¶å€™æç¤ºå…§è”é”™è¯¯&lt;code&gt;â€˜always_inlineâ€™ â€˜vdotq_s32â€™&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªé—®é¢˜æ¯”è¾ƒå‘çˆ¹ã€‚æˆ‘ä¸€å¼€å§‹ä»¥ä¸ºæ˜¯ç¼–è¯‘å™¨çš„é—®é¢˜ï¼Œæ¢äº†å¥½å‡ ç§é€‰é¡¹éƒ½ä¸è¡Œã€‚åæ¥å‘ç°æ˜¯ä½œè€…åœ¨03.14é’ˆå¯¹Apple Silliconåšçš„ä¸€ä¸ªä¼˜åŒ– &lt;a href="https://github.com/ggerganov/llama.cpp/pull/67"&gt;Use vdotq_s32 to improve performance #67 - Merged&lt;/a&gt;ã€‚ç›®å‰æš‚ä¸æ¸…æ¥šä¸ºä»€ä¹ˆæ ‘è“æ´¾æ— æ³•å¤„ç†è¿™ä¸ªï¼Œå·²ç»å‘ä½œè€…åé¦ˆäº†ã€‚æ—¢ç„¶æ— æ³•é’ˆå¯¹æ€§çš„åšå¤„ç†ï¼Œæˆ‘å°è¯•äº†ç›´æ¥revertå¯¹åº”çš„commitã€‚ä¹‹åå°±æ²¡æœ‰ç¼–è¯‘é”™è¯¯å¯ä»¥ç»§ç»­äº†ã€‚åœ¨æˆ‘æŠ¥å‡ºè¿™ä¸ªé—®é¢˜ä¹‹åä¸¤å°æ—¶ï¼Œå¦ä¸€ä½è´¡çŒ®è€…&lt;a href="https://github.com/Ronsor"&gt;@Ronsor&lt;/a&gt;å·²ç»æå‡ºäº†ä¸€ä¸ªPRå»ä¿®å¤è¿™ä¸ªé—®é¢˜äº† &lt;a href="https://github.com/ggerganov/llama.cpp/pull/139"&gt;Don't use vdotq_s32 if it's not available #139&lt;/a&gt;ï¼Œç‚¹èµã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;é¢„å¤„ç†æ¨¡å‹&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# obtain the original LLaMA model weights and place them in ./models&lt;/span&gt;
ls&lt;span class="w"&gt; &lt;/span&gt;./models
65B&lt;span class="w"&gt; &lt;/span&gt;30B&lt;span class="w"&gt; &lt;/span&gt;13B&lt;span class="w"&gt; &lt;/span&gt;7B&lt;span class="w"&gt; &lt;/span&gt;tokenizer_checklist.chk&lt;span class="w"&gt; &lt;/span&gt;tokenizer.model

&lt;span class="c1"&gt;# install Python dependencies&lt;/span&gt;
python3&lt;span class="w"&gt; &lt;/span&gt;-m&lt;span class="w"&gt; &lt;/span&gt;pip&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;torch&lt;span class="w"&gt; &lt;/span&gt;numpy&lt;span class="w"&gt; &lt;/span&gt;sentencepiece

&lt;span class="c1"&gt;# convert the 7B model to ggml FP16 format&lt;/span&gt;
python3&lt;span class="w"&gt; &lt;/span&gt;convert-pth-to-ggml.py&lt;span class="w"&gt; &lt;/span&gt;models/7B/&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;

&lt;span class="c1"&gt;# quantize the model to 4-bits&lt;/span&gt;
./quantize.sh&lt;span class="w"&gt; &lt;/span&gt;7B
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;æˆ‘ä»¬å°†å‰é¢ä¸‹è½½ä¸‹æ¥çš„æ¨¡å‹æ”¾åˆ°&lt;code&gt;llama.cpp/models&lt;/code&gt;æ–‡ä»¶å¤¹ï¼Œä¸»è¦åŒ…å«&lt;code&gt;7B&lt;/code&gt;æ¨¡å‹æ–‡ä»¶å¤¹å’Œ&lt;code&gt;tokenizer.model&lt;/code&gt;åˆ†è¯å™¨æ¨¡å‹ã€‚ç„¶åä½¿ç”¨&lt;code&gt;convert-pth-to-ggml.py&lt;/code&gt;è¿›è¡Œé¢„å¤„ç†è½¬æ¢æˆFP16ç²¾åº¦ï¼Œæœ€åä½¿ç”¨&lt;code&gt;./quantize.sh&lt;/code&gt;è„šæœ¬è¿›è¡Œ4 bité‡åŒ–ä»¥è¿›ä¸€æ­¥ç¼©å°ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸€æ­¥ä¸»è¦é‡åˆ°çš„è¿™ä¹ˆä¸¤ä¸ªé—®é¢˜&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä½¿ç”¨&lt;code&gt;scp&lt;/code&gt;ä»Macä¸Šä¼ æ–‡ä»¶åˆ°piä¸Šï¼Œç¨å¾®é…ç½®äº†ä¸€ä¼šå„¿ï¼Œä¸»è¦æ˜¯ç­‰å¾…æ—¶é—´è¾ƒé•¿ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨&lt;code&gt;pi&lt;/code&gt;ä¸Šè¿è¡Œ&lt;code&gt;convert-pth-to-ggml.py&lt;/code&gt;è¿™ä¸€æ­¥çš„æ—¶å€™ï¼Œæ¶ˆè€—å†…å­˜å¤ªå¤§OOMè¿›ç¨‹ç›´æ¥è¢«ç³»ç»Ÿkillæ‰äº†ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç®€å•çœ‹äº†ä¸‹&lt;code&gt;convert-pth-to-ggml.py&lt;/code&gt;ï¼Œä¼¼ä¹éƒ½æ˜¯åšä¸€äº›æµ®ç‚¹ç²¾åº¦çš„è½¬æ¢ï¼Œæœ€åç”Ÿæˆçš„ä¹Ÿæ˜¯é€šç”¨çš„æ¨¡å‹æ ¼å¼&lt;code&gt;ggml&lt;/code&gt;ã€‚äºæ˜¯æˆ‘å†³å®šå°è¯•å…ˆç”¨Macåš&lt;code&gt;ggml&lt;/code&gt;è½¬æ¢ï¼Œç„¶åæ‹·è´åˆ°Piä¸Šä½œè¿›ä¸€æ­¥çš„å¤„ç†&lt;code&gt;ggml-model-f16.bin&lt;/code&gt;ã€‚å®æ“å‘ç°è¿™æ ·æ˜¯å¯è¡Œçš„ï¼ŒPiä¹Ÿå¯ä»¥æˆåŠŸçš„è¿è¡Œ&lt;code&gt;quantize.sh&lt;/code&gt;é‡åŒ–è„šæœ¬ã€‚&lt;/p&gt;
&lt;h2&gt;ä½¿ç”¨&lt;code&gt;llama.cpp&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;åˆ°è¿™é‡Œæˆ‘ä»¬çš„å®‰è£…å°±å·²ç»ç»“æŸäº†ï¼Œç´§å¼ åˆå…´å¥‹çš„ä½¿ç”¨æ—¶é—´å¼€å§‹äº†ã€‚å…ˆæ¥è·‘ä¸€ä¸ªç®€å•çš„Hello Worldã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;./main&lt;span class="w"&gt; &lt;/span&gt;-m&lt;span class="w"&gt; &lt;/span&gt;./models/7B/ggml-model-q4_0.bin&lt;span class="w"&gt; &lt;/span&gt;-p&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Hello world!&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-t&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;8&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-n&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;512&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;main: seed = 167882008main: seed = 167882008main: seed = 1678820083
llama_model_load: loading model from &amp;#39;./models/7B/ggml-model-q4_0.bin&amp;#39; - please wait ...
llama_model_load: n_vocab = 32000
llama_model_load: n_ctx   = 512
llama_model_load: n_embd  = 4096
llama_model_load: n_mult  = 256
llama_model_load: n_head  = 32
llama_model_load: n_layer = 32
llama_model_load: n_rot   = 128
llama_model_load: f16     = 2
llama_model_load: n_ff    = 11008
llama_model_load: n_parts = 1
llama_model_load: ggml ctx size = 4529.34 MB
llama_model_load: memory_size =   512.00 MB, n_mem = 16384
llama_model_load: loading model part 1/1 from &amp;#39;./models/7B/ggml-model-q4_0.bin&amp;#39;
llama_model_load: .................................... done
llama_model_load: model size =  4017.27 MB / num tensors = 291

system_info: n_threads = 4 / 4 | AVX = 0 | AVX2 = 0 | AVX512 = 0 | FMA = 0 | NEON = 1 | ARM_FMA = 1 | F16C = 0 | FP16_VA = 0 | WASM_SIMD = 0 | BLAS = 0 | SSE3 = 0 | VSX = 0 | 

main: prompt: &amp;#39;Hello world&amp;#39;
main: number of tokens in prompt = 3
     1 -&amp;gt; &amp;#39;&amp;#39;
 10994 -&amp;gt; &amp;#39;Hello&amp;#39;
  3186 -&amp;gt; &amp;#39; world&amp;#39;

sampling parameters: temp = 0.800000, top_k = 40, top_p = 0.950000, repeat_last_n = 64, repeat_penalty = 1.300000


Hello world! | Welcome to the new site.
We&amp;#39;ve been working hard on a few updates around here and it feels really great to finally share this

main: mem per token = 14368644 bytes
main:     load time = 113492.53 ms
main:   sample time =   987.31 ms
main:  predict time = 3881120.50 ms / 121285.02 ms per token
main:    total time = 4215260.00 ms
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç”Ÿæˆäº†è¿™å¥30è¯çš„å›å¤ï¼ŒPiç”¨äº†1å°æ—¶10åˆ†é’Ÿï¼Œç”Ÿæˆé€Ÿåº¦çº¦ä¸º&lt;code&gt;121 s/Token&lt;/code&gt;ã€‚æœ‰å¯èƒ½æ˜¯æˆ‘ç¼–è¯‘å‡ºäº†é—®é¢˜ï¼Œè¿™ä¸ªåç»­å†ä¿®å¤ä¸€ä¸‹å§ã€‚å½“ç„¶ç”±äºæ—¶é—´å¤ªæ…¢äº†ï¼Œæˆ‘åé¢çš„å‡ ä¸ªç”¨ä¾‹éƒ½ç›´æ¥åœ¨Macä¸Šè¿è¡Œäº†ã€‚&lt;/p&gt;
&lt;p&gt;å†è·‘ä¸€ä¸ªå®˜æ–¹ä¾‹å­&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;./main&lt;span class="w"&gt; &lt;/span&gt;-m&lt;span class="w"&gt; &lt;/span&gt;./models/7B/ggml-model-q4_0.bin&lt;span class="w"&gt; &lt;/span&gt;-p&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Building a website can be done in 10 simple steps:&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-t&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;8&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-n&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;512&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;Building&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;website&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;can&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;be&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;simple&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;steps&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;Start&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;with&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;end&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;goal&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Think&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;about&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;what&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;your&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;audience&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wants&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;achieve&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;before&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;they&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ever&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;visit&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;you&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;site&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;â€“&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;once&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;there&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;how&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;do&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;these&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;users&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;interact&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;it&lt;/span&gt;&lt;span class="err"&gt;?&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;This&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;an&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;important&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;step&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;it&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;will&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;help&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;formulate&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;all&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;those&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;great&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ideas&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;into&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;something&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;that&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;makes&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sense&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;their&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;marketplace&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;
&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Get&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Inspired&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Develop&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Mood&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Board&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;It&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;s always good to have some kinda inspiration board. If youâ€™re thinking about starting from scratch, use Pinterest or other sources (like Behance and Dribbble), as they will give your ideas a direction when it comes time for the visual design phase!&lt;/span&gt;
&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Strategize&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Your&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Content&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Here&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;s where things start to get tricky. You need some kinda content strategy in place here â€“ do you have all of that information ready at hand? Now is also a good time as any to think about wireframes and how users will interact with your site once its built!&lt;/span&gt;
&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Do&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;It&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;With&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Purpose&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Are&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;there&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;particular&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;goals&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="err"&gt;â€™&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;journey&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;this&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;website&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;or&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;simply&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;trying&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;build&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;an&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;online&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;presence&lt;/span&gt;&lt;span class="err"&gt;?&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;If&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;you&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;may&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;want&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;consider&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;using&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;marketing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;automation&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;software&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;like&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Hubspot&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;that&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;allows&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;marketers&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;salespeople&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;work&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;together&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;better&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;This&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;will&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;help&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;them&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;organize&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;your&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;into&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;more&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;logical&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;hierarchy&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;â€“&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;which&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;one&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;those&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;things&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;we&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;love&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;doing&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;
&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Visual&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Design&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;It&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;s time for the fun part, where you think about colors (orange!) layout &amp;amp; typography, etcetera - and then start to design it using Illustrator or Photoshop. At this point in your project its important that all parties involved have a clear understanding of what needs to be done!&lt;/span&gt;
&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;User&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Interface&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Design&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;This&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;when&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;UI&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;designer&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;comes&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;into&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;play&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;â€“&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;they&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;should&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;know&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;how&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;things&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;interact&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;with&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;one&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;another&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;understand&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;goals&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;create&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;an&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;experience&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;seamless&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;it&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;feels&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;like&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;second&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;nature&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;The&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;better&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;this&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;step&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;goes&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;down&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;you&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;will&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;end&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;up&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;having&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;much&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;more&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;engaging&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;website&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;at&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;hand&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;
&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Coding&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Starts&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;After&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;all&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;that&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;planning&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;here&lt;/span&gt;&lt;span class="err"&gt;â€™&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;where&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;coding&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;process&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;begins&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;â€“&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;usually&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;with&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;HTML&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CSS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;first&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;then&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;followed&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Javascript&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;make&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sure&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;your&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;site&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;works&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;flawlessly&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;across&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;multiple&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;browsers&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Test&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Test&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Again&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;And&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Then&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Test&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Some&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;More&lt;/span&gt;&lt;span class="err"&gt;â€¦&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;This&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;phase&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;can&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;go&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;we&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;know&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;this&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;experience&lt;/span&gt;

&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;mem&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;per&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;token&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;14434244&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bytes&lt;/span&gt;
&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="nb"&gt;load&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mf"&gt;4570.61&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ms&lt;/span&gt;
&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;sample&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="mf"&gt;448.29&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ms&lt;/span&gt;
&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;predict&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;138987.47&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ms&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;271.99&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ms&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;per&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;token&lt;/span&gt;
&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;total&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;146495.30&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ms&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;åœ¨Macä¸Šè¿è¡Œçš„é€Ÿåº¦è¿˜æ˜¯éå¸¸å¿«çš„ï¼ˆåºŸè¯ï¼‰ï¼Œç”Ÿæˆ512ä¸ªè¯çš„å›å¤ç”¨äº†2åˆ†26ç§’ï¼Œå¹³å‡&lt;code&gt;0.27 s/Token&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œä»“åº“é‡Œè¿˜åŒ…å«äº†ä¸€ä¸ªå¯¹äºandroidè®¾å¤‡çš„ç¼–è¯‘é€‰é¡¹å’Œå®é™…è¿è¡Œçš„è§†é¢‘ï¼Œæœ‰å…´è¶£çš„è¯»è€…å¯ä»¥è‡ªå·±ç ”ç©¶ä¸‹ã€‚ä¹Ÿæœ‰äººå°è¯•åœ¨ä¸‰æ˜ŸGalaxy S22 Ultraä¸Šè¿è¡Œè¿™ä¸ªæ¨¡å‹ï¼Œé€Ÿåº¦ç«Ÿç„¶å¯ä»¥è¾¾åˆ°&lt;code&gt;1.2s/Token&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2&gt;å°ç»“&lt;/h2&gt;
&lt;p&gt;ç›®å‰æ•´ä¸ªé¡¹ç›®è¿˜æ˜¯å¤„äºä¸€ä¸ªæ¯”è¾ƒåˆçº§çš„å½¢æ€ï¼Œåœ¨RPiä¸Šç”Ÿæˆé€Ÿåº¦ç›¸å½“æ…¢ï¼Œå‡ ä¹ä¸å¯ç”¨ã€‚æ­¤å¤–ï¼Œä½œè€…ä¹Ÿåœ¨READMEä¸­æåˆ°äº†ä¸€äº›é™åˆ¶&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç›®å‰å¾ˆéš¾åˆ¤æ–­é‡åŒ–æ˜¯å¦å½±å“äº†æ¨¡å‹ç”Ÿæˆçš„è´¨é‡ï¼Œéœ€è¦ä¸€äº›æ›´ä¸¥è°¨çš„åŸºå‡†æµ‹è¯•ã€‚&lt;/li&gt;
&lt;li&gt;ç›®å‰æ¨¡å‹å¹¶æ²¡æœ‰ä½¿ç”¨MacOSæä¾›çš„Accelerateæ¡†æ¶ï¼Œå› ä¸ºå¯¹äºæ•´ä¸ªè§£ç å™¨ä¸­å¤§éƒ¨åˆ†å¼ é‡å½¢çŠ¶æ¥è¯´ï¼Œä½¿ç”¨ARM_NEONçš„å†…éƒ¨å®ç°å’Œä½¿ç”¨Accelerateæ¡†æ¶å¹¶æ²¡æœ‰ä»€ä¹ˆæ€§èƒ½å·®åˆ«ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;é™¤å¼€æ€§èƒ½ä¹‹å¤–ï¼Œé¡¹ç›®çš„æŒ‡å¼•è¿˜éœ€è¦æ›´åŠ å®Œå–„ä¸€äº›æ‰èƒ½å¤Ÿæ›´å¥½çš„å¸®åˆ°å¤§å®¶ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ— è®ºå¦‚ä½•ï¼Œåœ¨è®­ç»ƒå’Œè¿è¡Œè¯­è¨€æ¨¡å‹é€æ¸è¦æ±‚æµ·é‡ç®—åŠ›çš„ä»Šå¤©ï¼Œèƒ½æœ‰è¿™æ ·ä¸€ä¸ªæ¨¡å‹è®©ä¸ªäººè®¾å¤‡ä¹Ÿèƒ½è·‘èµ·æ¥ä¸€ä¸ªç”šè‡³è¿˜æŒºå¥½ç”¨çš„æ¨¡å‹ï¼Œè¿˜æ˜¯æŒºè®©äººæ„ŸåŠ¨çš„ã€‚ä¸çŸ¥é“æ˜¯å·§åˆè¿˜æ˜¯ä»€ä¹ˆï¼Œç¬¬ä¸€ä¸ªè·‘é€šçš„è€å…„åœ¨&lt;a href="https://github.com/ggerganov/llama.cpp/issues/58"&gt;Raspberry Pi 4 4GB #58&lt;/a&gt;é‡Œé¢å±•ç¤ºçš„ä¾‹å¥æ˜¯ï¼šâ€œThe first man on the moon was Neil Armstrong..." æ€»è¦æœ‰äººå°è¯•ï¼Œå»å‘ç°ï¼Œå»åšç¬¬ä¸€ä¸ªç™»ä¸Šæœˆçƒçš„äººï¼Œä¸æ˜¯å—ï¼Ÿ&lt;/p&gt;
&lt;h2&gt;å‚è€ƒæ–‡çŒ®&lt;/h2&gt;
&lt;p&gt;å¦‚æœä½ æƒ³è¿›ä¸€æ­¥äº†è§£ç›¸å…³å†…å®¹çš„è¯ï¼Œå¯ä»¥é˜…è¯»ä¸‹é¢çš„æ–‡ç« &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://zhuanlan.zhihu.com/p/612002642"&gt;ChatGPTè®ºæ–‡é˜…è¯»ç³»åˆ—-LLaMA: Open and Efficient Foundation Language Models - çŸ¥ä¹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://zhuanlan.zhihu.com/p/613111988"&gt;LLaMAå¿«é€Ÿä¸Šæ‰‹æŒ‡å—: ä¾¿æ·æ„å»ºâ€œæœ¬åœ°ç‰ˆChatGPTâ€ - çŸ¥ä¹&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="Computer Science"></category></entry><entry><title>[ç¿»è¯‘]ä¿å«è‡ªç”±çš„äº’è”ç½‘ï¼Œæ‹’ç»Web3</title><link href="https://mestrace.github.io/posts/2023/Feb/18/translate-no-to-web3/" rel="alternate"></link><published>2023-02-18T00:00:00+08:00</published><updated>2023-02-18T00:00:00+08:00</updated><author><name>Mestrace</name></author><id>tag:mestrace.github.io,2023-02-18:/posts/2023/Feb/18/translate-no-to-web3/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;åŸæ–‡æ ‡é¢˜ï¼šKeep the web free, say no to Web3&lt;/p&gt;
&lt;p&gt;åŸæ–‡é“¾æ¥ï¼š&lt;a href="https://yesterweb.org/no-to-web3/"&gt;https://yesterweb.org/no-to-web3/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ–°çš„æƒ³æ³•ï¼Œæ–°çš„æ€æ½®ï¼Œä¸‹ä¸€ä»£äº’è”ç½‘ï¼ŒWeb3å¯¹æ¯ä¸ªäººçš„æ„ä¹‰éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ã€‚å¸åœˆçš„é“æ†ç²‰ä¸ä»¬æŠŠè¿™ç§åŸºäºåŒºå— â€¦&lt;/p&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;åŸæ–‡æ ‡é¢˜ï¼šKeep the web free, say no to Web3&lt;/p&gt;
&lt;p&gt;åŸæ–‡é“¾æ¥ï¼š&lt;a href="https://yesterweb.org/no-to-web3/"&gt;https://yesterweb.org/no-to-web3/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ–°çš„æƒ³æ³•ï¼Œæ–°çš„æ€æ½®ï¼Œä¸‹ä¸€ä»£äº’è”ç½‘ï¼ŒWeb3å¯¹æ¯ä¸ªäººçš„æ„ä¹‰éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ã€‚å¸åœˆçš„é“æ†ç²‰ä¸ä»¬æŠŠè¿™ç§åŸºäºåŒºå—é“¾æŠ€æœ¯çš„äº’è”ç½‘ç§°ä¹‹ä¸ºâ€œæœªæ¥â€ã€‚æ— è®ºå¦‚ä½•ï¼Œæœ¬æ–‡å°†ä¼šå®äº‹æ±‚æ˜¯åœ°è®¨è®ºå’Œåˆ†æWeb3çš„æ‰€æœ‰é—®é¢˜ã€‚&lt;/p&gt;
&lt;h2&gt;Web3ç”¨çŒå¥‡çš„è¥é”€æ‰‹æ®µè¿›è¡Œå®£ä¼ &lt;/h2&gt;
&lt;p&gt;è¥é”€çš„ç›®çš„æ˜¯åˆ›é€ éœ€æ±‚ï¼Œæ¿€å‘äººä»¬çš„å…´è¶£ï¼Œä»¥æå‡é”€é‡ã€‚è¥é”€äººå‘˜çš„ç›®çš„æ˜¯é”€å”®å•†å“ï¼Œå› æ­¤ä»–ä»¬ä¸ä¼šå‘Šè¯‰æ¶ˆè´¹è€…è¿™äº›å•†å“çš„åº•å±‚æœºåˆ¶ã€‚ä¸ºäº†æé«˜å¸ä»·ï¼Œå¸åœˆå†…çš„äººä»¬è¿›è¡Œäº†è‡ªæˆ‘è¥é”€ï¼Œåªæ˜¯ä¸ºäº†è®©è‡ªå·±çš„èµ„äº§å¢å€¼ã€‚&lt;/p&gt;
&lt;p&gt;æ­£å› å¦‚æ­¤ï¼ŒTwitterä¸Šçš„å¤§éƒ¨åˆ†Web3å®£ä¼ éƒ½é‡‡ç”¨äº†çŒå¥‡çš„è¥é”€æ‰‹æ®µã€‚è¿™äº›å®£ä¼ ä¸»è¦é’ˆå¯¹åˆå­¦è€…ã€æ–°æ‰‹å’ŒåŠ å¯†è´§å¸äººç¾¤ï¼Œå»¶ç»­äº†åºæ°éª—å±€çš„æ€è·¯ã€‚&lt;/p&gt;
&lt;p&gt;ã€Šåºæ°éª—å±€çš„æ”¿æ²»å­¦ã€‹çš„ä½œè€…ç›ä¸½Â·æ–½æ™®æ—æ ¼åœ¨ä¸€æ¬¡é‡‡è®¿ä¸­å›åº”äº†åŠ å¯†è´§å¸ç‚’ä½œï¼Œâ€œæˆ‘ä¸èƒ½å‘Šè¯‰ä½ æœ‰å¤šå°‘åºæ°éª—å±€ä½¿ç”¨äº†ä½ æ‰€æè¿°çš„æœºåˆ¶æ¥è¿›è¡Œç‚’ä½œã€‚å”¯ä¸€çš„åŒºåˆ«é€šå¸¸æ˜¯è¿™äº›éª—å±€ä½¿ç”¨çš„æ˜¯æ³•å®šè´§å¸ã€‚â€&lt;/p&gt;
&lt;h2&gt;Web3åˆ¶é€ äº†å¤§é‡çš„ä¿¡æ¯ä¸å¯¹ç§°&lt;/h2&gt;
&lt;p&gt;åœ¨ç»æµå­¦ä¸­ï¼Œä¿¡æ¯ä¸å¯¹ç§°è¢«å®šä¹‰ä¸ºåœ¨å¸‚åœºäº¤æ˜“ä¸­ï¼Œä¸€æ–¹æ‹¥æœ‰æ¯”å¦ä¸€æ–¹æ›´å¤šæˆ–æ›´å¥½çš„ä¿¡æ¯ã€‚é‚£äº›å¯èƒ½ä¼šâ€œè¾“â€çš„äººç”±äºç¼ºä¹æ—¶é—´ã€ç²¾åŠ›ã€èµ„æºæˆ–çŸ¥è¯†ï¼Œæ— æ³•ä¿æŠ¤è‡ªå·±ã€‚ä»–ä»¬ä¸æ˜ç™½è‡ªå·±è¦æŠ•èµ„çš„ä¸œè¥¿ï¼Œä¹Ÿæ— æ³•åˆ¤æ–­æ˜¯å¦åº”è¯¥è¿™æ ·åšã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä¸€ä¸ªç½‘ç«™ä»¥Web3ä¸ºå™±å¤´å‘è¡Œä»£å¸æˆ–è€…ä½¿ç”¨ä»£å¸ï¼Œä¸€èˆ¬æ¥è¯´ä»–ä»¬ä¼šæ»¥ç”¨è¿™ç§è¡Œä¸ºã€‚å°±åƒé»‘å¸½å­SEO&lt;sup id="sf-translate-no-to-web3-1-back"&gt;&lt;a href="#sf-translate-no-to-web3-1" class="simple-footnote" title="é»‘å¸½SEOæ˜¯æŒ‡é€šè¿‡ä½œå¼Šæ‰‹æ®µï¼Œè®©ç«™ç‚¹åœ¨æœç´¢å¼•æ“ä¸­å¾—åˆ°æ›´å¥½çš„æ’å"&gt;1&lt;/a&gt;&lt;/sup&gt;ä¸€æ ·ï¼Œåªæœ‰ä¸æ˜å°±é‡Œçš„ç”¨æˆ·æ˜¯å—å®³è€…ã€‚&lt;/p&gt;
&lt;p&gt;åŒºå—é“¾è¡Œä¸šé€šè¿‡ä½¿ç”¨å¤æ‚å’Œéš¾æ‡‚çš„ä¿¡æ¯æŠ€æœ¯ï¼Œé€ æˆäº†è¿™ç§éª—å±€ï¼Œä½†åŒæ—¶ä¹Ÿé€šè¿‡ä¿¡æ¯å…¬å¼€æ¥é˜»æ­¢ä¸æ˜å°±é‡Œçš„äººç¾¤åŠ å…¥ã€‚&lt;/p&gt;
&lt;h2&gt;Web3ä¼šå¯¼è‡´è¿›ä¸€æ­¥çš„ç¯å¢ƒç ´å&lt;/h2&gt;
&lt;p&gt;åŠ å¯†è´§å¸è¡Œä¸šæœ€å—è¯Ÿç—…çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼ŒçŸ¿å·¥ä»¬åœ¨è¿›ä¸€æ­¥ç ´åæœ¬å°±å²Œå²Œå¯å±çš„ç”Ÿæ€ç³»ç»Ÿã€‚åŒºå—é“¾è¡Œä¸šéœ€è¦å¤§é‡çš„ç®—åŠ›ï¼Œè¿™ä¹Ÿå¯¼è‡´äº†å·¨å¤§çš„èƒ½æºæ¶ˆè€—ã€‚ä¸€äº›çŸ¿å·¥ç”šè‡³åŒ…ä¸‹æ•´ä¸ªå‘ç”µå‚æ¥è¿›è¡ŒæŒ–çŸ¿ã€‚&lt;/p&gt;
&lt;p&gt;å‰‘æ¡¥å¤§å­¦çš„æ›¿ä»£é‡‘èä¸­å¿ƒï¼ˆCambridge Centre for Alternative Financeï¼‰ä»2017å¹´å¼€å§‹å‘å¸ƒäº†å‰‘æ¡¥æ¯”ç‰¹å¸ç”µåŠ›æ¶ˆè€—æŒ‡æ•°ï¼ˆ&lt;a href="https://ccaf.io/cbeci/index"&gt;Cambridge Bitcoin Electricity Consumption Index&lt;/a&gt;ï¼‰ã€‚ä»–ä»¬å‘ç°ï¼Œå…¨ç½‘æ¯”ç‰¹å¸æŒ–çŸ¿çš„èƒ½æºæ¶ˆè€—ç”šè‡³è¶…è¿‡äº†ä¸€äº›å°å›½å®¶ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œæ°”å€™ç¾å®³ä¹Ÿä¼šå½±å“äººä»¬çš„ç”Ÿæ´»ï¼Œä»è€Œå½±å“æ•´ä¸ªäº’è”ç½‘ã€‚å°½ç®¡è®¸å¤šäººè°´è´£åŒºå—é“¾è¡Œä¸šå¯¹ç¯å¢ƒçš„æŸå®³ï¼Œä½†å¤§å¤šæ•°äººä¼¼ä¹å¿½ç•¥äº†è¿™ä¸€ç‚¹ã€‚éšç€æ°”å€™å˜åŒ–å¼•èµ·çš„è‡ªç„¶ç¾å®³çš„é¢‘ç‡ã€å¼ºåº¦å’ŒæŒç»­æ—¶é—´çš„ä¸æ–­å¢åŠ ï¼Œè®¸å¤šä»ä¸šè€…å¯èƒ½æ— æ³•åº”å¯¹ã€‚&lt;/p&gt;
&lt;h2&gt;Web3åªæ˜¯æŠ•æœºè€…å’Œå¤§é³„çš„å¹¸å­˜è€…åå·®&lt;/h2&gt;
&lt;p&gt;åœ¨æ–°é¡¹ç›®å‘å¸ƒæ—¶ï¼Œåˆ›å§‹äººé€šå¸¸ä¼šå±•ç¤ºé¡¹ç›®ä»¥å¯»æ±‚èèµ„ï¼Œä½†å…¬ä¼—å¹¶ä¸çŸ¥é“è¯¥é¡¹ç›®æ˜¯å¦ä¼šæˆåŠŸã€‚åªæœ‰ç›¸ä¿¡è¯¥é¡¹ç›®çš„äººæ‰ä¼šæŠ•èµ„ã€‚ç„¶è€Œï¼Œå½“é¡¹ç›®å¤±è´¥æ—¶ï¼Œè¿™äº›é’±å°†æ— æ³•è¿”è¿˜ã€‚å› æ­¤ï¼Œé‚£äº›æŠ•å…¥èµ„é‡‘æœ€å¤šçš„äººé€šå¸¸ä¹Ÿæ˜¯æœ€å¯Œæœ‰çš„äººã€‚å½“ä¸€ä¸ªäººèº«ä»·è¿‡äº¿æ—¶ï¼ŒæŸå¤±50ä¸‡å¯¹ä»–æ¥è¯´åªæ˜¯ä¹ç‰›ä¸€æ¯›ã€‚å½“æ‰€æœ‰é¡¹ç›®åˆ›å§‹äººéƒ½åœ¨ç­¹æ¬¾æ—¶ï¼Œé‚£äº›è·å¾—æœ€å¤šæŠ•èµ„çš„é¡¹ç›®æ›´æœ‰å¯èƒ½æˆåŠŸã€‚è¿™ä¹Ÿæ„å‘³ç€ï¼Œåªæœ‰é‚£äº›æ—©æœŸå¹¸å­˜è€…å’ŒæŠ•èµ„è€…æ‰èƒ½ç”Ÿå­˜å¹¶å‘å‡ºæœ€å“äº®çš„å£°éŸ³ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶æœ‰äº›äººè®¤ä¸ºåŠ å¯†è´§å¸æ˜¯èµšé’±çš„æ–¹æ³•ï¼Œä½†å²è’‚èŠ¬Â·è¿ªå°”ï¼ˆStephen Diehlï¼‰åœ¨æœ€è¿‘çš„ä¸€æ¬¡é‡‡è®¿ä¸­å°†åŠ å¯†è´§å¸æè¿°ä¸ºâ€œä¸€ç§å·¨å¤§çš„é€†è½¬ç¨ï¼Œå°†é’±ä»ç©·äººå’Œæ–‡ç›²è½¬ç§»åˆ°æ—©æœŸé‡‡ç”¨è€…ã€æŠ•èµ„è€…å’ŒæŠ€æœ¯äººå‘˜ã€‚â€ä»–ç»§ç»­è¯´é“ï¼Œâ€œå”¯ä¸€çœŸæ­£çš„ç»ˆæç›®æ ‡æ˜¯é‡æ–°åˆ›é€ å·²ç»å­˜åœ¨çš„ç³»ç»Ÿï¼Œåªä¸è¿‡æœ‰æ–°çš„æ§åˆ¶è€…åœ¨æŒæ§ç€å®ƒã€‚â€&lt;/p&gt;
&lt;p&gt;æ¢å¥è¯è¯´ï¼Œé‚£äº›æœ€æ—©è¿›å…¥å¸‚åœºçš„äººã€æ‹¥æœ‰æ›´å¤šèµ„é‡‘çš„äººã€æ‹¥æœ‰æ›´å¤šä¿¡æ¯å’ŒæŠ€æœ¯çš„äººï¼Œå°†æ˜¯Web3çš„æœ€å¤§å—ç›Šè€…ã€‚Web3çš„ä¸–ç•Œå°†æœ‰æ›´å¤šçš„å·¨å¤´å’Œå°‘æ•°äººè·å¾—æ›´å¤šçš„å¥½å¤„ï¼Œè€Œç©·äººå’Œæ–‡ç›²å°†æˆä¸ºæŸå¤±çš„ä¸€æ–¹ã€‚è¿™åªæ˜¯æ–°çš„æŠ€æœ¯é©å‘½çš„å¸¸è§ç°è±¡ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€å®ƒæ˜¯å…¬å¹³å’Œå¯æŒç»­çš„ã€‚&lt;/p&gt;
&lt;h2&gt;Web3ä»äººä¸ºåˆ¶é€ çš„ç¨€ç¼ºæ€§è·åˆ©&lt;/h2&gt;
&lt;p&gt;åŒºå—é“¾è¡Œä¸šä»ä¸šè€…åœ¨æŠ€æœ¯åº”è¯¥æé«˜ç”Ÿäº§åŠ›å’Œå…±äº«åŠ›çš„å‰æä¸‹ï¼Œå´ä¸æ–­æ–½åŠ äººä¸ºç¨€ç¼ºæ€§ä»¥è·å–åˆ©ç›Šã€‚&lt;/p&gt;
&lt;p&gt;æœ‰ä¸€ç¯‡æ–°é—»æŠ¥é“æŒ‡å‡ºï¼Œâ€œæ•°å­—ç¨€ç¼ºæ€§â€æ˜¯ä¸€ç§åäººç±»è¿›åŒ–çš„æ„è¯†å½¢æ€ï¼Œå®ƒå¼ºåˆ¶æ‰§è¡Œç±»ä¼¼æ£‹ç›˜æ¸¸æˆçš„è§„åˆ™ï¼Œä½†è¿™äº›è§„åˆ™å¹¶æ²¡æœ‰å…¶ä»–ç›®çš„ï¼Œåªæ˜¯ä¸ºäº†ç»´æŒè¿™ä¸ªæ¸¸æˆçš„å­˜åœ¨ã€‚è¿™äº›è§„åˆ™æ—¨åœ¨æ©ç›–èµ„æœ¬ä¸»ä¹‰å†…åœ¨çš„çŸ›ç›¾ï¼Œè€Œè¿™ç§çŸ›ç›¾åœ¨å·²ç»æ‘†è„±ç¨€ç¼ºæ€§çš„Web2é¢†åŸŸä¸­å˜å¾—æ›´åŠ åˆºçœ¼ã€‚&lt;/p&gt;
&lt;p&gt;â€œç‚’ä½œå’ŒæŠ›å”®â€æ˜¯ä¸€ç§å¸¸è§çš„åŠ å¯†è´§å¸è¯ˆéª—æ–¹å¼ã€‚è¿™ç§è¯ˆéª—åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†â€”â€”ç¬¬ä¸€éƒ¨åˆ†æ˜¯é€šè¿‡å¤§é‡å®£ä¼ æ¥æ¨é«˜æŸä¸ªé¡¹ç›®çš„ä»·æ ¼ï¼ˆå’Œéœ€æ±‚ï¼‰ã€‚ç„¶åï¼Œåœ¨ä»£å¸ä»·æ ¼ä¸Šæ¶¨æ—¶ï¼ŒæŒå¸è€…å°†å…¶æŠ›å”®ç»™é‚£äº›ç›¸ä¿¡å®ƒä»¬çœŸæ­£æœ‰ä»·å€¼çš„äººä»¥è·åˆ©ã€‚&lt;/p&gt;
&lt;h2&gt;Web3è®©æŠ•èµ„äººè¶Šé™·è¶Šæ·±&lt;/h2&gt;
&lt;p&gt;è¿‘æ¥ï¼Œè¶Šæ¥è¶Šå¤šçš„å¤§å‹æŠ•èµ„äººå¼€å§‹å…³æ³¨è¿™ä¸ªè¡Œä¸šï¼Œå¹¶æŠ•å…¥äº†èµ„é‡‘ã€‚ä»–ä»¬æ‹¥æœ‰è¶³å¤Ÿçš„è´¢åŠ›å’Œå½±å“åŠ›æ¥æ¨å¹¿å’Œæ¨åŠ¨Web3çš„æ™®åŠã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬å¿…é¡»å¥½å¥½æ€è€ƒä¸€ä¸‹è¿™ä¸ªé—®é¢˜ï¼šæˆ‘ä»¬çœŸçš„éœ€è¦Web3å—ï¼Ÿæˆ–è€…åªæ˜¯å› ä¸ºä¸€äº›å·²ç»æŠ•å…¥äº†å¤§é‡é‡‘é’±çš„æŠ•èµ„äººä¸æ„¿æ„æ‰¿è®¤è‡ªå·±çš„é”™è¯¯ï¼Œè€Œç»§ç»­çŠ¯é”™ï¼Œæ¨å¹¿Web3ï¼Ÿ&lt;/p&gt;
&lt;h2&gt;å†™åœ¨æœ€å&lt;/h2&gt;
&lt;p&gt;è¯·è®°ä½ï¼šæ¨åŠ¨Web3å’Œä»»ä½•å…¶ä»–åŠ å¯†è´§å¸ç›¸å…³çš„äººï¼Œéƒ½æ˜¯ä»ä¸­è·åˆ©çš„äººã€‚&lt;/p&gt;
&lt;p&gt;Web3åªä¼šè¿›ä¸€æ­¥åŠ å‰§ç¤¾ä¼šå’Œç»æµå±‚æ¬¡çš„åˆ†åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä¸å¿…ä¾é Web3æ¥å»ºç«‹ä¸€ä¸ªæ›´å¥½ã€æ›´è‡ªç”±ã€å»ä¸­å¿ƒåŒ–çš„äº’è”ç½‘ã€‚&lt;/p&gt;
&lt;h3&gt;è¿›ä¸€æ­¥é˜…è¯»&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://palladiummag.com/2022/01/21/when-the-stagnation-goes-virtual/"&gt;When the Stagnation Goes Virtual&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://player.fm/series/tech-wont-save-us/web3-is-a-scam-not-a-revolution-w-stephen-diehl"&gt;Web3 is a Scam, Not a Revolution [Podcast]&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://web3isgoinggreat.com/"&gt;Web3 is [Not] Going Great&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.youtube.com/watch?v=YQ_xWvX1n9g"&gt;The Problem with NFTs by Folding Ideas [Video]&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.stephendiehl.com/blog/web3-bullshit.html"&gt;Web3 is Bullshit&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://gwennseemel.com/blog/2021/1216-web-free-point-oh/"&gt;Web Free Point Oh&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.usenix.org/publications/loginonline/web3-fraud"&gt;Web3 Fraud&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://soatok.blog/2021/10/19/against-web3-and-faux-decentralization/"&gt;Against Web3 and Faux Decentralization&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://invisibleup.com/articles/38/"&gt;Web3 is Not Decentralization&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/bugout-dev/moonstream/blob/main/datasets/nfts/papers/ethereum-nfts.pdf"&gt;An Analysis of 7,020,950 NFT Transactions on the Ethereum Blockchain&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://letslearntogether.neocities.org/compute/futureweb01.html"&gt;Future Web&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;æ›´è¿›ä¸€æ­¥é˜…è¯»&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.consumer.ftc.gov/articles/what-know-about-cryptocurrency-and-scams"&gt;What to Know About Cryptocurrency Scams&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.bloomberg.com/opinion/articles/2021-11-30/omicron-crypto-is-a-bet-on-attention"&gt;Omicron Crypto Is a Bet on Attention&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://mashable.com/article/influencers-altcoin-scams"&gt;Inside the Shady World of Influencers Promoting Cryptocurrency&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.msn.com/en-us/money/other/an-nft-just-sold-for-532-million-but-didn-t-really-sell-at-all/ar-AAQ5nZY"&gt;An NFT just Sold for $532 mil but Didn't Really Sell at All&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.nature.com/articles/s41598-021-00053-8"&gt;Mapping the NFT Revolution: Market Trends, Trade Networks and Visual Features&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://ojs.bibsys.no/index.php/NIK/article/view/911"&gt;Bitcoin and Blockchain Security: A Study in Misconceptions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://rorodi.substack.com/p/the-biggest-crypto-lending-company"&gt;The Biggest Crypto-Lending Company is a Massive Scam&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å…¨æ–‡å®Œ&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;ä¸€äº›ä¸ªäººçš„çœ‹æ³•&lt;/h2&gt;
&lt;p&gt;Web3çš„é©æ–°é¢„è®¡ä¸ä¼šåœ¨æœªæ¥åå¹´å†…å‘ç”Ÿã€‚è®¸å¤šæ¨åŠ¨è€…å’Œé¼“å¹è€…æ›´åŠ å…³å¿ƒçš„æ˜¯å¦‚ä½•ä»ä¸­è·åˆ©ï¼Œè€Œä¸æ˜¯å®ç°Free Webã€‚å¹¶ä¸”ï¼ŒåŒºå—é“¾è¡Œä¸šçš„å‘å±•å·²ç»è¿œç¦»äº†ä¸­æœ¬èªçš„åˆè¡·ã€‚å°½ç®¡è¯¥è¡Œä¸šçš„å£å·æ˜¯å»ä¸­å¿ƒåŒ–ï¼Œä½†å¯¹äºå¤§å¤šæ•°äººè€Œè¨€ï¼Œæœ€å®¹æ˜“æ¥è§¦åˆ°çš„å¹³å°ä»ç„¶æ˜¯ä¸­å¿ƒåŒ–çš„ã€‚æ¯”å¦‚å¸å®‰è‡ªç§°æ˜¯å…¨çƒæœ€å¤§çš„åŠ å¯†èµ„äº§äº¤æ˜“å¹³å°ã€‚å¦‚æœæ— æ³•å®ç°å»ä¸­å¿ƒåŒ–ï¼Œé‚£ä¹ˆWeb3æ‰€æ»¡è¶³çš„åªä¼šæ˜¯èµ„æœ¬ï¼Œè¿™å°†è¿›ä¸€æ­¥åŠ å‰§è´«å¯Œå·®è·ã€‚&lt;/p&gt;
&lt;hr&gt;&lt;ol class="simple-footnotes"&gt;&lt;li id="sf-translate-no-to-web3-1"&gt;é»‘å¸½SEOæ˜¯æŒ‡é€šè¿‡ä½œå¼Šæ‰‹æ®µï¼Œè®©ç«™ç‚¹åœ¨æœç´¢å¼•æ“ä¸­å¾—åˆ°æ›´å¥½çš„æ’å &lt;a href="#sf-translate-no-to-web3-1-back" class="simple-footnote-back"&gt;â†©ï¸&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;</content><category term="Computer Science"></category><category term="Blockchain"></category></entry><entry><title>ç”¨ Python è¿›è¡Œä»£ç è¦†ç›–ç‡æ£€æµ‹ï¼šcoverage.py å’Œdiff-cover çš„ä½¿ç”¨æ–¹æ³•</title><link href="https://mestrace.github.io/posts/2023/Feb/05/python-coverage-diff-cover/" rel="alternate"></link><published>2023-02-05T00:00:00+08:00</published><updated>2023-02-05T00:00:00+08:00</updated><author><name>Mestrace</name></author><id>tag:mestrace.github.io,2023-02-05:/posts/2023/Feb/05/python-coverage-diff-cover/</id><summary type="html">&lt;p&gt;åœ¨é‡æ„é¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ç¡®è®¤ä»£ç æµ‹è¯•çš„è¦†ç›–ç‡ã€‚è¿™æ˜¯ä¸ºäº†ç¡®ä¿æ²¡æœ‰ä»»ä½•éƒ¨åˆ†é—æ¼æˆ–è€…é”™è¯¯ï¼Œä»è€Œä½¿é‡æ„å˜å¾—æ›´å®‰å…¨ â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;åœ¨é‡æ„é¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ç¡®è®¤ä»£ç æµ‹è¯•çš„è¦†ç›–ç‡ã€‚è¿™æ˜¯ä¸ºäº†ç¡®ä¿æ²¡æœ‰ä»»ä½•éƒ¨åˆ†é—æ¼æˆ–è€…é”™è¯¯ï¼Œä»è€Œä½¿é‡æ„å˜å¾—æ›´å®‰å…¨ã€‚ä¸ºäº†å¸®åŠ©æˆ‘ä»¬å®ç°è¿™ä¸€ç›®æ ‡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸¤ä¸ª Python åŒ…æ¥å¸®åŠ©æˆ‘ä»¬ &lt;code&gt;coverage.py&lt;/code&gt; å’Œ &lt;code&gt;diff-cover&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;coverage.py&lt;/code&gt;æ˜¯ä¸€ä¸ªä»£ç æ’æ¡©å·¥å…·ï¼Œå®ƒèƒ½å¤Ÿç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Šã€‚å®ƒçš„å®˜æ–¹ä»“åº“æ˜¯https://github.com/nedbat/coveragepyã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;diff-cover&lt;/code&gt;åˆ™æ˜¯ä¸€ä¸ªæ¯”å¯¹xmlæ ¼å¼çš„coverageæ–‡ä»¶çš„å·¥å…·ï¼Œå®ƒèƒ½å¤Ÿå°†å½“å‰çš„è¦†ç›–ç‡ä¸origin/mainæˆ–æŒ‡å®šçš„commitè¿›è¡Œæ¯”å¯¹ã€‚æ›´å¤šä¿¡æ¯è¯·å‚è€ƒå®ƒçš„å®˜æ–¹ä»“åº“ï¼šhttps://github.com/Bachmann1234/diff_coverã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚æœæ‚¨çš„æµ‹è¯•è¿è¡Œå‘½ä»¤ä»¥&lt;code&gt;python&lt;/code&gt;å¼€å¤´ï¼Œåªéœ€è¦å°†åˆå§‹çš„&lt;code&gt;python&lt;/code&gt;æ›¿æ¢ä¸º&lt;code&gt;coverage run&lt;/code&gt;å³å¯ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If your test runner command starts with â€œpythonâ€, just replace the initial â€œpythonâ€ with â€œcoverage runâ€.&lt;/p&gt;
&lt;p&gt;python something.py becomes coverage run something.py&lt;/p&gt;
&lt;p&gt;python -m amodule becomes coverage run -m amodule&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨è¿è¡Œå®Œè¦†ç›–ç‡çš„è„šæœ¬ä¹‹åï¼Œä½ çš„é¡¹ç›®ç›®å½•ä¸­ä¼šå¤šå‡ºä¸€ä¸ª.coverageçš„å…ƒæ•°æ®æ–‡ä»¶ã€‚ä¸ºäº†ä½¿ç»“æœæ›´åŠ ç›´è§‚ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶è¿›ä¸€æ­¥è§£æä¸ºæ›´æœ‰è¯´æœåŠ›çš„å½¢å¼ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;coverage report --skip-covered --precision 2 --sort Cover&lt;/code&gt; å‘½ä»¤ï¼Œä½ å¯ä»¥åœ¨å‘½ä»¤è¡Œçª—å£ä¸­çœ‹åˆ°æ¯ä¸€ä¸ªæ–‡ä»¶çš„è¦†ç›–ç‡æƒ…å†µï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Name&lt;span class="w"&gt;                             &lt;/span&gt;Stmts&lt;span class="w"&gt;   &lt;/span&gt;Miss&lt;span class="w"&gt;   &lt;/span&gt;Cover
-----------------------------------------------------
admin/models.py&lt;span class="w"&gt;                      &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.00%
admin/views.py&lt;span class="w"&gt;                       &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.00%
api/models.py&lt;span class="w"&gt;                        &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.00%
api/views.py&lt;span class="w"&gt;                         &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.00%
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;é€šè¿‡ä½¿ç”¨ &lt;code&gt;coverage html&lt;/code&gt; å‘½ä»¤ï¼Œä½ è¿˜å¯ä»¥åœ¨é¡¹ç›®ç›®å½•ä¸­ç”Ÿæˆä¸€ä¸ªhtmlæ–‡æ¡£ç«™ï¼Œä»¥æŸ¥çœ‹æ›´è¯¦ç»†çš„è¦†ç›–ç‡ä¿¡æ¯ï¼Œä»¥åŠè¦†ç›–äº†å“ªäº›ä»£ç è¡Œã€‚&lt;/p&gt;
&lt;p align="center"&gt;
  &lt;img src="https://mestrace.github.io/images/1/coverage_html.jpeg" /&gt;
&lt;/p&gt;

&lt;p align="center"&gt;
  &lt;img src="https://mestrace.github.io/images/gei_li.png" /&gt;
&lt;/p&gt;

&lt;p&gt;åœ¨å¯¹ä¸€ä¸ªå·¨å¤§çš„ä»£ç åº“è¿›è¡Œä¿®æ”¹ä¹‹åï¼Œæ•´ä¸ªé¡¹ç›®çš„è¦†ç›–ç‡å¹¶ä¸ä¼šæœ‰æ˜æ˜¾çš„æ”¹å˜ï¼ŒåŒæ—¶ä¹Ÿå¾ˆéš¾å®šä½å…³æ³¨ç‚¹ã€‚ä¸ºäº†ç¡®ä¿æˆ‘ä»¬çš„ä»£ç ä¿®æ”¹å·²ç»è¢«è¦†ç›–åˆ°ï¼Œæˆ‘ä»¬éœ€è¦æå‡æµ‹è¯•ç”¨ä¾‹çš„è¦†ç›–ç‡ï¼Œå¦‚æœæ²¡æœ‰è¦†ç›–åˆ°çš„è¯ï¼Œæˆ‘ä»¬éœ€è¦è¡¥å……æµ‹è¯•ç”¨ä¾‹ã€‚æœ‰äººå¯èƒ½è¯´ï¼Œè¿™å¾ˆç®€å•ï¼Œåªéœ€è¦å¯¹æ¯”ç›®æ ‡åˆ†æ”¯å’Œå½“å‰åˆ†æ”¯çš„å·®å¼‚ï¼Œå†å»çœ‹å¯¹åº”è¡Œæ˜¯å¦å·²ç»è¢«æµ‹è¯•è¦†ç›–äº†ã€‚å¹¸è¿çš„æ˜¯ï¼Œå·²ç»æœ‰äººä¸ºæˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ªå·¥å…·diff-coverï¼ˆhttps://pypi.org/project/diff-cover/ ï¼‰ã€‚ä½¿ç”¨coverage.pyå’Œdiff-coverç»“åˆï¼Œæˆ‘ä»¬å¯ä»¥è¿…é€Ÿæ‰¾åˆ°æœªè¢«è¦†ç›–åˆ°çš„ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Šï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;coverage xml -o test.xml&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨diff-coverè¯»å–è¯¥æŠ¥å‘Šï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;diff-cover test.xml --compare-branch origin/master --html-report diff-cover.html&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;å…¶ä¸­ï¼Œcompare-branchå‚æ•°éœ€è¦æŒ‡å®šç”¨äºä¸å½“å‰åˆ†æ”¯è¿›è¡Œdiffçš„åˆ†æ”¯ï¼Œhtml-reportå‚æ•°åˆ™è¾“å‡ºhtmlæ ¼å¼çš„è¦†ç›–ç‡æŠ¥å‘Šã€‚æ‰§è¡Œå‘½ä»¤åï¼Œä¸ä»…ä¼šåœ¨å‘½ä»¤è¡Œä¸­è¾“å‡ºç±»ä¼¼å¦‚ä¸‹çš„è¦†ç›–ç‡ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;-------------
Diff Coverage
Diff: origin/master...HEAD, staged and unstaged changes
-------------
account/controllers.py (76.5%): Missing lines 246,302,310,316
account/dao.py (90.3%): Missing lines 262,265,277
account/views.py (0.0%): Missing lines 179,187
-------------
Total:   50 lines
Missing: 9 lines
Coverage: 82%
-------------
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;è¿˜ä¼šç”Ÿæˆä¸€ä¸ªåŒ…å«å…·ä½“ä»£ç è¦†ç›–è¡Œçš„htmlæ–‡æ¡£&lt;/p&gt;
&lt;p align="center" width="50%" height="50%"&gt;
  &lt;img src="https://mestrace.github.io/images/1/diff_cover_html.jpeg" /&gt;
&lt;/p&gt;

&lt;p align="center"&gt;
  &lt;img src="https://mestrace.github.io/images/gei_li.png" /&gt;
&lt;/p&gt;

&lt;p&gt;åœ¨ä½¿ç”¨ &lt;code&gt;coverage.py&lt;/code&gt; è¿›è¡Œä»£ç æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Šæ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°åŒ…å«ä¸å¿…è¦æ–‡ä»¶å’Œè¡Œçš„æƒ…å†µã€‚ä¾‹å¦‚ï¼ŒDjango è‡ªåŠ¨ç”Ÿæˆçš„ &lt;code&gt;manage.py&lt;/code&gt; æ–‡ä»¶å°±ä¸éœ€è¦æˆ‘ä»¬å…³æ³¨ã€‚åŒæ ·åœ°ï¼Œä»£ç è¡Œ &lt;code&gt;raise NotImplementedError&lt;/code&gt; ä¹Ÿæ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒä»¬å±è”½ï¼Œä»¥æé«˜ä»£ç æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Šçš„ç²¾åº¦ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿è¡Œ &lt;code&gt;coverage.py&lt;/code&gt; æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;omit=[pattern1,pattern2â€¦]&lt;/code&gt; é€‰é¡¹å¿½ç•¥æŸäº›æ— å…³çš„æ–‡ä»¶ï¼Œä»¥åŠä½¿ç”¨ &lt;code&gt;exclude_lines = [pattern1, pattern2]&lt;/code&gt; é€‰é¡¹å¿½ç•¥æŸäº›æ— å…³çš„è¡Œã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨å‘½ä»¤ &lt;code&gt;coverage run --omit="tests" --source='.' manage.py test --keepdb&lt;/code&gt; å¯ä»¥å¿½ç•¥æ–‡ä»¶ååŒ…å« "tests" çš„æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡ï¼Œæ¯æ¬¡éƒ½è¦æ‰‹åŠ¨è¾“å…¥ &lt;code&gt;omit&lt;/code&gt; å’Œ &lt;code&gt;exclude-line&lt;/code&gt; é€‰é¡¹éå¸¸éº»çƒ¦ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹é…ç½® &lt;code&gt;.coveragerc&lt;/code&gt; æ–‡ä»¶ï¼Œä¸€æ¬¡æ€§é…ç½®æ‰€æœ‰é€‰é¡¹ã€‚&lt;code&gt;.coveragerc&lt;/code&gt; æ–‡ä»¶ä½¿ç”¨ toml æ ¼å¼ç¼–å†™ï¼Œåœ¨è¿è¡Œ &lt;code&gt;coverage run / coverage report / coverage html&lt;/code&gt; å‘½ä»¤æ—¶ä¼šè¯»å–å…¶ä¸­çš„å€¼å¹¶ä½œä¸ºå‚æ•°ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯æˆ‘åœ¨ django é¡¹ç›®ä¸­ä½¿ç”¨çš„ &lt;code&gt;.coveragerc&lt;/code&gt; æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;[run]&lt;/span&gt;
&lt;span class="na"&gt;source&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;.&lt;/span&gt;
&lt;span class="na"&gt;omit&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;./venv/,*tests,apps.py,*manage.py,_init_.py,migrations,asgi,wsgi,*admin.py,*urls.py&lt;/span&gt;

&lt;span class="k"&gt;[report]&lt;/span&gt;
&lt;span class="na"&gt;omit&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;./venv/,*tests,apps.py,*manage.py,_init_.py,migrations,asgi,wsgi,*admin.py,*urls.py&lt;/span&gt;
&lt;span class="na"&gt;exclude_lines&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="na"&gt;pragma&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;no cover&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="na"&gt;def _repr_&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="na"&gt;if self.debug&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="na"&gt;if settings.DEBUG&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="na"&gt;raise AssertionError&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="na"&gt;raise NotImplementedError&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="na"&gt;if 0&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="na"&gt;if _name_&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;= ._main_.:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="na"&gt;class .*\bProtocol\)&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="na"&gt;@(abc\.)?abstractmethod&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;å‚è€ƒèµ„æ–™ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;coverage.py&lt;/code&gt; çš„å®˜æ–¹æ–‡æ¡£ https://coverage.readthedocs.io/en/7.1.0/&lt;/li&gt;
&lt;li&gt;&lt;code&gt;diff-cover&lt;/code&gt; çš„å®˜æ–¹æ–‡æ¡£ https://diff-cover.readthedocs.io/en/latest/README.html&lt;/li&gt;
&lt;li&gt;&lt;code&gt;.coveragerc&lt;/code&gt; æ–‡ä»¶æ¥è‡ª https://stackoverflow.com/questions/1628996/is-it-possible-exclude-test-directories-from-coverage-py-reports&lt;/li&gt;
&lt;li&gt;&lt;code&gt;coverage.py&lt;/code&gt; çš„ Django æ’ä»¶ https://pypi.org/project/django-coverage-plugin/&lt;/li&gt;
&lt;/ol&gt;</content><category term="Computer Science"></category><category term="Python"></category></entry><entry><title>RocketMQæ˜¯ä»€ä¹ˆ</title><link href="https://mestrace.github.io/posts/2021/Sep/11/rocket-mq-history/" rel="alternate"></link><published>2021-09-11T00:00:00+08:00</published><updated>2021-09-11T00:00:00+08:00</updated><author><name>Mestrace</name></author><id>tag:mestrace.github.io,2021-09-11:/posts/2021/Sep/11/rocket-mq-history/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;Apache RocketMQ is a distributed messaging and streaming platform with low latency, high performance and reliability, trillion-level capacity and flexible scalability.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;RocketMQ æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œå…¶å…·æœ‰ä½å»¶è¿Ÿã€é«˜æ€§èƒ½å’Œå¯é æ€§ã€ä¸‡äº¿çº§å®¹ â€¦&lt;/p&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;Apache RocketMQ is a distributed messaging and streaming platform with low latency, high performance and reliability, trillion-level capacity and flexible scalability.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;RocketMQ æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œå…¶å…·æœ‰ä½å»¶è¿Ÿã€é«˜æ€§èƒ½å’Œå¯é æ€§ã€ä¸‡äº¿çº§å®¹é‡ã€çµæ´»çš„å¯æ‰©å±•æ€§ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt="å¼‚æ„æ•°æ®ä¸‹çš„ETL(Extract, Transform and Load) å¤„ç†" src="https://mestrace.github.io/images/2/etl_process.png"&gt;&lt;/p&gt;
&lt;p&gt;Kafkaè¯ç”Ÿäºæ‰€è°“çš„â€œå¤§æ•°æ®â€æ—¶ä»£çš„æ—©æœŸ, æœ¬è´¨æ˜¯LinkedInä¸ºäº†è§£å†³åœ¨ä¸åŒå­ç³»ç»Ÿä¸­è¿›è¡Œæ—¥å¿—æµåŒæ­¥çš„äº§ç‰©. åœ¨è®¾è®¡ä¹‹åˆå°±ä¸“æ³¨äºå¯¹äºè§£å†³ETL(Extract, transform, and load) åœºæ™¯è¿ç»­, å¤§é‡çš„æ¶ˆæ¯æ•°æ®çš„ç”Ÿäº§ä¸æ¶ˆè´¹. ä½œä¸ºä¸€ä¸ªé€šç”¨åœºæ™¯çš„MQç³»ç»Ÿ, Kafkaåœ¨å¤§æ•°æ®é¢†åŸŸçš„å®æ—¶è®¡ç®—ä»¥åŠæ—¥å¿—é‡‡é›†é¢†åŸŸè¢«å¤§è§„æ¨¡ä½¿ç”¨. åŸºäºKafka, LinkedInæ„å»ºäº†ä¸€ä¸ªä»¥æ—¥å¿—ä¸ºä¸­å¿ƒçš„å¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿ. æ¯å¤©äº§ç”Ÿè¶…è¿‡600äº¿æ¡æ•°æ®. &lt;/p&gt;
&lt;p&gt;&lt;img alt="Kafkaåœ¨LinkedInçš„ä½¿ç”¨åœºæ™¯" src="https://mestrace.github.io/images/2/linkedin_kafka_usage.png"&gt;&lt;/p&gt;
&lt;p&gt;æ— ç–‘, åŸºäºMQæ„å»ºçš„æ•°æ®é©±åŠ¨çš„ç³»ç»Ÿç»™ä¸šåŠ¡ä¸Šå¸¦æ¥äº†å„ç§å„æ ·çš„ä¾¿åˆ©å’Œç®€åŒ–. è¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…åŸºäºKafkaæ¥æ„å»ºå„ç§åº”ç”¨. éšç€æ—¶é—´çš„æ¨ç§», å¤§é‡çš„ä½¿ç”¨ä¹Ÿæš´éœ²äº†Kafkaçš„åœ¨ä¸åŒåœºæ™¯ä¸‹çš„ç¼ºé™·, ä¾‹å¦‚ç¼ºä¹é‡è¯•æœºåˆ¶, éä¸¥æ ¼é¡ºåºæ¶ˆè´¹, å’Œä¸æ”¯æŒåˆ†å¸ƒå¼äº‹åŠ¡. å› æ­¤, é˜¿é‡Œå·´å·´ä¸­é—´ä»¶å›¢é˜Ÿé’ˆå¯¹è®¢å•, äº¤æ˜“å’Œå……å€¼åœºæ™¯ä¸‹å¯¹äºMQçš„ä½¿ç”¨è¿›è¡Œäº†ä¼˜åŒ–, å¹¶ä¸ApacheåŸºé‡‘ä¼šä¸€èµ·å¼€æºäº†RocketMQ. RocketMQåœ¨æ·˜å®çš„å„ç§æ´»åŠ¨åœºæ™¯ç»å†äº†å¤§é‡çš„è€ƒéªŒ. 2017å¹´, é˜¿é‡Œå·´å·´å°†RocketMQå¼€æºå¹¶æèµ ç»™ApacheåŸºé‡‘ä¼š, ç”±ç¤¾åŒºè¿›è¡Œç»´æŠ¤.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Rocket MQçš„å†å²" src="https://mestrace.github.io/images/2/kafka_history.png"&gt;&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªæœ‰æ„æ€çš„ç‚¹: RocketMQé¡¹ç›®åªç»´æŠ¤æ ¸å¿ƒåŠŸèƒ½ï¼Œä¸”å»é™¤äº†æ‰€æœ‰å…¶ä»–è¿è¡Œæ—¶ä¾èµ–ï¼Œæ ¸å¿ƒåŠŸèƒ½æœ€ç®€åŒ–ã€‚æ¯ä¸ªBUçš„ä¸ªæ€§åŒ–éœ€æ±‚éƒ½åœ¨RocketMQé¡¹ç›®ä¹‹ä¸Šè¿›è¡Œæ·±åº¦å®šåˆ¶ã€‚RocketMQå‘å…¶ä»–BUæä¾›çš„ä»…ä»…æ˜¯JaråŒ…ï¼Œä¾‹å¦‚è¦å®šåˆ¶ä¸€ä¸ªBrokerï¼Œé‚£ä¹ˆåªéœ€è¦ä¾èµ–rocketmq-brokerè¿™ä¸ªjaråŒ…å³å¯ï¼Œå¯é€šè¿‡APIè¿›è¡Œäº¤äº’ï¼Œå¦‚æœå®šåˆ¶clientï¼Œåˆ™ä¾èµ–rocketmq-clientè¿™ä¸ªjaråŒ…ï¼Œå¯¹å…¶æä¾›çš„apiè¿›è¡Œå†å°è£…ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åè¯&lt;/th&gt;
&lt;th&gt;å®šä¹‰&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ç”Ÿäº§ç»„ Producer Group&lt;/td&gt;
&lt;td&gt;æ ‡è¯†å‘é€åŒä¸€ç±»æ¶ˆæ¯çš„Producerï¼Œé€šå¸¸å‘é€é€»è¾‘ä¸€è‡´ã€‚å‘é€æ™®é€šæ¶ˆæ¯çš„æ—¶å€™ï¼Œä»…æ ‡è¯†ä½¿ç”¨ï¼Œå¹¶æ— ç‰¹åˆ«ç”¨å¤„ã€‚ è‹¥äº‹åŠ¡æ¶ˆæ¯ï¼Œå¦‚æœæŸæ¡å‘é€æŸæ¡æ¶ˆæ¯çš„producer-Aå®•æœºï¼Œä½¿å¾—äº‹åŠ¡æ¶ˆæ¯ä¸€ç›´å¤„äºPREPAREDçŠ¶æ€å¹¶è¶…æ—¶ï¼Œåˆ™brokerä¼šå›æŸ¥åŒä¸€ä¸ªgroupçš„å…¶ ä»–producerï¼Œç¡®è®¤è¿™æ¡æ¶ˆæ¯åº”è¯¥commitè¿˜æ˜¯rollbackã€‚ä½†å¼€æºç‰ˆæœ¬å¹¶ä¸æ”¯æŒäº‹åŠ¡æ¶ˆæ¯ã€‚ æ³¨: å­—èŠ‚RMQæš‚ä¸æ”¯æŒäº‹åŠ¡.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;æ¶ˆè´¹ç»„ Consumer Group&lt;/td&gt;
&lt;td&gt;æ ‡è¯†ä¸€ç±»Consumerçš„é›†åˆåç§°ï¼Œè¿™ç±»Consumeré€šå¸¸æ¶ˆè´¹ä¸€ç±»æ¶ˆæ¯ï¼Œä¸”æ¶ˆè´¹é€»è¾‘ä¸€è‡´ã€‚åŒä¸€ä¸ªConsumer Groupä¸‹çš„å„ä¸ªå®ä¾‹å°†å…±åŒæ¶ˆè´¹topicçš„æ¶ˆæ¯ï¼Œèµ·åˆ°è´Ÿè½½å‡è¡¡çš„ä½œç”¨ã€‚ æ¶ˆè´¹è¿›åº¦ä»¥Consumer Groupä¸ºç²’åº¦ç®¡ç†ï¼Œä¸åŒConsumer Groupä¹‹é—´æ¶ˆè´¹è¿›åº¦å½¼æ­¤ä¸å—å½±å“ï¼Œå³æ¶ˆæ¯Aè¢«Consumer Group1æ¶ˆè´¹è¿‡ï¼Œä¹Ÿä¼šå†ç»™Consumer Group2æ¶ˆè´¹ã€‚ æ³¨ï¼š RocketMQè¦æ±‚åŒä¸€ä¸ªConsumer Groupçš„æ¶ˆè´¹è€…å¿…é¡»è¦æ‹¥æœ‰ç›¸åŒçš„æ³¨å†Œä¿¡æ¯ï¼Œå³å¿…é¡»è¦ç›‘å¬ä¸€æ ·çš„topic(å¹¶ä¸”tagä¹Ÿä¸€æ ·)ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Topic&lt;/td&gt;
&lt;td&gt;æ ‡è¯†ä¸€ç±»æ¶ˆæ¯çš„é€»è¾‘åå­—ï¼Œæ¶ˆæ¯çš„é€»è¾‘ç®¡ç†å•ä½ã€‚æ— è®ºæ¶ˆæ¯ç”Ÿäº§è¿˜æ˜¯æ¶ˆè´¹ï¼Œéƒ½éœ€è¦æŒ‡å®šTopicã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Tag&lt;/td&gt;
&lt;td&gt;RocketMQæ”¯æŒç»™åœ¨å‘é€çš„æ—¶å€™ç»™topicæ‰“tagï¼ŒåŒä¸€ä¸ªtopicçš„æ¶ˆæ¯è™½ç„¶é€»è¾‘ç®¡ç†æ˜¯ä¸€æ ·çš„ã€‚ä½†æ˜¯æ¶ˆè´¹topic1çš„æ—¶å€™ï¼Œå¦‚æœä½ è®¢é˜…çš„æ—¶å€™æŒ‡å®šçš„æ˜¯tagAï¼Œé‚£ä¹ˆtagBçš„æ¶ˆæ¯å°†ä¸ä¼šæŠ•é€’ã€‚ æ³¨: PPEæ³³é“ä¸æ˜¯ä»¥è¿™ç§æ–¹å¼å®ç°çš„&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;é€»è¾‘é˜Ÿåˆ— Message Queue&lt;/td&gt;
&lt;td&gt;æ¶ˆæ¯ç‰©ç†ç®¡ç†å•ä½ã€‚ä¸€ä¸ªTopicå°†æœ‰è‹¥å¹²ä¸ªQueueã€‚è‹¥TopicåŒæ—¶åˆ›å»ºåœ¨ä¸é€šçš„Brokerï¼Œåˆ™ä¸åŒçš„brokerä¸Šéƒ½æœ‰è‹¥å¹²Queueï¼Œæ¶ˆæ¯å°†ç‰©ç†åœ°å­˜å‚¨è½åœ¨ä¸åŒBrokerç»“ç‚¹ä¸Šï¼Œå…·æœ‰æ°´å¹³æ‰©å±•çš„èƒ½åŠ›ã€‚ æ— è®ºç”Ÿäº§è€…è¿˜æ˜¯æ¶ˆè´¹è€…ï¼Œå®é™…çš„ç”Ÿäº§å’Œæ¶ˆè´¹éƒ½æ˜¯é’ˆå¯¹Queueçº§åˆ«ã€‚ä¾‹å¦‚Producerå‘é€æ¶ˆæ¯çš„æ—¶å€™ï¼Œä¼šé¢„å…ˆé€‰æ‹©ï¼ˆé»˜è®¤è½®è¯¢ï¼‰å¥½è¯¥Topicä¸‹é¢çš„æŸä¸€æ¡Queueåœ°å‘é€.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;é›†ç¾¤æ¶ˆè´¹&lt;/td&gt;
&lt;td&gt;æ¶ˆè´¹è€…çš„ä¸€ç§æ¶ˆè´¹æ¨¡å¼ã€‚ä¸€ä¸ªConsumer Groupä¸­çš„å„ä¸ªConsumerå®ä¾‹åˆ†æ‘Šå»æ¶ˆè´¹æ¶ˆæ¯ï¼Œå³ä¸€æ¡æ¶ˆæ¯åªä¼šæŠ•é€’åˆ°ä¸€ä¸ªConsumer Groupä¸‹é¢çš„ä¸€ä¸ªå®ä¾‹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å¹¿æ’­æ¶ˆè´¹&lt;/td&gt;
&lt;td&gt;æ¶ˆè´¹è€…çš„ä¸€ç§æ¶ˆè´¹æ¨¡å¼ã€‚æ¶ˆæ¯å°†å¯¹ä¸€ä¸ªConsumer Groupä¸‹çš„å„ä¸ªConsumerå®ä¾‹éƒ½æŠ•é€’ä¸€éã€‚å³å³ä½¿è¿™äº› Consumer å±äºåŒä¸€ä¸ªConsumer Groupï¼Œæ¶ˆæ¯ä¹Ÿä¼šè¢«Consumer Group ä¸­çš„æ¯ä¸ªConsumeréƒ½æ¶ˆè´¹ä¸€æ¬¡ã€‚ æ³¨: å­—èŠ‚RMQæš‚ä¸æ”¯æŒå¹¿æ’­æ¶ˆè´¹&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;</content><category term="Computer Science"></category></entry><entry><title>ç®€å•èŠèŠMySQL Binlog</title><link href="https://mestrace.github.io/posts/2021/Aug/30/mysql-binlog-basics/" rel="alternate"></link><published>2021-08-30T00:00:00+08:00</published><updated>2021-08-30T00:00:00+08:00</updated><author><name>Mestrace</name></author><id>tag:mestrace.github.io,2021-08-30:/posts/2021/Aug/30/mysql-binlog-basics/</id><summary type="html">&lt;p&gt;Binlog (binary log)æ˜¯ä¸€ç»„æ—¥å¿—æ–‡ä»¶ï¼ŒåŒ…å«äº†å¯¹MySQLæœåŠ¡å™¨è¿›è¡Œçš„æ•°æ®ä¿®æ”¹å’Œå˜æ›´ï¼Œå¹¶æŒä¹…åŒ–åˆ°ç£ç›˜ä¸­ã€‚Binlogä»¥äº‹ä»¶çš„æ ¼å¼å­˜å‚¨ï¼ŒåŒ…æ‹¬äº†æ‰€æœ‰çš„DDLå’ŒDMLè¯­å¥ï¼ˆä¾‹å¦‚æ•°æ®è¡¨Schemaçš„åˆ›å»ºå’Œå˜æ›´ï¼Œä»¥åŠæ•°æ®è¡Œçš„å˜æ›´ï¼‰ã€‚æ­¤å¤–ï¼Œæ¯ä¸ªBinlog â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;Binlog (binary log)æ˜¯ä¸€ç»„æ—¥å¿—æ–‡ä»¶ï¼ŒåŒ…å«äº†å¯¹MySQLæœåŠ¡å™¨è¿›è¡Œçš„æ•°æ®ä¿®æ”¹å’Œå˜æ›´ï¼Œå¹¶æŒä¹…åŒ–åˆ°ç£ç›˜ä¸­ã€‚Binlogä»¥äº‹ä»¶çš„æ ¼å¼å­˜å‚¨ï¼ŒåŒ…æ‹¬äº†æ‰€æœ‰çš„DDLå’ŒDMLè¯­å¥ï¼ˆä¾‹å¦‚æ•°æ®è¡¨Schemaçš„åˆ›å»ºå’Œå˜æ›´ï¼Œä»¥åŠæ•°æ®è¡Œçš„å˜æ›´ï¼‰ã€‚æ­¤å¤–ï¼Œæ¯ä¸ªBinlog eventè¿˜å›Šæ‹¬äº†ä¸€äº›é¢å¤–çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä½†ä¸é™äº&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¯­å¥æ‰§è¡Œæ—¶é—´&lt;/li&gt;
&lt;li&gt;è¯­å¥æ‰§è¡Œæ—¶MySQL Serverçš„ç›¸å…³çŠ¶æ€&lt;/li&gt;
&lt;li&gt;é”™è¯¯ç &lt;/li&gt;
&lt;li&gt;Binlogæœ¬èº«çš„å…ƒä¿¡æ¯ï¼ˆå¦‚&lt;code&gt;rotate&lt;/code&gt;æ—¥å¿—ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»¥åŠå…¶ä»–æ‰€æœ‰èƒ½å¤Ÿè®©æ­¤Binlog eventèƒ½å¤Ÿè¢«å‡†ç¡®çš„é‡æ”¾çš„ä¿¡æ¯ã€‚ç†æƒ³æ¡ä»¶ä¸‹ï¼Œåœ¨ä¸¤å°MySQLæœåŠ¡å™¨ä¸ŠåŒæ—¶æ‰§è¡Œç›¸åŒçš„Binlog eventï¼Œæœ€ç»ˆä¸¤å°MySQLæœåŠ¡å™¨é‡Œçš„æ•°æ®çŠ¶æ€ä¸€è‡´ã€‚
Binlogçš„ä¸»è¦ä½œç”¨æœ‰ä¸¤ä¸ªï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;MySQLé›†ç¾¤ä¸­ï¼Œå¯¹äºä¸»åº“çš„å˜æ›´ä¼šé€šè¿‡BinlogåŒæ­¥åˆ°ä»åº“ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;æ•°æ®æ¢å¤çš„åœºæ™¯ä¸‹ï¼Œå¯ä»¥é‡æ”¾Binlogä»¥å°†æ•°æ®æ¢å¤åˆ°æœ€æ–°çš„çŠ¶æ€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ¬æ–‡å°†ä¸»è¦ä»‹ç»Binlogçš„æ–‡ä»¶æ ¼å¼å’Œæ—¥å¿—äº‹ä»¶ï¼Œå¹¶ç®€å•æ¦‚æ‹¬ç›¸å…³çš„åº”ç”¨åœºæ™¯ã€‚&lt;/p&gt;
&lt;h2&gt;æ–‡ä»¶æ ¼å¼&lt;/h2&gt;
&lt;figure align="center"&gt;
  &lt;img src="https://mestrace.github.io/images/6/binlog-file.png" /&gt;
  &lt;figcaption&gt;Binlogçš„æ–‡ä»¶æ ¼å¼&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;ul&gt;
&lt;li&gt;Binlogæ—¥å¿—ä¸»è¦åŒ…æ‹¬ä¸¤ç±»æ–‡ä»¶æ„æˆï¼šä¸€ä¸ªæ—¥å¿—ç´¢å¼•ï¼ˆæ–‡ä»¶åç¼€ä¸º&lt;code&gt;.index&lt;/code&gt;ï¼‰å’Œæ•°ä¸ªæ—¥å¿—æ–‡ä»¶ï¼ˆæ–‡ä»¶åç¼€ä¸º&lt;code&gt;.NNNNNN&lt;/code&gt;ï¼Œ&lt;code&gt;N&lt;/code&gt;ä¸ºä¸€ä¸ªæ•°å­—ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ç´¢å¼•æ–‡ä»¶é‡ŒåŒ…å«äº†æ‰€æœ‰çš„æ—¥å¿—æ–‡ä»¶çš„åç§°ï¼Œå¹¶è®°å½•äº†å½“å‰æ´»è·ƒ(Active)çš„æ—¥å¿—æ–‡ä»¶ï¼ˆå³å½“å‰æœ€æ–°çš„æ–‡ä»¶ï¼‰&lt;/li&gt;
&lt;li&gt;æ—¥å¿—æ–‡ä»¶é¦–å…ˆä»¥ä¸€ä¸ªé­”æ•°å¼€å¤´ï¼Œç´§æ¥ç€å°±æ˜¯ä¸€ç³»åˆ—åŒ…å«DDLå’ŒDMLçš„binlog eventsäº‹ä»¶&lt;/li&gt;
&lt;li&gt;é­”æ•°ï¼š&lt;code&gt;0xfe 0x62 0x69 0x6e = 0xfe 'b''i''n'&lt;/code&gt; &lt;/li&gt;
&lt;li&gt;æ—¥å¿—æ–‡ä»¶çš„ç¬¬ä¸€ä¸ªäº‹ä»¶æ€»æ˜¯&lt;code&gt;FORMAT_DESCRIPTION_EVENT / START_EVENT_V3&lt;/code&gt;ï¼Œæè¿°äº†å½“å‰æ—¥å¿—æ–‡ä»¶çš„ä¸€äº›ç³»ç»ŸåŸºå‡†ä¿¡æ¯ï¼ŒåŒ…æ‹¬Binlogçš„ç‰ˆæœ¬ï¼ŒMySQL Serverçš„ç‰ˆæœ¬å’Œæ–‡ä»¶åˆ›å»ºæ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;éšåçš„äº‹ä»¶åˆ™æ ¹æ®äº‹ä»¶ç±»å‹æœ‰æ‰€ä¸åŒï¼Œä¸»è¦æ˜¯åŒ…å«äº†å¯¹äºæ•°æ®çš„å˜æ›´ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;æœ€åï¼Œå¦‚æœè¿™ä¸ªæ–‡ä»¶ä¸æ˜¯å½“å‰çš„æ´»è·ƒæ—¥å¿—ï¼Œåˆ™å®ƒä¼šä»¥ä¸€ä¸ª&lt;code&gt;Rotate&lt;/code&gt;äº‹ä»¶ç»“æŸï¼Œå¹¶è®°å½•äº†ä¸‹ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶çš„åç§°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;figure align="center"&gt;
  &lt;img src="https://mestrace.github.io/images/6/binlog-content.png" /&gt;
  &lt;figcaption&gt;Binlogçš„äº‹ä»¶æ ¼å¼&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;é™¤äº†ç›¸å…³çš„ç®¡ç†äº‹ä»¶ä»¥å¤–ï¼ŒåŒ…å«æ•°æ®æ›´æ–°çš„Binlogäº‹ä»¶é€šå¸¸ä»¥æ—¥å¿—ç»„(Group)çš„å½¢å¼å‡ºç°ï¼ˆå¦‚ä¸Šå›¾ï¼‰ã€‚ä¸€ç»„äº‹ä»¶åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªBinlogäº‹ä»¶ã€‚ä¸€ä¸ªäº‹åŠ¡ä¸­æ‰€æœ‰çš„è¯­å¥ä¼šè¢«å½’å±åˆ°åŒä¸€ä¸ªæ—¥å¿—ç»„ã€‚è€Œå¯¹äºå…¶ä»–äº‹åŠ¡æ— å…³çš„è¯­å¥æ¥è¯´ï¼ˆå¦‚ALTER TABLEï¼ŒGRANTç­‰ï¼‰ï¼Œæ¯ä¸€ä¸ªè¯­å¥ä¼šè¢«å½’å±äºä¸€ä¸ªç‹¬ç«‹çš„æ—¥å¿—ç»„ã€‚å½“éœ€è¦ä»¥Binlogä¸ºåŸºç¡€è¿›è¡Œæ•°æ®å¤åˆ¶æˆ–æ¢å¤æ—¶ï¼Œæ¯ä¸ªç»„ä¼šè¢«é¡ºåºæ‰§è¡Œï¼Œä¸”ç»„ä¸­çš„è¯­å¥è¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚&lt;/p&gt;
&lt;h2&gt;æ—¥å¿—äº‹ä»¶&lt;/h2&gt;
&lt;p&gt;Binlogä¸»è¦æœ‰ä¸‰ç§æ¨¡å¼ã€‚
- åŸºäºè¯­å¥çš„æ¨¡å¼(Statement-basedï¼ŒSBR)åŒ…å«å®é™…æ‰§è¡Œçš„SQLè¯­å¥ï¼ˆå¦‚&lt;code&gt;INSERT&lt;/code&gt;ã€&lt;code&gt;UPDATE&lt;/code&gt;ã€&lt;code&gt;DELETE&lt;/code&gt;ï¼‰ã€‚
  - ç¼ºç‚¹ï¼šä¸ä»…éœ€è¦è®°å½•æ‰§è¡Œçš„è¯­å¥ï¼Œè€Œä¸”éœ€è¦é¢å¤–è®°å½•è¯­å¥ç›¸å…³çš„çŠ¶æ€ä¿¡æ¯ï¼Œä»¥ä¿è¯é‡æ”¾çš„æ—¶å€™èƒ½å¤Ÿäº§ç”Ÿç›¸åŒçš„ç»“æœã€‚åœ¨æç«¯æƒ…å†µä¸‹ï¼Œä¸€äº›éç¡®å®šæ€§(non-deterministic)çš„è¯­å¥å¯èƒ½ä¼šäº§ç”Ÿä¸é¢„æœŸä¸ä¸€è‡´çš„ç»“æœã€‚
- åŸºäºè¡Œçš„æ¨¡å¼(Row-basedï¼ŒRBR)åŒ…å«å¯¹äºæ¯ä¸€ä¸ªæ•°æ®è¡Œçš„å˜æ›´ã€‚
  - ç¼ºç‚¹ï¼šä¼šäº§ç”Ÿå¤§é‡çš„è¡Œè¯­å¥ï¼Œå¯èƒ½ä¼šå¼•èµ·ç£ç›˜æ€§èƒ½é—®é¢˜ï¼Œä¸”æ¢å¤çš„æ—¶å€™éœ€è¦æ›´å¤šçš„æ—¶é—´ã€‚
- æ··åˆæ¨¡å¼(Mixedï¼Œ MBR)ä¸»è¦åŸºäºè¯­å¥çš„æ¨¡å¼ï¼Œåœ¨ä¸€äº›ä¸å®‰å…¨ï¼ˆunsafeï¼‰çš„åœºæ™¯ä¸‹ï¼ˆè§[4]ï¼‰ï¼Œä¼šåˆ‡æ¢ä¸ºåŸºäºè¡Œçš„æ¨¡å¼ã€‚
  - åœ¨ä½¿ç”¨æ— æ³•ç¡®å®šç»“æœçš„&lt;code&gt;AUTO_INCREMENT&lt;/code&gt;ï¼Œ&lt;code&gt;LAST_INSERT_ID()&lt;/code&gt;æˆ–&lt;code&gt;TIMESTAMP&lt;/code&gt;æ—¶ï¼ˆè§[5]ï¼‰
  - å½“functionåŒ…å«UUID()
  - å½“ä½¿ç”¨å‚¨å­˜è¿‡ç¨‹çš„æ—¶å€™
åŸºäºè¯­å¥å’ŒåŸºäºè¡Œçš„æ¨¡å¼çš„æ›´ç»†èŠ‚çš„å¯¹æ¯”è§å‚è€ƒæ–‡çŒ®[3]ã€‚&lt;/p&gt;
&lt;figure align="center"&gt;
  &lt;img src="https://mestrace.github.io/images/6/binlog-event-mindmap.png" /&gt;
  &lt;figcaption&gt;Binlogçš„äº‹ä»¶ç±»å‹&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;æ¯ä¸€ä¸ªäº‹ä»¶éƒ½ç”±äº‹ä»¶å¤´Headerå’Œäº‹ä»¶ä½“Event Dataç»„æˆã€‚
- ä¸€ä¸ªäº‹ä»¶å¤´æœ‰ 19 å­—èŠ‚ï¼Œä¾æ¬¡æ’åˆ—ä¸ºï¼šæ—¶é—´æˆ³ï¼Œäº‹ä»¶ç±»å‹ï¼ŒæœåŠ¡å™¨IDï¼Œäº‹ä»¶é•¿åº¦ï¼Œä¸‹ä¸€ä¸ªäº‹ä»¶çš„byte offsetï¼Œå’Œæ ‡è¯†ç¬¦ã€‚
- ä¸€ä¸ªäº‹ä»¶ä½“ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œä¸€ä¸ªå›ºå®šé•¿åº¦çš„Post-Headerå’Œä¸€ä¸ªå¯å˜é•¿åº¦çš„Payloadç»„æˆã€‚Post-Headerçš„é•¿åº¦å¯¹äºæ¯ä¸€ç§äº‹ä»¶æ¥è¯´æ˜¯å›ºå®šçš„ï¼Œä½†æ˜¯ä¸åŒäº‹ä»¶æ˜¯ä¸ä¸€æ ·çš„ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;+============+==========================+
|            |        Timestamp         |
|            |         4 bytes          |
|            +--------------------------+
|            |        Type Code         |
|            |          1 byte          |
|            +--------------------------+
|            |        Server ID         |
|            |         4 bytes          |
|   Header   +--------------------------+
|            |       Event Length       |
|            |         4 bytes          |
|            +--------------------------+
|            |      Next Position       |
|            |         4 bytes          |
|            +--------------------------+
|            |          Flags           |
|            |         2 bytes          |
+------------+--------------------------+
|            | Fixed Part (Post-Header) |
| Event Data +--------------------------+
|            | Variable Part (Payload)  |
+============+==========================+
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;å½“é…ç½®ä¸åŒçš„Binlogæ¨¡å¼æ—¶ï¼Œå‚¨å­˜çš„çš„Binlogäº‹ä»¶ä¸å°½ç›¸åŒã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€äº›å…¬å…±çš„äº‹ä»¶ï¼Œå¦‚ç®¡ç†äº‹ä»¶ï¼Œåœ¨æ‰€æœ‰æ¨¡å¼ä¸‹éƒ½ä¼šäº§ç”Ÿã€‚&lt;/li&gt;
&lt;li&gt;Statementå’ŒRowæ¨¡å¼ä¸‹å„æœ‰æ•°ç§ç‹¬ç‰¹çš„äº‹ä»¶ã€‚ä¸¾ä¸ªä¾‹å­ï¼ŒROWS_EVENTå°±ä¸ä¼šå‡ºç°åœ¨Statementæ¨¡å¼ä¸‹ã€‚&lt;/li&gt;
&lt;li&gt;åªæœ‰åœ¨å¼€å¯æŸäº›é…ç½®ä¹‹åæ‰ä¼šå¼€å¯çš„äº‹ä»¶ï¼Œå¦‚GTID_EVENT&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å‡ ç§å¸¸è§çš„äº‹ä»¶&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;FORMAT_DESCRIPTION_EVENT&lt;/code&gt; / &lt;code&gt;START_EVENT_V3&lt;/code&gt;ï¼šä¸¤ç§æ—¥å¿—æ–‡ä»¶çš„èµ·å§‹äº‹ä»¶ï¼Œä¸»è¦æ˜¯æ ¹æ®Binlogç‰ˆæœ¬ä¸åŒè€Œä½¿ç”¨ä¸åŒçš„äº‹ä»¶ã€‚ä¸»è¦è®°å½•äº†Binlogç‰ˆæœ¬å·ï¼ŒMySQL Serverç‰ˆæœ¬å·ï¼Œå¼€å§‹æ—¶é—´ã€‚åœ¨Payloadä¸­ä¼šé™„å¸¦æ¯ç§äº‹ä»¶æšä¸¾å€¼æ‰€å¯¹åº”çš„Post-Headeré•¿åº¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ROTATE_EVENT&lt;/code&gt;ï¼šå½“æ—¥å¿—æ–‡ä»¶éœ€è¦åˆ‡æ¢æ—¶æ‰€è®°å½•çš„æœ€åä¸€ä¸ªäº‹ä»¶ï¼Œä¿å­˜äº†ç´§æ¥ç€ä¸‹ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶åç§°ã€‚åˆ‡æ¢æ—¥å¿—æ–‡ä»¶çš„æ¡ä»¶ï¼š1ï¼‰å½“å‰æ´»è·ƒçš„æ—¥å¿—æ–‡ä»¶å¤§å°è¶…è¿‡&lt;code&gt;max_binlog_size&lt;/code&gt;ï¼Œæˆ–2ï¼‰æ‰§è¡Œ&lt;code&gt;flush logs;&lt;/code&gt;å‘½ä»¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;QUERY_EVENT&lt;/code&gt;ï¼šè®°å½•äº†è¢«æ‰§è¡Œçš„SQLè¯­å¥ï¼Œç›¸å…³çš„ç»Ÿè®¡/debugä¿¡æ¯ï¼ˆæ‰§è¡Œæ—¶é—´ï¼Œthread idç­‰ï¼‰ï¼Œå’Œç›¸å…³çš„çŠ¶æ€ä¿¡æ¯ï¼ˆæ˜¯å¦éœ€è¦auto incrementï¼Œcharsetï¼Œtzç­‰ï¼‰ã€‚æ­¤äº‹ä»¶é€šå¸¸è®°å½•çš„è¯­å¥ä¸ºï¼š1ï¼‰äº‹åŠ¡å¼€å§‹æ—¶çš„Beginæ“ä½œï¼Œ2ï¼‰Statementæ¨¡å¼ä¸‹çš„DMLæ“ä½œï¼Œ3ï¼‰Rowæ¨¡å¼ä¸‹çš„DDLæ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;DELETE_ROWS_EVENT&lt;/code&gt; / &lt;code&gt;UPDATE_ROWS_EVENT&lt;/code&gt;/ &lt;code&gt;WRITE_ROWS_EVENT&lt;/code&gt;ï¼šè¿™ä¸‰ç§ç»Ÿç§°ä¸ºROWS_EVENTï¼Œåˆ†åˆ«å¯¹åº”&lt;code&gt;INSERT&lt;/code&gt;, &lt;code&gt;UPDATE&lt;/code&gt;å’Œ&lt;code&gt;DELETE&lt;/code&gt;æ“ä½œï¼Œè®°å½•åœ¨Rowæ¨¡å¼ä¸‹æ‰€æœ‰çš„DMLè¯­å¥ã€‚&lt;code&gt;INSERT&lt;/code&gt;åŒ…æ‹¬éœ€è¦æ’å…¥çš„æ‰€æœ‰æ•°æ®ï¼›&lt;code&gt;UPDATE&lt;/code&gt;åŒ…æ‹¬ä¿®æ”¹å‰çš„å€¼å’Œä¿®æ”¹åçš„å€¼ï¼›&lt;code&gt;DELETE&lt;/code&gt;æ“ä½œåŒ…å«è¢«åˆ é™¤çš„ä¸»é”®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;ä¸¾ä¸ªä¾‹å­&lt;/h2&gt;
&lt;p&gt;å½“å‰MySQLç‰ˆæœ¬&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;mysql Ver 14.14 Distrib 5.7.35-38, for debian-linux-gnu (x86_64) using 7.0
Percona Server (GPL), Release &amp;#39;38&amp;#39;, Revision &amp;#39;3692a61&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;è®¾ç½®binlog&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# æŸ¥çœ‹ / å˜æ›´è®¾ç½® - binlog&lt;/span&gt;
vi&lt;span class="w"&gt; &lt;/span&gt;/etc/mysql/percona-server.conf.d/mysqld.cnf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;åœ¨mysql shellå†…æŸ¥çœ‹binlogç›¸å…³äº‹ä»¶&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;-- æŸ¥çœ‹mysqlç‰ˆæœ¬&lt;/span&gt;
&lt;span class="k"&gt;show&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;variables&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;like&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;%version%&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="c1"&gt;-- æŸ¥çœ‹å½“å‰MySQLæœåŠ¡çš„binlogç›¸å…³çŠ¶æ€&lt;/span&gt;
&lt;span class="k"&gt;show&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;variables&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;like&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;%binlog%&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="c1"&gt;-- æŸ¥çœ‹å½“å‰æ‰€æœ‰çš„binlogæ–‡ä»¶åˆ—è¡¨&lt;/span&gt;
&lt;span class="k"&gt;show&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;binary&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;logs&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="c1"&gt;-- æŸ¥çœ‹å½“å‰æ‰€æœ‰çš„binlogï¼›&lt;/span&gt;
&lt;span class="k"&gt;show&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;binlog&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;events&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="c1"&gt;-- æŸ¥çœ‹å½“å‰binlog with paging&lt;/span&gt;
&lt;span class="k"&gt;show&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;binlog&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;events&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;mysql-bin.000002&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;624&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;limit&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="k"&gt;G&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="c1"&gt;-- flushå½“å‰binlogæ–‡ä»¶ï¼Œrotateåˆ°ä¸‹ä¸€ä¸ªbinlogæ–‡ä»¶&lt;/span&gt;
&lt;span class="n"&gt;flush&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;logs&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ä½¿ç”¨mysqlbinlogå·¥å…·æŸ¥çœ‹binlog&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# è¿›å…¥mysqlç›®å½•éœ€è¦æœ‰suæƒé™&lt;/span&gt;
sudo&lt;span class="w"&gt; &lt;/span&gt;su
&lt;span class="nb"&gt;cd&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;/var/log/mysql
&lt;span class="c1"&gt;# æŸ¥çœ‹binlogç´¢å¼•æ–‡ä»¶&lt;/span&gt;
cat&lt;span class="w"&gt; &lt;/span&gt;bin-mysql.index
&lt;span class="c1"&gt;# æŸ¥çœ‹binlogæ—¥å¿—æ–‡ä»¶ - statement&lt;/span&gt;
mysqlbinlog&lt;span class="w"&gt; &lt;/span&gt;--no-defaults&lt;span class="w"&gt; &lt;/span&gt;bin-mysql.000001
&lt;span class="c1"&gt;# æŸ¥çœ‹binlogæ—¥å¿—æ–‡ä»¶ - row&lt;/span&gt;
mysqlbinlog&lt;span class="w"&gt; &lt;/span&gt;--no-defaults&lt;span class="w"&gt; &lt;/span&gt;--base64-output&lt;span class="o"&gt;=&lt;/span&gt;DECODE-ROWS&lt;span class="w"&gt; &lt;/span&gt;-v&lt;span class="w"&gt; &lt;/span&gt;bin-mysql.000002
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;åº”ç”¨åœºæ™¯&lt;/h2&gt;
&lt;p&gt;å‰é¢è®²äº†ï¼ŒBinlogçš„æ ¸å¿ƒå–ç‚¹å°±æ˜¯èƒ½è®©å‘ç”Ÿåœ¨ä¸€ä¸ªMySQLå®ä¾‹ä¸Šçš„æ‰€æœ‰æ•°æ®æ›´æ–°èƒ½å¤Ÿå®Œæ•´çš„åœ¨å…¶ä»–MySQLå®ä¾‹ä¸Šé‡æ”¾ã€‚MySQL 5.0å¼•å…¥Binlogä»¥æ”¯æŒä¸»ä»å¤åˆ¶ï¼Œä»¥å®ç°ç¾éš¾æ¢å¤ã€æ°´å¹³æ‰©å±•ã€ç»Ÿè®¡åˆ†æã€è¿œç¨‹æ•°æ®åˆ†å‘ç­‰åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;figure align="center"&gt;
  &lt;img src="https://mestrace.github.io/images/6/binlog-rwsep.png" /&gt;
  &lt;figcaption&gt;åŸºäºBinlogä¸»ä»å¤åˆ¶å®ç°çš„è¯»å†™åˆ†ç¦»&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;MySQLè¿›ç¾¤çš„ä¸»ä»å¤åˆ¶ä¸»è¦æœ‰ä¸‰æ­¥ï¼Œå¦‚ä¸Šå›¾&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Masteråœ¨æ¯æ¬¡å®Œæˆæäº¤äº‹åŠ¡è¿”å›ä¹‹å‰ï¼Œè®°å½•æœ¬æ¬¡æ•°æ®å˜æ›´äº‹ä»¶è‡³Binlog&lt;/li&gt;
&lt;li&gt;SlaveåŸºäºè‡ªèº«ç»´æŠ¤çš„binlog offsetï¼Œä»Masteræ‹‰å–ç›¸åº”çš„binlogæ›´æ–°ã€‚å¹¶è®°å½•åˆ°relay logä¸­ã€‚&lt;/li&gt;
&lt;li&gt;Slaveæ¶ˆè´¹relay logå»æ›´æ–°è‡ªèº«çš„æ•°æ®ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸‹é¢ç®€è¿°å‡ ç§å®é™…å·¥ä½œä¸­ä¼šåº”ç”¨åˆ°çš„åœºæ™¯ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¯»å†™åˆ†ç¦»ï¼šåœ¨è¯»å¤šå†™å°‘çš„æƒ…å†µä¸‹ï¼Œå¯ä½¿ç”¨ä¸€ä¸ªä¸»åº“æ¥æ”¶å†™æµé‡ï¼Œå‡†å®æ—¶åœ°å°†BinlogåŒæ­¥åˆ°å¤šä¸ªä»åº“ä¸Šè¿›è¡Œæ•°æ®åŒæ­¥ï¼Œä»¥å®ç°è¯»çš„æ°´å¹³æ‰©å±•ã€‚ä¸šåŠ¡ä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©è¯»ä¸»åº“ã€‚è¯»å¤šå†™å°‘çš„åœºæ™¯åœ¨ä¸šåŠ¡toCçš„ä¸šåŠ¡ä¸Šéå¸¸å¸¸è§ï¼Œæ¯”å¦‚åœ¨ç”¨æˆ·ç³»ç»Ÿä¸­ï¼Œä½é¢‘çš„ç”¨æˆ·æ³¨å†Œ vs. é«˜é¢‘çš„ç”¨æˆ·ç™»å½•è¡Œä¸ºã€‚&lt;/li&gt;
&lt;li&gt;æ•°æ®æ¢å¤ï¼šéœ€è¦è¿›è¡Œæ•°æ®æ¢å¤çš„æ—¶å€™ï¼Œå°†Binlogè¿›è¡Œé‡æ”¾å³å¯æ¢å¤æ•°æ®åº“çš„çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;æœ€ç»ˆä¸€è‡´æ€§ï¼šå½“éœ€è¦ä¿è¯MySQLæ•°æ®åº“ä¸å…¶ä»–ç»„ä»¶/ç³»ç»Ÿä¸­æ•°æ®ä¸€è‡´æ—¶ï¼Œå¯ä»¥é€šè¿‡è®¢é˜…Binlogæ¶ˆæ¯çš„æ–¹å¼è¿›è¡Œå¤„ç†ï¼Œä»¥é¿å…å‡ºç°ä¸ä¸€è‡´çš„æƒ…å†µã€‚å‰å¸çš„æ•°æ®è¿ç§»ç»„å»ºå…ˆåŒæ­¥å­˜é‡æ•°æ®ï¼Œä¹‹åå†é€šè¿‡binlogæ•°æ®å¤„ç†å¢é‡æ”¹åŠ¨ã€‚&lt;/li&gt;
&lt;li&gt;å¼‚åœ°å¤šæ´» / è·¨DCåŒæ­¥ï¼šåœ¨å¼‚åœ°å¤šæ´»çš„åœºæ™¯ä¸‹ï¼Œå­˜åœ¨å¤šä¸»å†™å…¥ï¼Œéœ€è¦äº’ç›¸åŒæ­¥çš„åœºæ™¯ä¸‹ï¼Œéœ€è¦ä¾èµ–Binlogè¿›è¡ŒåŒæ­¥ã€‚ä¸»è¦çš„æŒ‘æˆ˜æœ‰æ•°æ®å†²çªï¼ˆä¸»é”® / å”¯ä¸€é”®ï¼‰å’Œæ•°æ®å›ç¯é—®é¢˜ã€‚å‰å¸åœ¨äºšå¤ªåŒºå’ŒåŒ—ç¾åŒºè¿è¥è¿è¥appçš„æ—¶å€™å°±é‡åˆ°äº†ç”¨æˆ·æ•°æ®åŒæ­¥çš„é—®é¢˜ï¼Œå¼€å‘äº†ä¸€æ¬¾åŒæ­¥å·¥å…·ä¸“é—¨ç”¨äºè·¨DCæ•°æ®åŒæ­¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;ç­”ç–‘è§£æƒ‘&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å¹¶å‘æ›´æ–°ä¸‹ï¼ŒBinlogçš„æœ‰åºæ€§å¦‚ä½•ä¿è¯ï¼Ÿ&lt;/p&gt;
&lt;p&gt;åœ¨è€çš„ç‰ˆæœ¬ä¸­ï¼Œé€šè¿‡&lt;code&gt;prepare_commit_mutex&lt;/code&gt;é”ä»¥ä¸²è¡Œçš„æ–¹å¼æ¥ä¿è¯MySQLæ•°æ®åº“ä¸Šå±‚Binlogå’ŒInnodbå­˜å‚¨å¼•æ“å±‚çš„äº‹åŠ¡æäº¤é¡ºåºä¸€è‡´ã€‚
MySQL 5.6å¼•å…¥äº†&lt;code&gt;BLGCï¼ˆBinary Log Group Commitï¼‰&lt;/code&gt;å¼•å…¥é˜Ÿåˆ—æœºåˆ¶ä¿è¯Innodb commité¡ºåºä¸binlogè½ç›˜é¡ºåºä¸€è‡´ï¼Œå¹¶å°†äº‹åŠ¡åˆ†ç»„ï¼Œç»„å†…çš„binlogåˆ·ç›˜åŠ¨ä½œäº¤ç»™ä¸€ä¸ªäº‹åŠ¡è¿›è¡Œï¼Œä»¥ä¿è¯é¡ºåºæ€§ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Flush Stage: å°†æ¯ä¸ªäº‹åŠ¡çš„äºŒè¿›åˆ¶æ—¥å¿—å†™å…¥å†…å­˜ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;Sync Stage: å°†å†…å­˜ä¸­çš„äºŒè¿›åˆ¶æ—¥å¿—åˆ·æ–°åˆ°ç£ç›˜ï¼Œè‹¥é˜Ÿåˆ—ä¸­æœ‰å¤šä¸ªäº‹åŠ¡ï¼Œé‚£ä¹ˆä»…ä¸€æ¬¡fsyncæ“ä½œå°±å®Œæˆäº†äºŒè¿›åˆ¶æ—¥å¿—çš„å†™å…¥ï¼Œè¿™å°±æ˜¯BLGCã€‚&lt;/li&gt;
&lt;li&gt;Commit Stage: é¡ºåºè°ƒç”¨å­˜å‚¨å¼•æ“å±‚äº‹åŠ¡çš„æäº¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å†™Binlogç£ç›˜åäº†å’‹åŠï¼ˆå•æœºæ•…éšœï¼‰ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å¯¹äºä¸šåŠ¡ï¼ˆmysql server - æœºå™¨ç¡¬ä»¶ï¼‰æ¥è¯´ï¼Œæ— éœ€é¢å¤–å…³å¿ƒè¿™ç§ç»†èŠ‚ï¼Œé»˜è®¤å½“æˆæ˜¯å¯é çš„å°±è¡Œäº†ã€‚ä¸€äº›é¢å¤–çš„ç»†èŠ‚éƒ½å¯ä»¥åœ¨ç£ç›˜å±‚é¢åšå±è”½ï¼Œå¦‚raidã€‚å¯¹äºæ•°æ®æ¥è¯´ï¼Œå®šæœŸæ‰«æå·¡æ£€å¯ä»¥é¢„é˜²æ•°æ®æŸåå¸¦æ¥çš„æŸå¤±ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹åŸå› æ˜¯å¯¼è‡´mysql è¡¨æ¯åçš„å¸¸è§åŸå› ï¼š &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æœåŠ¡å™¨çªç„¶æ–­ç”µå¯¼è‡´æ•°æ®æ–‡ä»¶æŸåã€‚ &lt;/li&gt;
&lt;li&gt;å¼ºåˆ¶å…³æœºï¼Œæ²¡æœ‰å…ˆå…³é—­mysql æœåŠ¡ã€‚ &lt;/li&gt;
&lt;li&gt;mysqld è¿›ç¨‹åœ¨å†™è¡¨æ—¶è¢«æ€æ‰ã€‚ &lt;/li&gt;
&lt;li&gt;ä½¿ç”¨myisamchk çš„åŒæ—¶ï¼Œmysqld ä¹Ÿåœ¨æ“ä½œè¡¨ã€‚ &lt;/li&gt;
&lt;li&gt;ç£ç›˜æ•…éšœã€‚ &lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨æ­»æœºã€‚ &lt;/li&gt;
&lt;li&gt;mysql æœ¬èº«çš„bug ã€‚ &lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;å‚è€ƒæ–‡çŒ®&lt;/h2&gt;
&lt;p&gt;å¦‚æœä½ æƒ³å˜å¾—æ›´å¼ºçš„è¯ï¼Œå¯ä»¥å»¶ä¼¸çœ‹çœ‹&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href="https://dev.mysql.com/doc/dev/mysql-server/latest/page_protocol_replication_binlog_event.html"&gt;Binlog Event, MySQL Source Code Documentation å®˜æ–¹ä»£ç æ³¨é‡Š&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.oreilly.com/library/view/mysql-high-availability/9781449341107/ch04.html"&gt;C. Bell, M. Kindahl and L. Thalmann, MySQL High Availability: Tools for Building Robust Data Centers é«˜å¯ç”¨MySQLï¼šæ„å»ºå¥å£®çš„æ•°æ®ä¸­å¿ƒ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://dev.mysql.com/doc/refman/8.0/en/replication-sbr-rbr.html"&gt;17.2.1.1 Advantages and Disadvantages of Statement-Based and Row-Based Replication, MySQL 8.0 Reference Manual å®˜æ–¹å‚è€ƒæ‰‹å†Œ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://dev.mysql.com/doc/refman/8.0/en/binary-log-mixed.html"&gt;5.4.4.3 Mixed Binary Logging Format, MySQL 8.0 Reference Manual å®˜æ–¹å‚è€ƒæ‰‹å†Œ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://dev.mysql.com/doc/refman/8.0/en/replication-features-auto-increment.html"&gt;17.5.1.1 Replication and AUTO_INCREMENT, MySQL 8.0 Reference Manual å®˜æ–¹å‚è€ƒæ‰‹å†Œ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://mysql.taobao.org/monthly/2014/12/05/"&gt;Binlog eventæœ‰åºæ€§ - é˜¿é‡Œäº‘RDS-æ•°æ®åº“å†…æ ¸ç»„&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.cnblogs.com/mao3714/p/8734838.html"&gt;MySQL ä¸­Redoä¸Binlogé¡ºåºä¸€è‡´æ€§é—®é¢˜&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</content><category term="Computer Science"></category><category term="MySQL"></category></entry></feed>